<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Emeraldion Lodge (codename Zelda): /Users/delphine/Development/SVN/emeraldion.it/zelda/node_modules/gulp-sass/node_modules/node-sass/src/libsass/parser.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css">
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="../../main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="../../files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>/Users/delphine/Development/SVN/emeraldion.it/zelda/node_modules/gulp-sass/node_modules/node-sass/src/libsass/parser.cpp</h1><a href="../../dc/ddd/parser_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include &lt;cstdlib&gt;</span>
<a name="l00002"></a>00002 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00003"></a>00003 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include "<a class="code" href="../../d1/d46/parser_8hpp.html">parser.hpp</a>"</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include "<a class="code" href="../../db/d3b/file_8hpp.html">file.hpp</a>"</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include "<a class="code" href="../../dc/dc1/inspect_8hpp.html">inspect.hpp</a>"</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include "<a class="code" href="../../de/d56/to__string_8hpp.html">to_string.hpp</a>"</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include "<a class="code" href="../../d3/dad/constants_8hpp.html">constants.hpp</a>"</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include "<a class="code" href="../../d0/d3f/util_8hpp.html">util.hpp</a>"</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include "<a class="code" href="../../d2/def/prelexer_8hpp.html">prelexer.hpp</a>"</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include "<a class="code" href="../../de/dd9/sass__functions_8h.html">sass_functions.h</a>"</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;typeinfo&gt;</span>
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 <span class="keyword">namespace </span>Sass {
<a name="l00016"></a>00016   <span class="keyword">using namespace </span>std;
<a name="l00017"></a>00017   <span class="keyword">using namespace </span>Constants;
<a name="l00018"></a>00018 
<a name="l00019"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#375ab5c5d150c8da2aeef76f3459e0e6">00019</a>   <a class="code" href="../../d4/d05/class_sass_1_1_parser.html">Parser</a> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#375ab5c5d150c8da2aeef76f3459e0e6">Parser::from_c_str</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* str, <a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp; <a class="code" href="../../da/d80/namespace_sass.html#ec24354016cba787162086d169717dcf">ctx</a>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> <a class="code" href="../../da/d80/namespace_sass.html#f837bfe668042350a77210b779f113c6">pstate</a>)
<a name="l00020"></a>00020   {
<a name="l00021"></a>00021     <a class="code" href="../../d4/d05/class_sass_1_1_parser.html">Parser</a> <a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a>(ctx, pstate);
<a name="l00022"></a>00022     p.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f2ed45b90afa2ef4ec6e09625335a082">source</a>   = str;
<a name="l00023"></a>00023     p.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a> = p.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f2ed45b90afa2ef4ec6e09625335a082">source</a>;
<a name="l00024"></a>00024     p.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#a0c4bdeda46c4ae639e086c22fe5eed6">end</a>      = str + strlen(str);
<a name="l00025"></a>00025     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* root = <span class="keyword">new</span> (ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>(pstate);
<a name="l00026"></a>00026     p.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#66647cd4b98ad1c8f31690eca60681a2">block_stack</a>.push_back(root);
<a name="l00027"></a>00027     root-&gt;is_root(<span class="keyword">true</span>);
<a name="l00028"></a>00028     <span class="keywordflow">return</span> p;
<a name="l00029"></a>00029   }
<a name="l00030"></a>00030 
<a name="l00031"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#98a6ff29da6a78a174ceaa4f8e8e82df">00031</a>   <a class="code" href="../../d4/d05/class_sass_1_1_parser.html">Parser</a> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#375ab5c5d150c8da2aeef76f3459e0e6">Parser::from_c_str</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* beg, <span class="keyword">const</span> <span class="keywordtype">char</span>* end, <a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp; <a class="code" href="../../da/d80/namespace_sass.html#ec24354016cba787162086d169717dcf">ctx</a>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> <a class="code" href="../../da/d80/namespace_sass.html#f837bfe668042350a77210b779f113c6">pstate</a>)
<a name="l00032"></a>00032   {
<a name="l00033"></a>00033     <a class="code" href="../../d4/d05/class_sass_1_1_parser.html">Parser</a> <a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a>(ctx, pstate);
<a name="l00034"></a>00034     p.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f2ed45b90afa2ef4ec6e09625335a082">source</a>   = beg;
<a name="l00035"></a>00035     p.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a> = p.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f2ed45b90afa2ef4ec6e09625335a082">source</a>;
<a name="l00036"></a>00036     p.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#a0c4bdeda46c4ae639e086c22fe5eed6">end</a>      = end;
<a name="l00037"></a>00037     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* root = <span class="keyword">new</span> (ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>(pstate);
<a name="l00038"></a>00038     p.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#66647cd4b98ad1c8f31690eca60681a2">block_stack</a>.push_back(root);
<a name="l00039"></a>00039     root-&gt;is_root(<span class="keyword">true</span>);
<a name="l00040"></a>00040     <span class="keywordflow">return</span> p;
<a name="l00041"></a>00041   }
<a name="l00042"></a>00042 
<a name="l00043"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#17cd3e19105cce1071af23173b9f2ef7">00043</a>   <a class="code" href="../../df/dea/class_sass_1_1_selector___list.html">Selector_List</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#17cd3e19105cce1071af23173b9f2ef7">Parser::parse_selector</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* src, <a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp; <a class="code" href="../../da/d80/namespace_sass.html#ec24354016cba787162086d169717dcf">ctx</a>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> <a class="code" href="../../da/d80/namespace_sass.html#f837bfe668042350a77210b779f113c6">pstate</a>)
<a name="l00044"></a>00044   {
<a name="l00045"></a>00045     <a class="code" href="../../d4/d05/class_sass_1_1_parser.html">Parser</a> <a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a> = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#375ab5c5d150c8da2aeef76f3459e0e6">Parser::from_c_str</a>(src, ctx, pstate);
<a name="l00046"></a>00046     <span class="comment">// ToDo: ruby sass errors on parent references</span>
<a name="l00047"></a>00047     <span class="comment">// ToDo: remap the source-map entries somehow</span>
<a name="l00048"></a>00048     <span class="keywordflow">return</span> p.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#780542b782a7ad33fed8792314100ba8">parse_selector_group</a>();
<a name="l00049"></a>00049   }
<a name="l00050"></a>00050 
<a name="l00051"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#acdcbd0471bafedcfe201a2e1f22d1cb">00051</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#acdcbd0471bafedcfe201a2e1f22d1cb">Parser::peek_newline</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* start)
<a name="l00052"></a>00052   {
<a name="l00053"></a>00053     <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#0e7979771e2539d93e040faf79aebf5c">peek_linefeed</a>(start ? start : <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>);
<a name="l00054"></a>00054   }
<a name="l00055"></a>00055 
<a name="l00056"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#94df5be9293b174abe27b456bca69c64">00056</a>   <a class="code" href="../../d4/d05/class_sass_1_1_parser.html">Parser</a> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#94df5be9293b174abe27b456bca69c64">Parser::from_token</a>(<a class="code" href="../../de/d6f/class_sass_1_1_token.html">Token</a> t, <a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp; <a class="code" href="../../da/d80/namespace_sass.html#ec24354016cba787162086d169717dcf">ctx</a>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> <a class="code" href="../../da/d80/namespace_sass.html#f837bfe668042350a77210b779f113c6">pstate</a>)
<a name="l00057"></a>00057   {
<a name="l00058"></a>00058     <a class="code" href="../../d4/d05/class_sass_1_1_parser.html">Parser</a> <a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a>(ctx, pstate);
<a name="l00059"></a>00059     p.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f2ed45b90afa2ef4ec6e09625335a082">source</a>   = t.<a class="code" href="../../de/d6f/class_sass_1_1_token.html#a06f03daa0de61d791a3c7855ee4378e">begin</a>;
<a name="l00060"></a>00060     p.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a> = p.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f2ed45b90afa2ef4ec6e09625335a082">source</a>;
<a name="l00061"></a>00061     p.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#a0c4bdeda46c4ae639e086c22fe5eed6">end</a>      = t.<a class="code" href="../../de/d6f/class_sass_1_1_token.html#a0c4bdeda46c4ae639e086c22fe5eed6">end</a>;
<a name="l00062"></a>00062     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* root = <span class="keyword">new</span> (ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>(pstate);
<a name="l00063"></a>00063     p.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#66647cd4b98ad1c8f31690eca60681a2">block_stack</a>.push_back(root);
<a name="l00064"></a>00064     root-&gt;is_root(<span class="keyword">true</span>);
<a name="l00065"></a>00065     <span class="keywordflow">return</span> p;
<a name="l00066"></a>00066   }
<a name="l00067"></a>00067 
<a name="l00068"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#048742eb6f80e71ce1d4fc3ab92cb7b9">00068</a>   <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#048742eb6f80e71ce1d4fc3ab92cb7b9">Parser::parse</a>()
<a name="l00069"></a>00069   {
<a name="l00070"></a>00070     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* root = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00071"></a>00071     <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#66647cd4b98ad1c8f31690eca60681a2">block_stack</a>.push_back(root);
<a name="l00072"></a>00072     root-&gt;is_root(<span class="keyword">true</span>);
<a name="l00073"></a>00073     <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#38f7cffef701b4b50a64c916b764f5fa">read_bom</a>();
<a name="l00074"></a>00074 
<a name="l00075"></a>00075     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#863cae91f5c8d3d65e24581ac19bf1b3">queue</a>.size() == 1) {
<a name="l00076"></a>00076       <a class="code" href="../../d3/de4/class_sass_1_1_import.html">Import</a>* pre = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d3/de4/class_sass_1_1_import.html">Import</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00077"></a>00077       <span class="keywordtype">string</span> load_path(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#863cae91f5c8d3d65e24581ac19bf1b3">queue</a>[0].load_path);
<a name="l00078"></a>00078       <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#08746fcb8e847b8d2143088c58f78042">do_import</a>(load_path, pre, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#eddef4eaa419f1aeeb4ffd654c32434e">c_headers</a>, <span class="keyword">false</span>);
<a name="l00079"></a>00079       <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#fc2e914ca2eb1cbfb972c2a5f137c13d">head_imports</a> = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#863cae91f5c8d3d65e24581ac19bf1b3">queue</a>.size() - 1;
<a name="l00080"></a>00080       <span class="keywordflow">if</span> (!pre-&gt;<a class="code" href="../../d3/de4/class_sass_1_1_import.html#a27bd4e4b0bbb66f0fd850b129261b59">urls</a>().empty()) (*root) &lt;&lt; pre;
<a name="l00081"></a>00081       <span class="keywordflow">if</span> (!pre-&gt;<a class="code" href="../../d3/de4/class_sass_1_1_import.html#bf2fa47a684f57ebf44fe211c785028b">files</a>().empty()) {
<a name="l00082"></a>00082         <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, S = pre-&gt;<a class="code" href="../../d3/de4/class_sass_1_1_import.html#bf2fa47a684f57ebf44fe211c785028b">files</a>().size(); i &lt; S; ++i) {
<a name="l00083"></a>00083           (*root) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d2/df5/class_sass_1_1_import___stub.html">Import_Stub</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, pre-&gt;<a class="code" href="../../d3/de4/class_sass_1_1_import.html#bf2fa47a684f57ebf44fe211c785028b">files</a>()[i]);
<a name="l00084"></a>00084         }
<a name="l00085"></a>00085       }
<a name="l00086"></a>00086     }
<a name="l00087"></a>00087 
<a name="l00088"></a>00088     <span class="keywordtype">bool</span> semicolon = <span class="keyword">false</span>;
<a name="l00089"></a>00089     string(error_message);
<a name="l00090"></a>00090     lex&lt; optional_spaces &gt;();
<a name="l00091"></a>00091     <a class="code" href="../../de/d42/struct_selector___lookahead.html">Selector_Lookahead</a> lookahead_result;
<a name="l00092"></a>00092     <span class="keywordflow">while</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a> &lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#a0c4bdeda46c4ae639e086c22fe5eed6">end</a>) {
<a name="l00093"></a>00093       <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0c7a422ab2f377fdfa384a8135118bde">parse_block_comments</a>(root);
<a name="l00094"></a>00094       <span class="keywordflow">if</span> (peek&lt; kwd_import &gt;()) {
<a name="l00095"></a>00095         <a class="code" href="../../d3/de4/class_sass_1_1_import.html">Import</a>* imp = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#e19f54467001ddbdf13a6e3fadadc4c2">parse_import</a>();
<a name="l00096"></a>00096         <span class="keywordflow">if</span> (!imp-&gt;<a class="code" href="../../d3/de4/class_sass_1_1_import.html#a27bd4e4b0bbb66f0fd850b129261b59">urls</a>().empty()) (*root) &lt;&lt; imp;
<a name="l00097"></a>00097         <span class="keywordflow">if</span> (!imp-&gt;<a class="code" href="../../d3/de4/class_sass_1_1_import.html#bf2fa47a684f57ebf44fe211c785028b">files</a>().empty()) {
<a name="l00098"></a>00098           <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, S = imp-&gt;<a class="code" href="../../d3/de4/class_sass_1_1_import.html#bf2fa47a684f57ebf44fe211c785028b">files</a>().size(); i &lt; S; ++i) {
<a name="l00099"></a>00099             (*root) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d2/df5/class_sass_1_1_import___stub.html">Import_Stub</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, imp-&gt;<a class="code" href="../../d3/de4/class_sass_1_1_import.html#bf2fa47a684f57ebf44fe211c785028b">files</a>()[i]);
<a name="l00100"></a>00100           }
<a name="l00101"></a>00101         }
<a name="l00102"></a>00102         semicolon = <span class="keyword">true</span>;
<a name="l00103"></a>00103         error_message = <span class="stringliteral">"top-level @import directive must be terminated by ';'"</span>;
<a name="l00104"></a>00104       }
<a name="l00105"></a>00105       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; kwd_mixin &gt;() || peek&lt; kwd_function &gt;()) {
<a name="l00106"></a>00106         (*root) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#7f7cc1e795d0927754580ded17857cfa">parse_definition</a>();
<a name="l00107"></a>00107       }
<a name="l00108"></a>00108       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; variable &gt;()) {
<a name="l00109"></a>00109         (*root) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#93da2c24cac07e22ab66cdecc64e924c">parse_assignment</a>();
<a name="l00110"></a>00110         semicolon = <span class="keyword">true</span>;
<a name="l00111"></a>00111         error_message = <span class="stringliteral">"top-level variable binding must be terminated by ';'"</span>;
<a name="l00112"></a>00112       }
<a name="l00113"></a>00113       <span class="comment">/*else if (peek&lt; sequence&lt; optional&lt; exactly&lt;'*'&gt; &gt;, alternatives&lt; identifier_schema, identifier &gt;, optional_spaces, exactly&lt;':'&gt;, optional_spaces, exactly&lt;'{'&gt; &gt; &gt;(position)) {</span>
<a name="l00114"></a>00114 <span class="comment">        (*root) &lt;&lt; parse_propset();</span>
<a name="l00115"></a>00115 <span class="comment">      }*/</span>
<a name="l00116"></a>00116       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; kwd_include &gt;() <span class="comment">/* || peek&lt; exactly&lt;'+'&gt; &gt;() */</span>) {
<a name="l00117"></a>00117         <a class="code" href="../../d4/d19/class_sass_1_1_mixin___call.html">Mixin_Call</a>* mixin_call = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#74eda6ff9c0f3a416404782dd9faca20">parse_mixin_call</a>();
<a name="l00118"></a>00118         (*root) &lt;&lt; mixin_call;
<a name="l00119"></a>00119         <span class="keywordflow">if</span> (!mixin_call-&gt;block()) {
<a name="l00120"></a>00120           semicolon = <span class="keyword">true</span>;
<a name="l00121"></a>00121           error_message = <span class="stringliteral">"top-level @include directive must be terminated by ';'"</span>;
<a name="l00122"></a>00122         }
<a name="l00123"></a>00123       }
<a name="l00124"></a>00124       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; kwd_if_directive &gt;()) {
<a name="l00125"></a>00125         (*root) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1ad949d68e3d770e0f8542332d5d343e">parse_if_directive</a>();
<a name="l00126"></a>00126       }
<a name="l00127"></a>00127       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; kwd_for_directive &gt;()) {
<a name="l00128"></a>00128         (*root) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#71f8e8989c349a9aba1a9bdb029fbdb9">parse_for_directive</a>();
<a name="l00129"></a>00129       }
<a name="l00130"></a>00130       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; kwd_each_directive &gt;()) {
<a name="l00131"></a>00131         (*root) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#10643159cd6540b6b2ad132c7205f076">parse_each_directive</a>();
<a name="l00132"></a>00132       }
<a name="l00133"></a>00133       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; kwd_while_directive &gt;()) {
<a name="l00134"></a>00134         (*root) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#31cc372ecb3b26334501ff6a108115c7">parse_while_directive</a>();
<a name="l00135"></a>00135       }
<a name="l00136"></a>00136       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; kwd_media &gt;()) {
<a name="l00137"></a>00137         (*root) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#72a77c7065bc2b94e634b52c6a756bd1">parse_media_block</a>();
<a name="l00138"></a>00138       }
<a name="l00139"></a>00139       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; kwd_at_root &gt;()) {
<a name="l00140"></a>00140         (*root) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#d60a4e9e0fe28810edb0ec424b51a3d1">parse_at_root_block</a>();
<a name="l00141"></a>00141       }
<a name="l00142"></a>00142       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; kwd_supports &gt;()) {
<a name="l00143"></a>00143         (*root) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#d0b9336e9de03fdf1d91cc26b71c8923">parse_feature_block</a>();
<a name="l00144"></a>00144       }
<a name="l00145"></a>00145       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; kwd_warn &gt;()) {
<a name="l00146"></a>00146         (*root) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#01fdc25917d0cf05c0293c8d0d1d198f">parse_warning</a>();
<a name="l00147"></a>00147         semicolon = <span class="keyword">true</span>;
<a name="l00148"></a>00148         error_message = <span class="stringliteral">"top-level @warn directive must be terminated by ';'"</span>;
<a name="l00149"></a>00149       }
<a name="l00150"></a>00150       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; kwd_err &gt;()) {
<a name="l00151"></a>00151         (*root) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#89422c7d7b7b35d528bf418af6378e07">parse_error</a>();
<a name="l00152"></a>00152         semicolon = <span class="keyword">true</span>;
<a name="l00153"></a>00153         error_message = <span class="stringliteral">"top-level @error directive must be terminated by ';'"</span>;
<a name="l00154"></a>00154       }
<a name="l00155"></a>00155       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; kwd_dbg &gt;()) {
<a name="l00156"></a>00156         (*root) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f47affe2057df4fb234c851d6cadeedb">parse_debug</a>();
<a name="l00157"></a>00157         semicolon = <span class="keyword">true</span>;
<a name="l00158"></a>00158         error_message = <span class="stringliteral">"top-level @debug directive must be terminated by ';'"</span>;
<a name="l00159"></a>00159       }
<a name="l00160"></a>00160       <span class="comment">// ignore the @charset directive for now</span>
<a name="l00161"></a>00161       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; exactly&lt; charset_kwd &gt; &gt;()) {
<a name="l00162"></a>00162         lex&lt; quoted_string &gt;();
<a name="l00163"></a>00163         lex&lt; one_plus&lt; exactly&lt;';'&gt; &gt; &gt;();
<a name="l00164"></a>00164       }
<a name="l00165"></a>00165       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; at_keyword &gt;()) {
<a name="l00166"></a>00166         <a class="code" href="../../d9/d0b/class_sass_1_1_at___rule.html">At_Rule</a>* at_rule = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#a84065b8a99ac8d0d89f67afa4eda664">parse_at_rule</a>();
<a name="l00167"></a>00167         (*root) &lt;&lt; at_rule;
<a name="l00168"></a>00168         <span class="keywordflow">if</span> (!at_rule-&gt;block()){
<a name="l00169"></a>00169           semicolon = <span class="keyword">true</span>;
<a name="l00170"></a>00170           error_message = <span class="stringliteral">"top-level directive must be terminated by ';'"</span>;
<a name="l00171"></a>00171         }
<a name="l00172"></a>00172       }
<a name="l00173"></a>00173       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((lookahead_result = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#8c0d385a19385a41fc6c18d7d6512e2e">lookahead_for_selector</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>)).found) {
<a name="l00174"></a>00174         (*root) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#318ff1f7e78823a56e9bb64f409321ce">parse_ruleset</a>(lookahead_result);
<a name="l00175"></a>00175       }
<a name="l00176"></a>00176       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; exactly&lt;';'&gt; &gt;()) {
<a name="l00177"></a>00177         lex&lt; one_plus&lt; exactly&lt;';'&gt; &gt; &gt;();
<a name="l00178"></a>00178       }
<a name="l00179"></a>00179       <span class="keywordflow">else</span> {
<a name="l00180"></a>00180         lex&lt; css_whitespace &gt;();
<a name="l00181"></a>00181         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a> &gt;= <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#a0c4bdeda46c4ae639e086c22fe5eed6">end</a>) <span class="keywordflow">break</span>;
<a name="l00182"></a>00182         <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"invalid top-level expression"</span>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#94bacf09d02f0c2638ca63d4f3974cc7">after_token</a>);
<a name="l00183"></a>00183       }
<a name="l00184"></a>00184       <span class="keywordflow">if</span> (semicolon) {
<a name="l00185"></a>00185         <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#42b576ae1a6383410b74ecd166917b18">one_plus</a>&lt; exactly&lt;';'&gt; &gt; &gt;() &amp;&amp; peek_css&lt; optional_css_whitespace &gt;() != <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#a0c4bdeda46c4ae639e086c22fe5eed6">end</a>)
<a name="l00186"></a>00186         { <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(error_message, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>); }
<a name="l00187"></a>00187         semicolon = <span class="keyword">false</span>;
<a name="l00188"></a>00188       }
<a name="l00189"></a>00189       lex&lt; optional_spaces &gt;();
<a name="l00190"></a>00190     }
<a name="l00191"></a>00191     <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#66647cd4b98ad1c8f31690eca60681a2">block_stack</a>.pop_back();
<a name="l00192"></a>00192     <span class="keywordflow">return</span> root;
<a name="l00193"></a>00193   }
<a name="l00194"></a>00194 
<a name="l00195"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#c75ce23bbb2cc90ad74430448528e4d6">00195</a>   <span class="keywordtype">void</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#c75ce23bbb2cc90ad74430448528e4d6">Parser::add_single_file</a> (<a class="code" href="../../d3/de4/class_sass_1_1_import.html">Import</a>* imp, <span class="keywordtype">string</span> import_path) {
<a name="l00196"></a>00196 
<a name="l00197"></a>00197     <span class="keywordtype">string</span> extension;
<a name="l00198"></a>00198     <span class="keywordtype">string</span> unquoted(<a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(import_path));
<a name="l00199"></a>00199     <span class="keywordflow">if</span> (unquoted.length() &gt; 4) { <span class="comment">// 2 quote marks + the 4 chars in .css</span>
<a name="l00200"></a>00200       <span class="comment">// a string constant is guaranteed to end with a quote mark, so make sure to skip it when indexing from the end</span>
<a name="l00201"></a>00201       extension = unquoted.substr(unquoted.length() - 4, 4);
<a name="l00202"></a>00202     }
<a name="l00203"></a>00203 
<a name="l00204"></a>00204     <span class="keywordflow">if</span> (extension == <span class="stringliteral">".css"</span>) {
<a name="l00205"></a>00205       <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>* loc = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(import_path));
<a name="l00206"></a>00206       <a class="code" href="../../de/d6a/class_sass_1_1_argument.html">Argument</a>* loc_arg = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../de/d6a/class_sass_1_1_argument.html">Argument</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, loc);
<a name="l00207"></a>00207       <a class="code" href="../../d0/d1a/class_sass_1_1_arguments.html">Arguments</a>* loc_args = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d1a/class_sass_1_1_arguments.html">Arguments</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00208"></a>00208       (*loc_args) &lt;&lt; loc_arg;
<a name="l00209"></a>00209       <a class="code" href="../../d1/d00/class_sass_1_1_function___call.html">Function_Call</a>* new_url = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d1/d00/class_sass_1_1_function___call.html">Function_Call</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <span class="stringliteral">"url"</span>, loc_args);
<a name="l00210"></a>00210       imp-&gt;<a class="code" href="../../d3/de4/class_sass_1_1_import.html#a27bd4e4b0bbb66f0fd850b129261b59">urls</a>().push_back(new_url);
<a name="l00211"></a>00211     }
<a name="l00212"></a>00212     <span class="keywordflow">else</span> {
<a name="l00213"></a>00213       <span class="keywordtype">string</span> current_dir = <a class="code" href="../../df/dfe/namespace_sass_1_1_file.html#2f62d537ae58a730e0aae1008863aec1">File::dir_name</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#46c20eb2a26abeb1e934cd66e1dd6484">path</a>);
<a name="l00214"></a>00214       <span class="keywordtype">string</span> resolved(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#18fc67a99c4859954bb7a2076322b289">add_file</a>(current_dir, unquoted));
<a name="l00215"></a>00215       <span class="keywordflow">if</span> (resolved.empty()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"file to import not found or unreadable: "</span> + unquoted + <span class="stringliteral">"\nCurrent dir: "</span> + current_dir, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00216"></a>00216       imp-&gt;<a class="code" href="../../d3/de4/class_sass_1_1_import.html#bf2fa47a684f57ebf44fe211c785028b">files</a>().push_back(resolved);
<a name="l00217"></a>00217     }
<a name="l00218"></a>00218 
<a name="l00219"></a>00219   }
<a name="l00220"></a>00220 
<a name="l00221"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f991befc1d90b65990717288d0b606e1">00221</a>   <span class="keywordtype">void</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f991befc1d90b65990717288d0b606e1">Parser::import_single_file</a> (<a class="code" href="../../d3/de4/class_sass_1_1_import.html">Import</a>* imp, <span class="keywordtype">string</span> import_path) {
<a name="l00222"></a>00222 
<a name="l00223"></a>00223     <span class="keywordflow">if</span> (!<a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(import_path).substr(0, 7).compare(<span class="stringliteral">"http://"</span>) ||
<a name="l00224"></a>00224         !<a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(import_path).substr(0, 8).compare(<span class="stringliteral">"https://"</span>) ||
<a name="l00225"></a>00225         !<a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(import_path).substr(0, 2).compare(<span class="stringliteral">"//"</span>))
<a name="l00226"></a>00226     {
<a name="l00227"></a>00227       imp-&gt;<a class="code" href="../../d3/de4/class_sass_1_1_import.html#a27bd4e4b0bbb66f0fd850b129261b59">urls</a>().push_back(<span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, import_path));
<a name="l00228"></a>00228     }
<a name="l00229"></a>00229     <span class="keywordflow">else</span> {
<a name="l00230"></a>00230       <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#c75ce23bbb2cc90ad74430448528e4d6">add_single_file</a>(imp, import_path);
<a name="l00231"></a>00231     }
<a name="l00232"></a>00232 
<a name="l00233"></a>00233   }
<a name="l00234"></a>00234 
<a name="l00235"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#08746fcb8e847b8d2143088c58f78042">00235</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#08746fcb8e847b8d2143088c58f78042">Parser::do_import</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; import_path, <a class="code" href="../../d3/de4/class_sass_1_1_import.html">Import</a>* imp, vector&lt;Sass_Importer_Entry&gt; importers, <span class="keywordtype">bool</span> only_one)
<a name="l00236"></a>00236   {
<a name="l00237"></a>00237     <span class="keywordtype">bool</span> has_import = <span class="keyword">false</span>;
<a name="l00238"></a>00238     <span class="keywordtype">string</span> load_path = <a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(import_path);
<a name="l00239"></a>00239     <span class="keywordflow">for</span> (<span class="keyword">auto</span> importer : importers) {
<a name="l00240"></a>00240       <span class="comment">// int priority = sass_importer_get_priority(importer);</span>
<a name="l00241"></a>00241       <a class="code" href="../../de/dd9/sass__functions_8h.html#273f15b351a8fa6ed176423d40748e6c">Sass_Importer_Fn</a> fn = <a class="code" href="../../d4/d5b/sass__functions_8cpp.html#b1cee1512293d4905799cb3c2eb287e7">sass_importer_get_function</a>(importer);
<a name="l00242"></a>00242       <span class="keywordflow">if</span> (<a class="code" href="../../d8/d67/struct_sass___import.html">Sass_Import_List</a> includes =
<a name="l00243"></a>00243           fn(load_path.c_str(), importer, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#d394ead1c411e42fa05826828d3acba0">c_compiler</a>)
<a name="l00244"></a>00244       ) {
<a name="l00245"></a>00245         <a class="code" href="../../d8/d67/struct_sass___import.html">Sass_Import_List</a> list = includes;
<a name="l00246"></a>00246         <span class="keywordflow">while</span> (*includes) {
<a name="l00247"></a>00247           <a class="code" href="../../d8/d67/struct_sass___import.html">Sass_Import_Entry</a> include = *includes;
<a name="l00248"></a>00248           <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dd/d82/class_sass_1_1_position.html#937a46aebdfd504e51dd91c4e00f4c7a">file</a> = <a class="code" href="../../d4/d5b/sass__functions_8cpp.html#8c44d518d22be5662f555c6bf401e9ce">sass_import_get_path</a>(include);
<a name="l00249"></a>00249           <span class="keywordtype">char</span>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f2ed45b90afa2ef4ec6e09625335a082">source</a> = <a class="code" href="../../d4/d5b/sass__functions_8cpp.html#5deb26fa1db21e121ed83b646ec8c8de">sass_import_take_source</a>(include);
<a name="l00250"></a>00250           <span class="keywordtype">size_t</span> <a class="code" href="../../db/d78/class_sass_1_1_offset.html#178448bb4d6d83c01610fec5d40f7c5c">line</a> = <a class="code" href="../../d4/d5b/sass__functions_8cpp.html#84ebe572837d594c5e51010175e3e32a">sass_import_get_error_line</a>(include);
<a name="l00251"></a>00251           <span class="keywordtype">size_t</span> <a class="code" href="../../db/d78/class_sass_1_1_offset.html#85bed66e93e00dacf6642c86b0b5c013">column</a> = <a class="code" href="../../d4/d5b/sass__functions_8cpp.html#430ef911837d0305efdf043cb4814479">sass_import_get_error_column</a>(include);
<a name="l00252"></a>00252           <span class="keyword">const</span> <span class="keywordtype">char</span>* message = <a class="code" href="../../d4/d5b/sass__functions_8cpp.html#2b91afdc9e7786f5a3b40f725371d84d">sass_import_get_error_message</a>(include);
<a name="l00253"></a>00253           <span class="keywordflow">if</span> (message) {
<a name="l00254"></a>00254             <span class="keywordflow">if</span> (line == <a class="code" href="../../dd/d4a/plugins_8cpp.html#456568f9bcf7b01122b9e776c6e38ada">string::npos</a> &amp;&amp; column == <a class="code" href="../../dd/d4a/plugins_8cpp.html#456568f9bcf7b01122b9e776c6e38ada">string::npos</a>) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(message, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00255"></a>00255             <span class="keywordflow">else</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(message, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#a5a8cae8e7ffea1bd39d5564880c4a03">ParserState</a>(message, source, <a class="code" href="../../dd/d82/class_sass_1_1_position.html#7e8370f8c29bbc37fb5630427868f470">Position</a>(line, column)));
<a name="l00256"></a>00256           } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (source) {
<a name="l00257"></a>00257             <span class="keywordflow">if</span> (file) {
<a name="l00258"></a>00258               <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#0d573f0baa4fce08a8421359e5b74d47">add_source</a>(file, load_path, source);
<a name="l00259"></a>00259               imp-&gt;<a class="code" href="../../d3/de4/class_sass_1_1_import.html#bf2fa47a684f57ebf44fe211c785028b">files</a>().push_back(file);
<a name="l00260"></a>00260             } <span class="keywordflow">else</span> {
<a name="l00261"></a>00261               <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#0d573f0baa4fce08a8421359e5b74d47">add_source</a>(load_path, load_path, source);
<a name="l00262"></a>00262               imp-&gt;<a class="code" href="../../d3/de4/class_sass_1_1_import.html#bf2fa47a684f57ebf44fe211c785028b">files</a>().push_back(load_path);
<a name="l00263"></a>00263             }
<a name="l00264"></a>00264           } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(file) {
<a name="l00265"></a>00265             <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f991befc1d90b65990717288d0b606e1">import_single_file</a>(imp, file);
<a name="l00266"></a>00266           }
<a name="l00267"></a>00267           ++includes;
<a name="l00268"></a>00268         }
<a name="l00269"></a>00269         <span class="comment">// deallocate returned memory</span>
<a name="l00270"></a>00270         <a class="code" href="../../d4/d5b/sass__functions_8cpp.html#571b2a4b623c151c0787b099ebf70d05">sass_delete_import_list</a>(list);
<a name="l00271"></a>00271         <span class="comment">// set success flag</span>
<a name="l00272"></a>00272         has_import = <span class="keyword">true</span>;
<a name="l00273"></a>00273         <span class="comment">// break import chain</span>
<a name="l00274"></a>00274         <span class="keywordflow">if</span> (only_one) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00275"></a>00275       }
<a name="l00276"></a>00276     }
<a name="l00277"></a>00277     <span class="comment">// return result</span>
<a name="l00278"></a>00278     <span class="keywordflow">return</span> has_import;
<a name="l00279"></a>00279   }
<a name="l00280"></a>00280 
<a name="l00281"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#e19f54467001ddbdf13a6e3fadadc4c2">00281</a>   <a class="code" href="../../d3/de4/class_sass_1_1_import.html">Import</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#e19f54467001ddbdf13a6e3fadadc4c2">Parser::parse_import</a>()
<a name="l00282"></a>00282   {
<a name="l00283"></a>00283     lex&lt; kwd_import &gt;();
<a name="l00284"></a>00284     <a class="code" href="../../d3/de4/class_sass_1_1_import.html">Import</a>* imp = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d3/de4/class_sass_1_1_import.html">Import</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00285"></a>00285     <span class="keywordtype">bool</span> first = <span class="keyword">true</span>;
<a name="l00286"></a>00286     <span class="keywordflow">do</span> {
<a name="l00287"></a>00287       <span class="keywordflow">while</span> (lex&lt; block_comment &gt;());
<a name="l00288"></a>00288       <span class="keywordflow">if</span> (lex&lt; quoted_string &gt;()) {
<a name="l00289"></a>00289         <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#08746fcb8e847b8d2143088c58f78042">do_import</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>, imp, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#3b294e349c662357c4cc06e6cb2962a3">c_importers</a>, <span class="keyword">true</span>))
<a name="l00290"></a>00290         {
<a name="l00291"></a>00291           <span class="comment">// push single file import</span>
<a name="l00292"></a>00292           <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f991befc1d90b65990717288d0b606e1">import_single_file</a>(imp, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l00293"></a>00293         }
<a name="l00294"></a>00294       }
<a name="l00295"></a>00295       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex&lt; uri_prefix &gt;()) {
<a name="l00296"></a>00296         <a class="code" href="../../d0/d1a/class_sass_1_1_arguments.html">Arguments</a>* args = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d1a/class_sass_1_1_arguments.html">Arguments</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00297"></a>00297         <a class="code" href="../../d1/d00/class_sass_1_1_function___call.html">Function_Call</a>* result = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d1/d00/class_sass_1_1_function___call.html">Function_Call</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <span class="stringliteral">"url"</span>, args);
<a name="l00298"></a>00298         <span class="keywordflow">if</span> (lex&lt; quoted_string &gt;()) {
<a name="l00299"></a>00299           <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* the_url = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#40846dc85c924cb333a605f4ba9f7364">parse_string</a>();
<a name="l00300"></a>00300           *args &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../de/d6a/class_sass_1_1_argument.html">Argument</a>(the_url-&gt;pstate(), the_url);
<a name="l00301"></a>00301         }
<a name="l00302"></a>00302         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex &lt; uri_value &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>)) { <span class="comment">// chunk seems to work too!</span>
<a name="l00303"></a>00303           <a class="code" href="../../db/ddf/class_sass_1_1_string.html">String</a>* the_url = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#ba34a907f8619a5cbf26c8fb53f56324">parse_interpolated_chunk</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l00304"></a>00304           *args &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../de/d6a/class_sass_1_1_argument.html">Argument</a>(the_url-&gt;pstate(), the_url);
<a name="l00305"></a>00305         }
<a name="l00306"></a>00306         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a> &lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#82a9ac87e150fa9bf336eb153d7de68a">skip_over_scopes</a> &lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a> &lt; <span class="charliteral">'('</span> &gt;, <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a> &lt; <span class="charliteral">')'</span> &gt; &gt; &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>)) {
<a name="l00307"></a>00307           <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* the_url = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>(); <span class="comment">// parse_interpolated_chunk(lexed);</span>
<a name="l00308"></a>00308           *args &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../de/d6a/class_sass_1_1_argument.html">Argument</a>(the_url-&gt;pstate(), the_url);
<a name="l00309"></a>00309         }
<a name="l00310"></a>00310         <span class="keywordflow">else</span> {
<a name="l00311"></a>00311           <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"malformed URL"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00312"></a>00312         }
<a name="l00313"></a>00313         <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt; &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"URI is missing ')'"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00314"></a>00314         imp-&gt;urls().push_back(result);
<a name="l00315"></a>00315       }
<a name="l00316"></a>00316       <span class="keywordflow">else</span> {
<a name="l00317"></a>00317         <span class="keywordflow">if</span> (first) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"@import directive requires a url or quoted path"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00318"></a>00318         <span class="keywordflow">else</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"expecting another url or quoted path in @import list"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00319"></a>00319       }
<a name="l00320"></a>00320       first = <span class="keyword">false</span>;
<a name="l00321"></a>00321     } <span class="keywordflow">while</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0c9d2460847d81a9d93fb1c221291803">lex_css</a>&lt; exactly&lt;','&gt; &gt;());
<a name="l00322"></a>00322     <span class="keywordflow">return</span> imp;
<a name="l00323"></a>00323   }
<a name="l00324"></a>00324 
<a name="l00325"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#7f7cc1e795d0927754580ded17857cfa">00325</a>   <a class="code" href="../../db/d55/class_sass_1_1_definition.html">Definition</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#7f7cc1e795d0927754580ded17857cfa">Parser::parse_definition</a>()
<a name="l00326"></a>00326   {
<a name="l00327"></a>00327     <a class="code" href="../../db/d55/class_sass_1_1_definition.html#1d1cfd8ffb84e947f82999c682b666a7">Definition::Type</a> which_type = <a class="code" href="../../db/d55/class_sass_1_1_definition.html#1d1cfd8ffb84e947f82999c682b666a7241a95887e26873bdc1e4e4fdfc5690d">Definition::MIXIN</a>;
<a name="l00328"></a>00328     <span class="keywordflow">if</span>      (lex&lt; kwd_mixin &gt;())    which_type = <a class="code" href="../../db/d55/class_sass_1_1_definition.html#1d1cfd8ffb84e947f82999c682b666a7241a95887e26873bdc1e4e4fdfc5690d">Definition::MIXIN</a>;
<a name="l00329"></a>00329     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex&lt; kwd_function &gt;()) which_type = <a class="code" href="../../db/d55/class_sass_1_1_definition.html#1d1cfd8ffb84e947f82999c682b666a7ab8c4d8135967b887502fda4f76deaa6">Definition::FUNCTION</a>;
<a name="l00330"></a>00330     <span class="keywordtype">string</span> which_str(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l00331"></a>00331     <span class="keywordflow">if</span> (!lex&lt; identifier &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"invalid name in "</span> + which_str + <span class="stringliteral">" definition"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00332"></a>00332     <span class="keywordtype">string</span> <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#db7e7d3cb8558e5c8c2c6ee7704b94ce">name</a>(<a class="code" href="../../d0/d1c/namespace_sass_1_1_util.html#84d459f975b5bed53d97a712add3261f">Util::normalize_underscores</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>));
<a name="l00333"></a>00333     <span class="keywordflow">if</span> (which_type == <a class="code" href="../../db/d55/class_sass_1_1_definition.html#1d1cfd8ffb84e947f82999c682b666a7ab8c4d8135967b887502fda4f76deaa6">Definition::FUNCTION</a> &amp;&amp; (name == <span class="stringliteral">"and"</span> || name == <span class="stringliteral">"or"</span> || name == <span class="stringliteral">"not"</span>))
<a name="l00334"></a>00334     { <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"Invalid function name \""</span> + name + <span class="stringliteral">"\"."</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>); }
<a name="l00335"></a>00335     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> source_position_of_def = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l00336"></a>00336     <a class="code" href="../../d8/d50/class_sass_1_1_parameters.html">Parameters</a>* params = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#c6169d7a4249621dc890f64fc9fb4622">parse_parameters</a>();
<a name="l00337"></a>00337     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt; &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"body for "</span> + which_str + <span class="stringliteral">" "</span> + name + <span class="stringliteral">" must begin with a '{'"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00338"></a>00338     <span class="keywordflow">if</span> (which_type == <a class="code" href="../../db/d55/class_sass_1_1_definition.html#1d1cfd8ffb84e947f82999c682b666a7241a95887e26873bdc1e4e4fdfc5690d">Definition::MIXIN</a>) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#6d33c8a2f8ea15a6040490021d3cf8e9">stack</a>.push_back(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#34a483a690bd1cbb166378496a6aea70dd5b59fbb38afc26f181479aa6ff4f5d">mixin_def</a>);
<a name="l00339"></a>00339     <span class="keywordflow">else</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#6d33c8a2f8ea15a6040490021d3cf8e9">stack</a>.push_back(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#34a483a690bd1cbb166378496a6aea704b9368da31fbe03c6d0be126205212ef">function_def</a>);
<a name="l00340"></a>00340     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* body = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#95ac245b6f5628b59c54b9e66475e6eb">parse_block</a>();
<a name="l00341"></a>00341     <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#6d33c8a2f8ea15a6040490021d3cf8e9">stack</a>.pop_back();
<a name="l00342"></a>00342     <a class="code" href="../../db/d55/class_sass_1_1_definition.html">Definition</a>* def = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d55/class_sass_1_1_definition.html">Definition</a>(source_position_of_def, name, params, body, &amp;<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>, which_type);
<a name="l00343"></a>00343     <span class="keywordflow">return</span> def;
<a name="l00344"></a>00344   }
<a name="l00345"></a>00345 
<a name="l00346"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#c6169d7a4249621dc890f64fc9fb4622">00346</a>   <a class="code" href="../../d8/d50/class_sass_1_1_parameters.html">Parameters</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#c6169d7a4249621dc890f64fc9fb4622">Parser::parse_parameters</a>()
<a name="l00347"></a>00347   {
<a name="l00348"></a>00348     <span class="keywordtype">string</span> <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#db7e7d3cb8558e5c8c2c6ee7704b94ce">name</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l00349"></a>00349     <a class="code" href="../../dd/d82/class_sass_1_1_position.html">Position</a> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a> = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#94bacf09d02f0c2638ca63d4f3974cc7">after_token</a>;
<a name="l00350"></a>00350     <a class="code" href="../../d8/d50/class_sass_1_1_parameters.html">Parameters</a>* params = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d8/d50/class_sass_1_1_parameters.html">Parameters</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00351"></a>00351     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0c9d2460847d81a9d93fb1c221291803">lex_css</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'('</span>&gt; &gt;()) {
<a name="l00352"></a>00352       <span class="comment">// if there's anything there at all</span>
<a name="l00353"></a>00353       <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1aecdde181125d84af61c9e4a95b9b63">peek_css</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt; &gt;()) {
<a name="l00354"></a>00354         <span class="keywordflow">do</span> (*params) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#6cff3f07b571fe877fa5328ef982860f">parse_parameter</a>();
<a name="l00355"></a>00355         <span class="keywordflow">while</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0c9d2460847d81a9d93fb1c221291803">lex_css</a>&lt; exactly&lt;','&gt; &gt;());
<a name="l00356"></a>00356       }
<a name="l00357"></a>00357       <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0c9d2460847d81a9d93fb1c221291803">lex_css</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt; &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"expected a variable name (e.g. $x) or ')' for the parameter list for "</span> + name, position);
<a name="l00358"></a>00358     }
<a name="l00359"></a>00359     <span class="keywordflow">return</span> params;
<a name="l00360"></a>00360   }
<a name="l00361"></a>00361 
<a name="l00362"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#6cff3f07b571fe877fa5328ef982860f">00362</a>   <a class="code" href="../../d5/db8/class_sass_1_1_parameter.html">Parameter</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#6cff3f07b571fe877fa5328ef982860f">Parser::parse_parameter</a>()
<a name="l00363"></a>00363   {
<a name="l00364"></a>00364     <span class="keywordflow">while</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; alternatives &lt; spaces, block_comment &gt; &gt;());
<a name="l00365"></a>00365     lex&lt; variable &gt;();
<a name="l00366"></a>00366     <span class="keywordtype">string</span> <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#db7e7d3cb8558e5c8c2c6ee7704b94ce">name</a>(<a class="code" href="../../d0/d1c/namespace_sass_1_1_util.html#84d459f975b5bed53d97a712add3261f">Util::normalize_underscores</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>));
<a name="l00367"></a>00367     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#378ba0a02321c13e9b177c798e3869c5">pos</a> = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l00368"></a>00368     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* val = 0;
<a name="l00369"></a>00369     <span class="keywordtype">bool</span> is_rest = <span class="keyword">false</span>;
<a name="l00370"></a>00370     <span class="keywordflow">while</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; alternatives &lt; spaces, block_comment &gt; &gt;());
<a name="l00371"></a>00371     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; exactly&lt;':'&gt; &gt;()) { <span class="comment">// there's a default value</span>
<a name="l00372"></a>00372       <span class="keywordflow">while</span> (lex&lt; block_comment &gt;());
<a name="l00373"></a>00373       val = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#10dd998de961f4ef59cf03b71ed7926d">parse_space_list</a>();
<a name="l00374"></a>00374       val-&gt;is_delayed(<span class="keyword">false</span>);
<a name="l00375"></a>00375     }
<a name="l00376"></a>00376     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; exactly&lt; ellipsis &gt; &gt;()) {
<a name="l00377"></a>00377       is_rest = <span class="keyword">true</span>;
<a name="l00378"></a>00378     }
<a name="l00379"></a>00379     <a class="code" href="../../d5/db8/class_sass_1_1_parameter.html">Parameter</a>* <a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a> = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d5/db8/class_sass_1_1_parameter.html">Parameter</a>(pos, name, val, is_rest);
<a name="l00380"></a>00380     <span class="keywordflow">return</span> p;
<a name="l00381"></a>00381   }
<a name="l00382"></a>00382 
<a name="l00383"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#74eda6ff9c0f3a416404782dd9faca20">00383</a>   <a class="code" href="../../d4/d19/class_sass_1_1_mixin___call.html">Mixin_Call</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#74eda6ff9c0f3a416404782dd9faca20">Parser::parse_mixin_call</a>()
<a name="l00384"></a>00384   {
<a name="l00385"></a>00385     lex&lt; kwd_include &gt;() <span class="comment">/* || lex&lt; exactly&lt;'+'&gt; &gt;() */</span>;
<a name="l00386"></a>00386     <span class="keywordflow">if</span> (!lex&lt; identifier &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"invalid name in @include directive"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00387"></a>00387     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> source_position_of_call = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l00388"></a>00388     <span class="keywordtype">string</span> <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#db7e7d3cb8558e5c8c2c6ee7704b94ce">name</a>(<a class="code" href="../../d0/d1c/namespace_sass_1_1_util.html#84d459f975b5bed53d97a712add3261f">Util::normalize_underscores</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>));
<a name="l00389"></a>00389     <a class="code" href="../../d0/d1a/class_sass_1_1_arguments.html">Arguments</a>* args = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0835f4c42118fb9715d05ef8f0b64db0">parse_arguments</a>();
<a name="l00390"></a>00390     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* content = 0;
<a name="l00391"></a>00391     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt; &gt;()) {
<a name="l00392"></a>00392       content = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#95ac245b6f5628b59c54b9e66475e6eb">parse_block</a>();
<a name="l00393"></a>00393     }
<a name="l00394"></a>00394     <a class="code" href="../../d4/d19/class_sass_1_1_mixin___call.html">Mixin_Call</a>* the_call = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d4/d19/class_sass_1_1_mixin___call.html">Mixin_Call</a>(source_position_of_call, name, args, content);
<a name="l00395"></a>00395     <span class="keywordflow">return</span> the_call;
<a name="l00396"></a>00396   }
<a name="l00397"></a>00397 
<a name="l00398"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0835f4c42118fb9715d05ef8f0b64db0">00398</a>   <a class="code" href="../../d0/d1a/class_sass_1_1_arguments.html">Arguments</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0835f4c42118fb9715d05ef8f0b64db0">Parser::parse_arguments</a>(<span class="keywordtype">bool</span> has_url)
<a name="l00399"></a>00399   {
<a name="l00400"></a>00400     <span class="keywordtype">string</span> <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#db7e7d3cb8558e5c8c2c6ee7704b94ce">name</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l00401"></a>00401     <a class="code" href="../../dd/d82/class_sass_1_1_position.html">Position</a> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a> = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#94bacf09d02f0c2638ca63d4f3974cc7">after_token</a>;
<a name="l00402"></a>00402     <a class="code" href="../../d0/d1a/class_sass_1_1_arguments.html">Arguments</a>* args = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d1a/class_sass_1_1_arguments.html">Arguments</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00403"></a>00403     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0c9d2460847d81a9d93fb1c221291803">lex_css</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'('</span>&gt; &gt;()) {
<a name="l00404"></a>00404       <span class="comment">// if there's anything there at all</span>
<a name="l00405"></a>00405       <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1aecdde181125d84af61c9e4a95b9b63">peek_css</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt; &gt;()) {
<a name="l00406"></a>00406         <span class="keywordflow">do</span> (*args) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#09354d3b3c9f083416a32e2672fa4e22">parse_argument</a>(has_url);
<a name="l00407"></a>00407         <span class="keywordflow">while</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0c9d2460847d81a9d93fb1c221291803">lex_css</a>&lt; exactly&lt;','&gt; &gt;());
<a name="l00408"></a>00408       }
<a name="l00409"></a>00409       <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0c9d2460847d81a9d93fb1c221291803">lex_css</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt; &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"expected a variable name (e.g. $x) or ')' for the parameter list for "</span> + name, position);
<a name="l00410"></a>00410     }
<a name="l00411"></a>00411     <span class="keywordflow">return</span> args;
<a name="l00412"></a>00412   }
<a name="l00413"></a>00413 
<a name="l00414"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#09354d3b3c9f083416a32e2672fa4e22">00414</a>   <a class="code" href="../../de/d6a/class_sass_1_1_argument.html">Argument</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#09354d3b3c9f083416a32e2672fa4e22">Parser::parse_argument</a>(<span class="keywordtype">bool</span> has_url)
<a name="l00415"></a>00415   {
<a name="l00416"></a>00416 
<a name="l00417"></a>00417     <a class="code" href="../../de/d6a/class_sass_1_1_argument.html">Argument</a>* <a class="code" href="../../d1/ddf/namespacegyp_1_1msvs__emulation.html#4ef4a85aab5149bdab1fbd46db2fa082">arg</a>;
<a name="l00418"></a>00418     <span class="comment">// some urls can look like line comments (parse literally - chunk would not work)</span>
<a name="l00419"></a>00419     <span class="keywordflow">if</span> (has_url &amp;&amp; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a> &lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#777726bf22f56dcdaddb8d54c0ced2fd">uri_value</a>, <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#4eeaebe19dca339453f69c60aca396b5">lookahead</a> &lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#516df737016428aed660176820967ca9">loosely</a>&lt;<span class="charliteral">')'</span>&gt; &gt; &gt; &gt;(<span class="keyword">false</span>)) {
<a name="l00420"></a>00420       <a class="code" href="../../db/ddf/class_sass_1_1_string.html">String</a>* the_url = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#ba34a907f8619a5cbf26c8fb53f56324">parse_interpolated_chunk</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l00421"></a>00421       arg = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../de/d6a/class_sass_1_1_argument.html">Argument</a>(the_url-&gt;pstate(), the_url);
<a name="l00422"></a>00422     }
<a name="l00423"></a>00423     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1aecdde181125d84af61c9e4a95b9b63">peek_css</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a> &lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#b73157d720a334b9f177fd09aa519aad">variable</a>, <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#3659266e86b09b06772af0128fed1885">optional_css_comments</a>, exactly&lt;':'&gt; &gt; &gt;()) {
<a name="l00424"></a>00424       lex_css&lt; variable &gt;();
<a name="l00425"></a>00425       <span class="keywordtype">string</span> <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#db7e7d3cb8558e5c8c2c6ee7704b94ce">name</a>(<a class="code" href="../../d0/d1c/namespace_sass_1_1_util.html#84d459f975b5bed53d97a712add3261f">Util::normalize_underscores</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>));
<a name="l00426"></a>00426       <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> <a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a> = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l00427"></a>00427       lex_css&lt; exactly&lt;':'&gt; &gt;();
<a name="l00428"></a>00428       <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* val = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#10dd998de961f4ef59cf03b71ed7926d">parse_space_list</a>();
<a name="l00429"></a>00429       val-&gt;is_delayed(<span class="keyword">false</span>);
<a name="l00430"></a>00430       arg = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../de/d6a/class_sass_1_1_argument.html">Argument</a>(p, val, name);
<a name="l00431"></a>00431     }
<a name="l00432"></a>00432     <span class="keywordflow">else</span> {
<a name="l00433"></a>00433       <span class="keywordtype">bool</span> is_arglist = <span class="keyword">false</span>;
<a name="l00434"></a>00434       <span class="keywordtype">bool</span> is_keyword = <span class="keyword">false</span>;
<a name="l00435"></a>00435       <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* val = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#10dd998de961f4ef59cf03b71ed7926d">parse_space_list</a>();
<a name="l00436"></a>00436       val-&gt;is_delayed(<span class="keyword">false</span>);
<a name="l00437"></a>00437       <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0c9d2460847d81a9d93fb1c221291803">lex_css</a>&lt; exactly&lt; ellipsis &gt; &gt;()) {
<a name="l00438"></a>00438         <span class="keywordflow">if</span> (val-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8684cafa5feda04184537b4d7d346e1e89b">Expression::MAP</a>) is_keyword = <span class="keyword">true</span>;
<a name="l00439"></a>00439         <span class="keywordflow">else</span> is_arglist = <span class="keyword">true</span>;
<a name="l00440"></a>00440       }
<a name="l00441"></a>00441       arg = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../de/d6a/class_sass_1_1_argument.html">Argument</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, val, <span class="stringliteral">""</span>, is_arglist, is_keyword);
<a name="l00442"></a>00442     }
<a name="l00443"></a>00443     <span class="keywordflow">return</span> arg;
<a name="l00444"></a>00444   }
<a name="l00445"></a>00445 
<a name="l00446"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#93da2c24cac07e22ab66cdecc64e924c">00446</a>   <a class="code" href="../../d0/d35/class_sass_1_1_assignment.html">Assignment</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#93da2c24cac07e22ab66cdecc64e924c">Parser::parse_assignment</a>()
<a name="l00447"></a>00447   {
<a name="l00448"></a>00448     lex&lt; variable &gt;();
<a name="l00449"></a>00449     <span class="keywordtype">string</span> <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#db7e7d3cb8558e5c8c2c6ee7704b94ce">name</a>(<a class="code" href="../../d0/d1c/namespace_sass_1_1_util.html#84d459f975b5bed53d97a712add3261f">Util::normalize_underscores</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>));
<a name="l00450"></a>00450     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> var_source_position = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l00451"></a>00451     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; exactly&lt;':'&gt; &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"expected ':' after "</span> + name + <span class="stringliteral">" in assignment statement"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00452"></a>00452     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* val;
<a name="l00453"></a>00453     <a class="code" href="../../de/d42/struct_selector___lookahead.html">Selector_Lookahead</a> <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#4eeaebe19dca339453f69c60aca396b5">lookahead</a> = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dd68592ddcce6032b60330ccc320710c">lookahead_for_value</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>);
<a name="l00454"></a>00454     <span class="keywordflow">if</span> (lookahead.<a class="code" href="../../de/d42/struct_selector___lookahead.html#4ee9331295a04ad1ff50e8af58f30648">has_interpolants</a> &amp;&amp; lookahead.<a class="code" href="../../de/d42/struct_selector___lookahead.html#d9cbff2850c6b423399b8e2dba1b564e">found</a>) {
<a name="l00455"></a>00455       val = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#8312bef879b5de894a835255a17c2b60">parse_value_schema</a>(lookahead.<a class="code" href="../../de/d42/struct_selector___lookahead.html#d9cbff2850c6b423399b8e2dba1b564e">found</a>);
<a name="l00456"></a>00456     } <span class="keywordflow">else</span> {
<a name="l00457"></a>00457       val = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>();
<a name="l00458"></a>00458     }
<a name="l00459"></a>00459     val-&gt;is_delayed(<span class="keyword">false</span>);
<a name="l00460"></a>00460     <span class="keywordtype">bool</span> is_default = <span class="keyword">false</span>;
<a name="l00461"></a>00461     <span class="keywordtype">bool</span> is_global = <span class="keyword">false</span>;
<a name="l00462"></a>00462     <span class="keywordflow">while</span> (peek&lt; default_flag &gt;() || peek&lt; global_flag &gt;()) {
<a name="l00463"></a>00463       is_default = lex&lt; default_flag &gt;() || is_default;
<a name="l00464"></a>00464       is_global = lex&lt; global_flag &gt;() || is_global;
<a name="l00465"></a>00465     }
<a name="l00466"></a>00466     <a class="code" href="../../d0/d35/class_sass_1_1_assignment.html">Assignment</a>* var = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d35/class_sass_1_1_assignment.html">Assignment</a>(var_source_position, name, val, is_default, is_global);
<a name="l00467"></a>00467     <span class="keywordflow">return</span> var;
<a name="l00468"></a>00468   }
<a name="l00469"></a>00469 
<a name="l00470"></a>00470   <span class="comment">/* not used anymore - remove?</span>
<a name="l00471"></a>00471 <span class="comment">  Propset* Parser::parse_propset()</span>
<a name="l00472"></a>00472 <span class="comment">  {</span>
<a name="l00473"></a>00473 <span class="comment">    String* property_segment;</span>
<a name="l00474"></a>00474 <span class="comment">    if (peek&lt; sequence&lt; optional&lt; exactly&lt;'*'&gt; &gt;, identifier_schema &gt; &gt;()) {</span>
<a name="l00475"></a>00475 <span class="comment">      property_segment = parse_identifier_schema();</span>
<a name="l00476"></a>00476 <span class="comment">    }</span>
<a name="l00477"></a>00477 <span class="comment">    else {</span>
<a name="l00478"></a>00478 <span class="comment">      lex&lt; sequence&lt; optional&lt; exactly&lt;'*'&gt; &gt;, identifier &gt; &gt;();</span>
<a name="l00479"></a>00479 <span class="comment">      property_segment = new (ctx.mem) String_Quoted(pstate, lexed);</span>
<a name="l00480"></a>00480 <span class="comment">    }</span>
<a name="l00481"></a>00481 <span class="comment">    Propset* propset = new (ctx.mem) Propset(pstate, property_segment);</span>
<a name="l00482"></a>00482 <span class="comment">    lex&lt; exactly&lt;':'&gt; &gt;();</span>
<a name="l00483"></a>00483 <span class="comment"></span>
<a name="l00484"></a>00484 <span class="comment">    if (!peek&lt; exactly&lt;'{'&gt; &gt;()) error("expected a '{' after namespaced property", pstate);</span>
<a name="l00485"></a>00485 <span class="comment"></span>
<a name="l00486"></a>00486 <span class="comment">    propset-&gt;block(parse_block());</span>
<a name="l00487"></a>00487 <span class="comment"></span>
<a name="l00488"></a>00488 <span class="comment">    propset-&gt;tabs(indentation);</span>
<a name="l00489"></a>00489 <span class="comment"></span>
<a name="l00490"></a>00490 <span class="comment">    return propset;</span>
<a name="l00491"></a>00491 <span class="comment">  } */</span>
<a name="l00492"></a>00492 
<a name="l00493"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#318ff1f7e78823a56e9bb64f409321ce">00493</a>   <a class="code" href="../../d3/d35/class_sass_1_1_ruleset.html">Ruleset</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#318ff1f7e78823a56e9bb64f409321ce">Parser::parse_ruleset</a>(<a class="code" href="../../de/d42/struct_selector___lookahead.html">Selector_Lookahead</a> <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#4eeaebe19dca339453f69c60aca396b5">lookahead</a>)
<a name="l00494"></a>00494   {
<a name="l00495"></a>00495     <a class="code" href="../../df/d05/class_sass_1_1_selector.html">Selector</a>* sel;
<a name="l00496"></a>00496     <span class="keywordflow">if</span> (lookahead.<a class="code" href="../../de/d42/struct_selector___lookahead.html#4ee9331295a04ad1ff50e8af58f30648">has_interpolants</a>) {
<a name="l00497"></a>00497       sel = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#da95029f8fe693f13d49f9b1465daf50">parse_selector_schema</a>(lookahead.<a class="code" href="../../de/d42/struct_selector___lookahead.html#d9cbff2850c6b423399b8e2dba1b564e">found</a>);
<a name="l00498"></a>00498     }
<a name="l00499"></a>00499     <span class="keywordflow">else</span> {
<a name="l00500"></a>00500       sel = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#780542b782a7ad33fed8792314100ba8">parse_selector_group</a>();
<a name="l00501"></a>00501     }
<a name="l00502"></a>00502     <span class="keywordtype">bool</span> old_in_at_root = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#a33c6a9bfe6c0671c3a6c6ab77aee0ea">in_at_root</a>;
<a name="l00503"></a>00503     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> r_source_position = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l00504"></a>00504     lex &lt; css_comments &gt;();
<a name="l00505"></a>00505     <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#a33c6a9bfe6c0671c3a6c6ab77aee0ea">in_at_root</a> = <span class="keyword">false</span>;
<a name="l00506"></a>00506     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt; &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"expected a '{' after the selector"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00507"></a>00507     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* block = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#95ac245b6f5628b59c54b9e66475e6eb">parse_block</a>();
<a name="l00508"></a>00508     in_at_root = old_in_at_root;
<a name="l00509"></a>00509     old_in_at_root = <span class="keyword">false</span>;
<a name="l00510"></a>00510     <a class="code" href="../../d3/d35/class_sass_1_1_ruleset.html">Ruleset</a>* ruleset = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d3/d35/class_sass_1_1_ruleset.html">Ruleset</a>(r_source_position, sel, block);
<a name="l00511"></a>00511     <span class="keywordflow">return</span> ruleset;
<a name="l00512"></a>00512   }
<a name="l00513"></a>00513 
<a name="l00514"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#da95029f8fe693f13d49f9b1465daf50">00514</a>   <a class="code" href="../../d1/daa/class_sass_1_1_selector___schema.html">Selector_Schema</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#da95029f8fe693f13d49f9b1465daf50">Parser::parse_selector_schema</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* end_of_selector)
<a name="l00515"></a>00515   {
<a name="l00516"></a>00516     lex&lt; optional_spaces &gt;();
<a name="l00517"></a>00517     <span class="keyword">const</span> <span class="keywordtype">char</span>* i = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>;
<a name="l00518"></a>00518     <a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>* schema = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00519"></a>00519     <span class="keywordflow">while</span> (i &lt; end_of_selector) {
<a name="l00520"></a>00520       <span class="comment">// try to parse mutliple interpolants</span>
<a name="l00521"></a>00521       <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a> = <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#39acc9258f18cea858d7247ad9d40020">find_first_in_interval</a>&lt; exactly&lt;hash_lbrace&gt; &gt;(i, end_of_selector)) {
<a name="l00522"></a>00522         <span class="comment">// accumulate the preceding segment if the position has advanced</span>
<a name="l00523"></a>00523         <span class="keywordflow">if</span> (i &lt; <a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a>) (*schema) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <span class="keywordtype">string</span>(i, <a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a>));
<a name="l00524"></a>00524         <span class="comment">// skip to the delimiter by skipping occurences in quoted strings</span>
<a name="l00525"></a>00525         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a> &lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a> &lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#47bb9988867b219f66ac05db2b90930d">optional_spaces</a>, exactly&lt;rbrace&gt; &gt; &gt;(<a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a>+2)) { <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a> = <a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a>+2;
<a name="l00526"></a>00526           <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1feaa8c1fed5779d5f15c46d66edb9a6">css_error</a>(<span class="stringliteral">"Invalid CSS"</span>, <span class="stringliteral">" after "</span>, <span class="stringliteral">": expected expression (e.g. 1px, bold), was "</span>);
<a name="l00527"></a>00527         }
<a name="l00528"></a>00528         <span class="keyword">const</span> <span class="keywordtype">char</span>* j = skip_over_scopes&lt; exactly&lt;hash_lbrace&gt;, exactly&lt;rbrace&gt; &gt;(<a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a> + 2, end_of_selector);
<a name="l00529"></a>00529         <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#b9eaf8a35d3abfd5fcc9a880bfa88c28">interpolant</a> = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#375ab5c5d150c8da2aeef76f3459e0e6">Parser::from_c_str</a>(p+2, j, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>).<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>();
<a name="l00530"></a>00530         interpolant-&gt;is_interpolant(<span class="keyword">true</span>);
<a name="l00531"></a>00531         (*schema) &lt;&lt; interpolant;
<a name="l00532"></a>00532         i = j;
<a name="l00533"></a>00533       }
<a name="l00534"></a>00534       <span class="comment">// no more interpolants have been found</span>
<a name="l00535"></a>00535       <span class="comment">// add the last segment if there is one</span>
<a name="l00536"></a>00536       <span class="keywordflow">else</span> {
<a name="l00537"></a>00537         <span class="keywordflow">if</span> (i &lt; end_of_selector) (*schema) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <span class="keywordtype">string</span>(i, end_of_selector));
<a name="l00538"></a>00538         <span class="keywordflow">break</span>;
<a name="l00539"></a>00539       }
<a name="l00540"></a>00540     }
<a name="l00541"></a>00541     <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a> = end_of_selector;
<a name="l00542"></a>00542     <a class="code" href="../../d1/daa/class_sass_1_1_selector___schema.html">Selector_Schema</a>* selector_schema = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d1/daa/class_sass_1_1_selector___schema.html">Selector_Schema</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, schema);
<a name="l00543"></a>00543     selector_schema-&gt;media_block(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#4163fdd782b03cff85462e00a98183e1">last_media_block</a>);
<a name="l00544"></a>00544     selector_schema-&gt;last_block(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#66647cd4b98ad1c8f31690eca60681a2">block_stack</a>.back());
<a name="l00545"></a>00545     <span class="keywordflow">return</span> selector_schema;
<a name="l00546"></a>00546   }
<a name="l00547"></a>00547 
<a name="l00548"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#780542b782a7ad33fed8792314100ba8">00548</a>   <a class="code" href="../../df/dea/class_sass_1_1_selector___list.html">Selector_List</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#780542b782a7ad33fed8792314100ba8">Parser::parse_selector_group</a>()
<a name="l00549"></a>00549   {
<a name="l00550"></a>00550     <span class="keywordtype">bool</span> reloop = <span class="keyword">true</span>;
<a name="l00551"></a>00551     <a class="code" href="../../de/d6e/class_sass_1_1_to___string.html">To_String</a> <a class="code" href="../../da/d80/namespace_sass.html#c098cb6b59a09dd2673ba0f3c23d8253">to_string</a>(&amp;<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>);
<a name="l00552"></a>00552     lex&lt; css_whitespace &gt;();
<a name="l00553"></a>00553     <a class="code" href="../../df/dea/class_sass_1_1_selector___list.html">Selector_List</a>* group = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../df/dea/class_sass_1_1_selector___list.html">Selector_List</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l00554"></a>00554     group-&gt;media_block(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#4163fdd782b03cff85462e00a98183e1">last_media_block</a>);
<a name="l00555"></a>00555     group-&gt;last_block(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#66647cd4b98ad1c8f31690eca60681a2">block_stack</a>.back());
<a name="l00556"></a>00556     <span class="keywordflow">do</span> {
<a name="l00557"></a>00557       reloop = <span class="keyword">false</span>;
<a name="l00558"></a>00558       <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#1a0b0d01fb18f20c6947d999d10d6d3b">alternatives</a> &lt;
<a name="l00559"></a>00559             <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt;,
<a name="l00560"></a>00560             <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'}'</span>&gt;,
<a name="l00561"></a>00561             <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt;,
<a name="l00562"></a>00562             exactly&lt;';'&gt;
<a name="l00563"></a>00563           &gt; &gt;())
<a name="l00564"></a>00564         <span class="keywordflow">break</span>; <span class="comment">// in case there are superfluous commas at the end</span>
<a name="l00565"></a>00565       <a class="code" href="../../df/d86/class_sass_1_1_complex___selector.html">Complex_Selector</a>* comb = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#6c3accf19513c68e887011896c3a272a">parse_selector_combination</a>();
<a name="l00566"></a>00566       <span class="keywordflow">if</span> (!comb-&gt;has_reference() &amp;&amp; !<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#a33c6a9bfe6c0671c3a6c6ab77aee0ea">in_at_root</a>) {
<a name="l00567"></a>00567         <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> sel_source_position = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l00568"></a>00568         <a class="code" href="../../d4/d5b/class_sass_1_1_selector___reference.html">Selector_Reference</a>* ref = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d4/d5b/class_sass_1_1_selector___reference.html">Selector_Reference</a>(sel_source_position);
<a name="l00569"></a>00569         <a class="code" href="../../d4/d67/class_sass_1_1_compound___selector.html">Compound_Selector</a>* ref_wrap = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d4/d67/class_sass_1_1_compound___selector.html">Compound_Selector</a>(sel_source_position);
<a name="l00570"></a>00570         ref_wrap-&gt;media_block(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#4163fdd782b03cff85462e00a98183e1">last_media_block</a>);
<a name="l00571"></a>00571         ref_wrap-&gt;last_block(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#66647cd4b98ad1c8f31690eca60681a2">block_stack</a>.back());
<a name="l00572"></a>00572         (*ref_wrap) &lt;&lt; ref;
<a name="l00573"></a>00573         <span class="keywordflow">if</span> (!comb-&gt;head()) {
<a name="l00574"></a>00574           comb-&gt;head(ref_wrap);
<a name="l00575"></a>00575           comb-&gt;has_reference(<span class="keyword">true</span>);
<a name="l00576"></a>00576         }
<a name="l00577"></a>00577         <span class="keywordflow">else</span> {
<a name="l00578"></a>00578           comb = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../df/d86/class_sass_1_1_complex___selector.html">Complex_Selector</a>(sel_source_position, <a class="code" href="../../df/d86/class_sass_1_1_complex___selector.html#9b0ab6e8365e60dfb9da396a8b9170a6f89cd4b62ef882e8be79b40bfd6e2366">Complex_Selector::ANCESTOR_OF</a>, ref_wrap, comb);
<a name="l00579"></a>00579           comb-&gt;media_block(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#4163fdd782b03cff85462e00a98183e1">last_media_block</a>);
<a name="l00580"></a>00580           comb-&gt;last_block(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#66647cd4b98ad1c8f31690eca60681a2">block_stack</a>.back());
<a name="l00581"></a>00581           comb-&gt;has_reference(<span class="keyword">true</span>);
<a name="l00582"></a>00582         }
<a name="l00583"></a>00583         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#acdcbd0471bafedcfe201a2e1f22d1cb">peek_newline</a>()) ref_wrap-&gt;has_line_break(<span class="keyword">true</span>);
<a name="l00584"></a>00584       }
<a name="l00585"></a>00585       <span class="keywordflow">while</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1aecdde181125d84af61c9e4a95b9b63">peek_css</a>&lt; exactly&lt;','&gt; &gt;())
<a name="l00586"></a>00586       {
<a name="l00587"></a>00587         <span class="comment">// consume everything up and including the comma speparator</span>
<a name="l00588"></a>00588         reloop = lex&lt; sequence &lt; optional_css_comments, exactly&lt;','&gt; &gt; &gt;() != 0;
<a name="l00589"></a>00589         <span class="comment">// remember line break (also between some commas)</span>
<a name="l00590"></a>00590         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#acdcbd0471bafedcfe201a2e1f22d1cb">peek_newline</a>()) comb-&gt;has_line_feed(<span class="keyword">true</span>);
<a name="l00591"></a>00591         <span class="keywordflow">if</span> (comb-&gt;tail() &amp;&amp; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#acdcbd0471bafedcfe201a2e1f22d1cb">peek_newline</a>()) comb-&gt;tail()-&gt;has_line_feed(<span class="keyword">true</span>);
<a name="l00592"></a>00592         <span class="keywordflow">if</span> (comb-&gt;tail() &amp;&amp; comb-&gt;tail()-&gt;head() &amp;&amp; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#acdcbd0471bafedcfe201a2e1f22d1cb">peek_newline</a>()) comb-&gt;tail()-&gt;head()-&gt;has_line_feed(<span class="keyword">true</span>);
<a name="l00593"></a>00593         <span class="comment">// remember line break (also between some commas)</span>
<a name="l00594"></a>00594       }
<a name="l00595"></a>00595       (*group) &lt;&lt; comb;
<a name="l00596"></a>00596     }
<a name="l00597"></a>00597     <span class="keywordflow">while</span> (reloop);
<a name="l00598"></a>00598     <span class="keywordflow">while</span> (lex&lt; optional &gt;()) {
<a name="l00599"></a>00599       group-&gt;is_optional(<span class="keyword">true</span>);
<a name="l00600"></a>00600     }
<a name="l00601"></a>00601     <span class="keywordflow">return</span> group;
<a name="l00602"></a>00602   }
<a name="l00603"></a>00603 
<a name="l00604"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#6c3accf19513c68e887011896c3a272a">00604</a>   <a class="code" href="../../df/d86/class_sass_1_1_complex___selector.html">Complex_Selector</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#6c3accf19513c68e887011896c3a272a">Parser::parse_selector_combination</a>()
<a name="l00605"></a>00605   {
<a name="l00606"></a>00606     <a class="code" href="../../dd/d82/class_sass_1_1_position.html">Position</a> sel_source_position(-1);
<a name="l00607"></a>00607     <a class="code" href="../../d4/d67/class_sass_1_1_compound___selector.html">Compound_Selector</a>* lhs;
<a name="l00608"></a>00608     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1aecdde181125d84af61c9e4a95b9b63">peek_css</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#1a0b0d01fb18f20c6947d999d10d6d3b">alternatives</a> &lt;
<a name="l00609"></a>00609           exactly&lt;'+'&gt;,
<a name="l00610"></a>00610           exactly&lt;'~'&gt;,
<a name="l00611"></a>00611           exactly&lt;'&gt;<span class="stringliteral">'&gt;</span>
<a name="l00612"></a>00612 <span class="stringliteral">        &gt; &gt;())</span>
<a name="l00613"></a>00613 <span class="stringliteral">    // no selector before the combinator</span>
<a name="l00614"></a>00614 <span class="stringliteral">    { lhs = 0; }</span>
<a name="l00615"></a>00615 <span class="stringliteral">    else {</span>
<a name="l00616"></a>00616 <span class="stringliteral">      lhs = parse_simple_selector_sequence();</span>
<a name="l00617"></a>00617 <span class="stringliteral">      sel_source_position = before_token;</span>
<a name="l00618"></a>00618 <span class="stringliteral">      lhs-&gt;has_line_break(peek_newline());</span>
<a name="l00619"></a>00619 <span class="stringliteral">    }</span>
<a name="l00620"></a>00620 <span class="stringliteral"></span>
<a name="l00621"></a>00621 <span class="stringliteral">    Complex_Selector::Combinator cmb;</span>
<a name="l00622"></a>00622 <span class="stringliteral">    if      (lex&lt; exactly&lt;'</span>+<span class="stringliteral">'&gt; &gt;()) cmb = Complex_Selector::ADJACENT_TO;</span>
<a name="l00623"></a>00623 <span class="stringliteral">    else if (lex&lt; exactly&lt;'</span>~<span class="stringliteral">'&gt; &gt;()) cmb = Complex_Selector::PRECEDES;</span>
<a name="l00624"></a>00624 <span class="stringliteral">    else if (lex&lt; exactly&lt;'</span>&gt;<span class="stringliteral">'&gt; &gt;()) cmb = Complex_Selector::PARENT_OF;</span>
<a name="l00625"></a>00625 <span class="stringliteral">    else                            cmb = Complex_Selector::ANCESTOR_OF;</span>
<a name="l00626"></a>00626 <span class="stringliteral">    bool cpx_lf = peek_newline();</span>
<a name="l00627"></a>00627 <span class="stringliteral"></span>
<a name="l00628"></a>00628 <span class="stringliteral">    Complex_Selector* rhs;</span>
<a name="l00629"></a>00629 <span class="stringliteral">    if (peek_css&lt; alternatives &lt;</span>
<a name="l00630"></a>00630 <span class="stringliteral">                exactly&lt;'</span>,<span class="stringliteral">'&gt;,</span>
<a name="l00631"></a>00631 <span class="stringliteral">                exactly&lt;'</span>)<span class="stringliteral">'&gt;,</span>
<a name="l00632"></a>00632 <span class="stringliteral">                exactly&lt;'</span>{<span class="stringliteral">'&gt;,</span>
<a name="l00633"></a>00633 <span class="stringliteral">                exactly&lt;'</span>}<span class="stringliteral">'&gt;,</span>
<a name="l00634"></a>00634 <span class="stringliteral">                exactly&lt;'</span>;<span class="stringliteral">'&gt;,</span>
<a name="l00635"></a>00635 <span class="stringliteral">                optional</span>
<a name="l00636"></a>00636 <span class="stringliteral">        &gt; &gt;())</span>
<a name="l00637"></a>00637 <span class="stringliteral">    // no selector after the combinator</span>
<a name="l00638"></a>00638 <span class="stringliteral">    { rhs = 0; }</span>
<a name="l00639"></a>00639 <span class="stringliteral">    else {</span>
<a name="l00640"></a>00640 <span class="stringliteral">      rhs = parse_selector_combination();</span>
<a name="l00641"></a>00641 <span class="stringliteral">      sel_source_position = before_token;</span>
<a name="l00642"></a>00642 <span class="stringliteral">    }</span>
<a name="l00643"></a>00643 <span class="stringliteral">    if (!sel_source_position.line) sel_source_position = before_token;</span>
<a name="l00644"></a>00644 <span class="stringliteral">    Complex_Selector* cpx = new (ctx.mem) Complex_Selector(ParserState(path, source, sel_source_position), cmb, lhs, rhs);</span>
<a name="l00645"></a>00645 <span class="stringliteral">    cpx-&gt;media_block(last_media_block);</span>
<a name="l00646"></a>00646 <span class="stringliteral">    cpx-&gt;last_block(block_stack.back());</span>
<a name="l00647"></a>00647 <span class="stringliteral">    if (cpx_lf) cpx-&gt;has_line_break(cpx_lf);</span>
<a name="l00648"></a>00648 <span class="stringliteral">    return cpx;</span>
<a name="l00649"></a>00649 <span class="stringliteral">  }</span>
<a name="l00650"></a>00650 <span class="stringliteral"></span>
<a name="l00651"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#488c710d278e4a5ebd9bff63e1be184e">00651</a> <span class="stringliteral">  Compound_Selector* Parser::parse_simple_selector_sequence()</span>
<a name="l00652"></a>00652 <span class="stringliteral">  {</span>
<a name="l00653"></a>00653 <span class="stringliteral">    Compound_Selector* seq = new (ctx.mem) Compound_Selector(pstate);</span>
<a name="l00654"></a>00654 <span class="stringliteral">    seq-&gt;media_block(last_media_block);</span>
<a name="l00655"></a>00655 <span class="stringliteral">    seq-&gt;last_block(block_stack.back());</span>
<a name="l00656"></a>00656 <span class="stringliteral">    bool sawsomething = false;</span>
<a name="l00657"></a>00657 <span class="stringliteral">    if (lex_css&lt; exactly&lt;'</span>&amp;<span class="stringliteral">'&gt; &gt;()) {</span>
<a name="l00658"></a>00658 <span class="stringliteral">      // check if we have a parent selector on the root level block</span>
<a name="l00659"></a>00659 <span class="stringliteral">      if (block_stack.back() &amp;&amp; block_stack.back()-&gt;is_root()) {</span>
<a name="l00660"></a>00660 <span class="stringliteral">        //error("Base-level rules cannot contain the parent-selector-referencing character '</span>&amp;<span class="stringliteral">'.", pstate);</span>
<a name="l00661"></a>00661 <span class="stringliteral">      }</span>
<a name="l00662"></a>00662 <span class="stringliteral">      (*seq) &lt;&lt; new (ctx.mem) Selector_Reference(pstate);</span>
<a name="l00663"></a>00663 <span class="stringliteral">      sawsomething = true;</span>
<a name="l00664"></a>00664 <span class="stringliteral">      // if you see a space after a &amp;, then you'</span>re done
<a name="l00665"></a>00665       <span class="keywordflow">if</span>(peek&lt; spaces &gt;() || <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#1a0b0d01fb18f20c6947d999d10d6d3b">alternatives</a> &lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#a2927bc67257b4754d2ff52ceb44433c">spaces</a>, exactly&lt;';'&gt; &gt; &gt;()) {
<a name="l00666"></a>00666         <span class="keywordflow">return</span> seq;
<a name="l00667"></a>00667       }
<a name="l00668"></a>00668     }
<a name="l00669"></a>00669     <span class="keywordflow">if</span> (sawsomething &amp;&amp; lex_css&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a>&lt; negate&lt; functional &gt;, alternatives&lt; identifier_alnums, universal, quoted_string, dimension, percentage, number &gt; &gt; &gt;()) {
<a name="l00670"></a>00670       <span class="comment">// saw an ampersand, then allow type selectors with arbitrary number of hyphens at the beginning</span>
<a name="l00671"></a>00671       (*seq) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../da/d80/namespace_sass.html#ec24354016cba787162086d169717dcf">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) Type_Selector(<a class="code" href="../../da/d80/namespace_sass.html#f837bfe668042350a77210b779f113c6">pstate</a>, <a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(lexed));
<a name="l00672"></a>00672     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex_css&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a>&lt; negate&lt; functional &gt;, alternatives&lt; type_selector, universal, quoted_string, dimension, percentage, number &gt; &gt; &gt;()) {
<a name="l00673"></a>00673       <span class="comment">// if you see a type selector</span>
<a name="l00674"></a>00674       (*seq) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../da/d80/namespace_sass.html#ec24354016cba787162086d169717dcf">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) Type_Selector(<a class="code" href="../../da/d80/namespace_sass.html#f837bfe668042350a77210b779f113c6">pstate</a>, lexed);
<a name="l00675"></a>00675       sawsomething = <span class="keyword">true</span>;
<a name="l00676"></a>00676     }
<a name="l00677"></a>00677     <span class="keywordflow">if</span> (!sawsomething) {
<a name="l00678"></a>00678       <span class="comment">// don't blindly do this if you saw a &amp; or selector</span>
<a name="l00679"></a>00679       (*seq) &lt;&lt; parse_simple_selector();
<a name="l00680"></a>00680     }
<a name="l00681"></a>00681 
<a name="l00682"></a>00682     <span class="keywordflow">while</span> (!peek&lt; spaces &gt;(position) &amp;&amp;
<a name="l00683"></a>00683            !(peek_css &lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#1a0b0d01fb18f20c6947d999d10d6d3b">alternatives</a> &lt;
<a name="l00684"></a>00684                exactly&lt;'+'&gt;,
<a name="l00685"></a>00685                exactly&lt;'~'&gt;,
<a name="l00686"></a>00686                exactly&lt;'&gt;<span class="stringliteral">'&gt;,</span>
<a name="l00687"></a>00687 <span class="stringliteral">               exactly&lt;'</span>,<span class="stringliteral">'&gt;,</span>
<a name="l00688"></a>00688 <span class="stringliteral">               exactly&lt;'</span>)<span class="stringliteral">'&gt;,</span>
<a name="l00689"></a>00689 <span class="stringliteral">               exactly&lt;'</span>{<span class="stringliteral">'&gt;,</span>
<a name="l00690"></a>00690 <span class="stringliteral">               exactly&lt;'</span>}<span class="stringliteral">'&gt;,</span>
<a name="l00691"></a>00691 <span class="stringliteral">               exactly&lt;'</span>;<span class="stringliteral">'&gt;</span>
<a name="l00692"></a>00692 <span class="stringliteral">             &gt; &gt;(position))) {</span>
<a name="l00693"></a>00693 <span class="stringliteral">      (*seq) &lt;&lt; parse_simple_selector();</span>
<a name="l00694"></a>00694 <span class="stringliteral">    }</span>
<a name="l00695"></a>00695 <span class="stringliteral">    return seq;</span>
<a name="l00696"></a>00696 <span class="stringliteral">  }</span>
<a name="l00697"></a>00697 <span class="stringliteral"></span>
<a name="l00698"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#ec6cb3477df7dd5af90a02a6427fba01">00698</a> <span class="stringliteral">  Simple_Selector* Parser::parse_simple_selector()</span>
<a name="l00699"></a>00699 <span class="stringliteral">  {</span>
<a name="l00700"></a>00700 <span class="stringliteral">    lex &lt; css_comments &gt;();</span>
<a name="l00701"></a>00701 <span class="stringliteral">    if (lex&lt; alternatives &lt; id_name, class_name &gt; &gt;()) {</span>
<a name="l00702"></a>00702 <span class="stringliteral">      return new (ctx.mem) Selector_Qualifier(pstate, unquote(lexed));</span>
<a name="l00703"></a>00703 <span class="stringliteral">    }</span>
<a name="l00704"></a>00704 <span class="stringliteral">    else if (lex&lt; quoted_string &gt;()) {</span>
<a name="l00705"></a>00705 <span class="stringliteral">      return new (ctx.mem) Type_Selector(pstate, unquote(lexed));</span>
<a name="l00706"></a>00706 <span class="stringliteral">    }</span>
<a name="l00707"></a>00707 <span class="stringliteral">    else if (lex&lt; alternatives &lt; number, kwd_sel_deep &gt; &gt;()) {</span>
<a name="l00708"></a>00708 <span class="stringliteral">      return new (ctx.mem) Type_Selector(pstate, lexed);</span>
<a name="l00709"></a>00709 <span class="stringliteral">    }</span>
<a name="l00710"></a>00710 <span class="stringliteral">    else if (peek&lt; pseudo_not &gt;()) {</span>
<a name="l00711"></a>00711 <span class="stringliteral">      return parse_negated_selector();</span>
<a name="l00712"></a>00712 <span class="stringliteral">    }</span>
<a name="l00713"></a>00713 <span class="stringliteral">    else if (peek&lt; exactly&lt;'</span>:<span class="stringliteral">'&gt; &gt;(position) || peek&lt; functional &gt;()) {</span>
<a name="l00714"></a>00714 <span class="stringliteral">      return parse_pseudo_selector();</span>
<a name="l00715"></a>00715 <span class="stringliteral">    }</span>
<a name="l00716"></a>00716 <span class="stringliteral">    else if (peek&lt; exactly&lt;'</span>[<span class="stringliteral">'&gt; &gt;(position)) {</span>
<a name="l00717"></a>00717 <span class="stringliteral">      return parse_attribute_selector();</span>
<a name="l00718"></a>00718 <span class="stringliteral">    }</span>
<a name="l00719"></a>00719 <span class="stringliteral">    else if (lex&lt; placeholder &gt;()) {</span>
<a name="l00720"></a>00720 <span class="stringliteral">      Selector_Placeholder* sel = new (ctx.mem) Selector_Placeholder(pstate, unquote(lexed));</span>
<a name="l00721"></a>00721 <span class="stringliteral">      sel-&gt;media_block(last_media_block);</span>
<a name="l00722"></a>00722 <span class="stringliteral">      sel-&gt;last_block(block_stack.back());</span>
<a name="l00723"></a>00723 <span class="stringliteral">      return sel;</span>
<a name="l00724"></a>00724 <span class="stringliteral">    }</span>
<a name="l00725"></a>00725 <span class="stringliteral">    else {</span>
<a name="l00726"></a>00726 <span class="stringliteral">      error("invalid selector after " + lexed.to_string(), pstate);</span>
<a name="l00727"></a>00727 <span class="stringliteral">    }</span>
<a name="l00728"></a>00728 <span class="stringliteral">    // unreachable statement</span>
<a name="l00729"></a>00729 <span class="stringliteral">    return 0;</span>
<a name="l00730"></a>00730 <span class="stringliteral">  }</span>
<a name="l00731"></a>00731 <span class="stringliteral"></span>
<a name="l00732"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#facfaec751c6d4dbc386d8c44c320955">00732</a> <span class="stringliteral">  Wrapped_Selector* Parser::parse_negated_selector()</span>
<a name="l00733"></a>00733 <span class="stringliteral">  {</span>
<a name="l00734"></a>00734 <span class="stringliteral">    lex&lt; pseudo_not &gt;();</span>
<a name="l00735"></a>00735 <span class="stringliteral">    string name(lexed);</span>
<a name="l00736"></a>00736 <span class="stringliteral">    ParserState nsource_position = pstate;</span>
<a name="l00737"></a>00737 <span class="stringliteral">    Selector* negated = parse_selector_group();</span>
<a name="l00738"></a>00738 <span class="stringliteral">    if (!lex&lt; exactly&lt;'</span>)<span class="stringliteral">'&gt; &gt;()) {</span>
<a name="l00739"></a>00739 <span class="stringliteral">      error("negated selector is missing '</span>)<span class="stringliteral">'", pstate);</span>
<a name="l00740"></a>00740 <span class="stringliteral">    }</span>
<a name="l00741"></a>00741 <span class="stringliteral">    return new (ctx.mem) Wrapped_Selector(nsource_position, name, negated);</span>
<a name="l00742"></a>00742 <span class="stringliteral">  }</span>
<a name="l00743"></a>00743 <span class="stringliteral"></span>
<a name="l00744"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#d59a38bb9a6bdd67feab8dcec1603c10">00744</a> <span class="stringliteral">  Simple_Selector* Parser::parse_pseudo_selector() {</span>
<a name="l00745"></a>00745 <span class="stringliteral">    if (lex&lt; sequence&lt; pseudo_prefix, functional &gt; &gt;() || lex&lt; functional &gt;()) {</span>
<a name="l00746"></a>00746 <span class="stringliteral">      string name(lexed);</span>
<a name="l00747"></a>00747 <span class="stringliteral">      String* expr = 0;</span>
<a name="l00748"></a>00748 <span class="stringliteral">      ParserState p = pstate;</span>
<a name="l00749"></a>00749 <span class="stringliteral">      Selector* wrapped = 0;</span>
<a name="l00750"></a>00750 <span class="stringliteral">      if (lex&lt; alternatives&lt; even, odd &gt; &gt;()) {</span>
<a name="l00751"></a>00751 <span class="stringliteral">        expr = new (ctx.mem) String_Quoted(p, lexed);</span>
<a name="l00752"></a>00752 <span class="stringliteral">      }</span>
<a name="l00753"></a>00753 <span class="stringliteral">      else if (lex&lt; binomial &gt;(position)) {</span>
<a name="l00754"></a>00754 <span class="stringliteral">        expr = new (ctx.mem) String_Constant(p, lexed);</span>
<a name="l00755"></a>00755 <span class="stringliteral">        ((String_Constant*)expr)-&gt;can_compress_whitespace(true);</span>
<a name="l00756"></a>00756 <span class="stringliteral">      }</span>
<a name="l00757"></a>00757 <span class="stringliteral">      else if (peek&lt; sequence&lt; optional&lt;sign&gt;,</span>
<a name="l00758"></a>00758 <span class="stringliteral">                               zero_plus&lt;digit&gt;,</span>
<a name="l00759"></a>00759 <span class="stringliteral">                               exactly&lt;'</span>n<span class="stringliteral">'&gt;,</span>
<a name="l00760"></a>00760 <span class="stringliteral">                               optional_css_whitespace,</span>
<a name="l00761"></a>00761 <span class="stringliteral">                               exactly&lt;'</span>)<span class="stringliteral">'&gt; &gt; &gt;()) {</span>
<a name="l00762"></a>00762 <span class="stringliteral">        lex&lt; sequence&lt; optional&lt;sign&gt;,</span>
<a name="l00763"></a>00763 <span class="stringliteral">                       zero_plus&lt;digit&gt;,</span>
<a name="l00764"></a>00764 <span class="stringliteral">                       exactly&lt;'</span>n<span class="stringliteral">'&gt; &gt; &gt;();</span>
<a name="l00765"></a>00765 <span class="stringliteral">        expr = new (ctx.mem) String_Quoted(p, lexed);</span>
<a name="l00766"></a>00766 <span class="stringliteral">      }</span>
<a name="l00767"></a>00767 <span class="stringliteral">      else if (lex&lt; sequence&lt; optional&lt;sign&gt;, one_plus &lt; digit &gt; &gt; &gt;()) {</span>
<a name="l00768"></a>00768 <span class="stringliteral">        expr = new (ctx.mem) String_Quoted(p, lexed);</span>
<a name="l00769"></a>00769 <span class="stringliteral">      }</span>
<a name="l00770"></a>00770 <span class="stringliteral">      else if (peek&lt; sequence&lt; identifier, optional_css_whitespace, exactly&lt;'</span>)<span class="stringliteral">'&gt; &gt; &gt;()) {</span>
<a name="l00771"></a>00771 <span class="stringliteral">        lex&lt; identifier &gt;();</span>
<a name="l00772"></a>00772 <span class="stringliteral">        expr = new (ctx.mem) String_Quoted(p, lexed);</span>
<a name="l00773"></a>00773 <span class="stringliteral">      }</span>
<a name="l00774"></a>00774 <span class="stringliteral">      else if (lex&lt; quoted_string &gt;()) {</span>
<a name="l00775"></a>00775 <span class="stringliteral">        expr = new (ctx.mem) String_Quoted(p, lexed);</span>
<a name="l00776"></a>00776 <span class="stringliteral">      }</span>
<a name="l00777"></a>00777 <span class="stringliteral">      else if (peek&lt; exactly&lt;'</span>)<span class="stringliteral">'&gt; &gt;()) {</span>
<a name="l00778"></a>00778 <span class="stringliteral">        expr = new (ctx.mem) String_Constant(p, "");</span>
<a name="l00779"></a>00779 <span class="stringliteral">      }</span>
<a name="l00780"></a>00780 <span class="stringliteral">      else {</span>
<a name="l00781"></a>00781 <span class="stringliteral">        wrapped = parse_selector_group();</span>
<a name="l00782"></a>00782 <span class="stringliteral">      }</span>
<a name="l00783"></a>00783 <span class="stringliteral">      if (!lex&lt; exactly&lt;'</span>)<span class="stringliteral">'&gt; &gt;()) error("unterminated argument to " + name + "...)", pstate);</span>
<a name="l00784"></a>00784 <span class="stringliteral">      if (wrapped) {</span>
<a name="l00785"></a>00785 <span class="stringliteral">        return new (ctx.mem) Wrapped_Selector(p, name, wrapped);</span>
<a name="l00786"></a>00786 <span class="stringliteral">      }</span>
<a name="l00787"></a>00787 <span class="stringliteral">      return new (ctx.mem) Pseudo_Selector(p, name, expr);</span>
<a name="l00788"></a>00788 <span class="stringliteral">    }</span>
<a name="l00789"></a>00789 <span class="stringliteral">    else if (lex &lt; sequence&lt; pseudo_prefix, identifier &gt; &gt;()) {</span>
<a name="l00790"></a>00790 <span class="stringliteral">      return new (ctx.mem) Pseudo_Selector(pstate, unquote(lexed));</span>
<a name="l00791"></a>00791 <span class="stringliteral">    }</span>
<a name="l00792"></a>00792 <span class="stringliteral">    else {</span>
<a name="l00793"></a>00793 <span class="stringliteral">      error("unrecognized pseudo-class or pseudo-element", pstate);</span>
<a name="l00794"></a>00794 <span class="stringliteral">    }</span>
<a name="l00795"></a>00795 <span class="stringliteral">    // unreachable statement</span>
<a name="l00796"></a>00796 <span class="stringliteral">    return 0;</span>
<a name="l00797"></a>00797 <span class="stringliteral">  }</span>
<a name="l00798"></a>00798 <span class="stringliteral"></span>
<a name="l00799"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#bf730806d0d4b96d6bcdf4fb10039289">00799</a> <span class="stringliteral">  Attribute_Selector* Parser::parse_attribute_selector()</span>
<a name="l00800"></a>00800 <span class="stringliteral">  {</span>
<a name="l00801"></a>00801 <span class="stringliteral">    lex_css&lt; exactly&lt;'</span>[<span class="stringliteral">'&gt; &gt;();</span>
<a name="l00802"></a>00802 <span class="stringliteral">    ParserState p = pstate;</span>
<a name="l00803"></a>00803 <span class="stringliteral">    if (!lex_css&lt; attribute_name &gt;()) error("invalid attribute name in attribute selector", pstate);</span>
<a name="l00804"></a>00804 <span class="stringliteral">    string name(lexed);</span>
<a name="l00805"></a>00805 <span class="stringliteral">    if (lex_css&lt; exactly&lt;'</span>]<span class="stringliteral">'&gt; &gt;()) return new (ctx.mem) Attribute_Selector(p, name, "", 0);</span>
<a name="l00806"></a>00806 <span class="stringliteral">    if (!lex_css&lt; alternatives&lt; exact_match, class_match, dash_match,</span>
<a name="l00807"></a>00807 <span class="stringliteral">                                prefix_match, suffix_match, substring_match &gt; &gt;()) {</span>
<a name="l00808"></a>00808 <span class="stringliteral">      error("invalid operator in attribute selector for " + name, pstate);</span>
<a name="l00809"></a>00809 <span class="stringliteral">    }</span>
<a name="l00810"></a>00810 <span class="stringliteral">    string matcher(lexed);</span>
<a name="l00811"></a>00811 <span class="stringliteral"></span>
<a name="l00812"></a>00812 <span class="stringliteral">    String* value = 0;</span>
<a name="l00813"></a>00813 <span class="stringliteral">    if (lex_css&lt; identifier &gt;()) {</span>
<a name="l00814"></a>00814 <span class="stringliteral">      value = new (ctx.mem) String_Constant(p, lexed);</span>
<a name="l00815"></a>00815 <span class="stringliteral">    }</span>
<a name="l00816"></a>00816 <span class="stringliteral">    else if (lex_css&lt; quoted_string &gt;()) {</span>
<a name="l00817"></a>00817 <span class="stringliteral">      value = parse_interpolated_chunk(lexed, true); // needed!</span>
<a name="l00818"></a>00818 <span class="stringliteral">    }</span>
<a name="l00819"></a>00819 <span class="stringliteral">    else {</span>
<a name="l00820"></a>00820 <span class="stringliteral">      error("expected a string constant or identifier in attribute selector for " + name, pstate);</span>
<a name="l00821"></a>00821 <span class="stringliteral">    }</span>
<a name="l00822"></a>00822 <span class="stringliteral"></span>
<a name="l00823"></a>00823 <span class="stringliteral">    if (!lex_css&lt; exactly&lt;'</span>]<span class="stringliteral">'&gt; &gt;()) error("unterminated attribute selector for " + name, pstate);</span>
<a name="l00824"></a>00824 <span class="stringliteral">    return new (ctx.mem) Attribute_Selector(p, name, matcher, value);</span>
<a name="l00825"></a>00825 <span class="stringliteral">  }</span>
<a name="l00826"></a>00826 <span class="stringliteral"></span>
<a name="l00827"></a>00827 <span class="stringliteral">  /* parse block comment and add to block */</span>
<a name="l00828"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0c7a422ab2f377fdfa384a8135118bde">00828</a> <span class="stringliteral">  void Parser::parse_block_comments(Block* block)</span>
<a name="l00829"></a>00829 <span class="stringliteral">  {</span>
<a name="l00830"></a>00830 <span class="stringliteral">    while (lex&lt; block_comment &gt;()) {</span>
<a name="l00831"></a>00831 <span class="stringliteral">      bool is_important = lexed.begin[2] == '</span>!<span class="stringliteral">';</span>
<a name="l00832"></a>00832 <span class="stringliteral">      String*  contents = parse_interpolated_chunk(lexed);</span>
<a name="l00833"></a>00833 <span class="stringliteral">      (*block) &lt;&lt; new (ctx.mem) Comment(pstate, contents, is_important);</span>
<a name="l00834"></a>00834 <span class="stringliteral">    }</span>
<a name="l00835"></a>00835 <span class="stringliteral">  }</span>
<a name="l00836"></a>00836 <span class="stringliteral"></span>
<a name="l00837"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#95ac245b6f5628b59c54b9e66475e6eb">00837</a> <span class="stringliteral">  Block* Parser::parse_block()</span>
<a name="l00838"></a>00838 <span class="stringliteral">  {</span>
<a name="l00839"></a>00839 <span class="stringliteral">    lex&lt; exactly&lt;'</span>{<span class="stringliteral">'&gt; &gt;();</span>
<a name="l00840"></a>00840 <span class="stringliteral">    bool semicolon = false;</span>
<a name="l00841"></a>00841 <span class="stringliteral">    Selector_Lookahead lookahead_result;</span>
<a name="l00842"></a>00842 <span class="stringliteral">    Block* block = new (ctx.mem) Block(pstate);</span>
<a name="l00843"></a>00843 <span class="stringliteral">    block_stack.push_back(block);</span>
<a name="l00844"></a>00844 <span class="stringliteral">    lex&lt; zero_plus &lt; alternatives &lt; space, line_comment &gt; &gt; &gt;();</span>
<a name="l00845"></a>00845 <span class="stringliteral">    // JMA - ensure that a block containing only block_comments is parsed</span>
<a name="l00846"></a>00846 <span class="stringliteral">    parse_block_comments(block);</span>
<a name="l00847"></a>00847 <span class="stringliteral"></span>
<a name="l00848"></a>00848 <span class="stringliteral">    while (!lex&lt; exactly&lt;'</span>}<span class="stringliteral">'&gt; &gt;()) {</span>
<a name="l00849"></a>00849 <span class="stringliteral">      parse_block_comments(block);</span>
<a name="l00850"></a>00850 <span class="stringliteral">      if (semicolon) {</span>
<a name="l00851"></a>00851 <span class="stringliteral">        if (!lex&lt; one_plus&lt; exactly&lt;'</span>;<span class="stringliteral">'&gt; &gt; &gt;()) {</span>
<a name="l00852"></a>00852 <span class="stringliteral">          error("non-terminal statement or declaration must end with '</span>;<span class="stringliteral">'", pstate);</span>
<a name="l00853"></a>00853 <span class="stringliteral">        }</span>
<a name="l00854"></a>00854 <span class="stringliteral">        semicolon = false;</span>
<a name="l00855"></a>00855 <span class="stringliteral">        parse_block_comments(block);</span>
<a name="l00856"></a>00856 <span class="stringliteral">        if (lex&lt; sequence&lt; exactly&lt;'</span>}<span class="stringliteral">'&gt;, zero_plus&lt; exactly&lt;'</span>;<span class="stringliteral">'&gt; &gt; &gt; &gt;()) break;</span>
<a name="l00857"></a>00857 <span class="stringliteral">      }</span>
<a name="l00858"></a>00858 <span class="stringliteral">      else if (peek&lt; kwd_import &gt;(position)) {</span>
<a name="l00859"></a>00859 <span class="stringliteral">        if (stack.back() == mixin_def || stack.back() == function_def) {</span>
<a name="l00860"></a>00860 <span class="stringliteral">          lex&lt; kwd_import &gt;(); // to adjust the before_token number</span>
<a name="l00861"></a>00861 <span class="stringliteral">          error("@import directives are not allowed inside mixins and functions", pstate);</span>
<a name="l00862"></a>00862 <span class="stringliteral">        }</span>
<a name="l00863"></a>00863 <span class="stringliteral">        Import* imp = parse_import();</span>
<a name="l00864"></a>00864 <span class="stringliteral">        if (!imp-&gt;urls().empty()) (*block) &lt;&lt; imp;</span>
<a name="l00865"></a>00865 <span class="stringliteral">        if (!imp-&gt;files().empty()) {</span>
<a name="l00866"></a>00866 <span class="stringliteral">          for (size_t i = 0, S = imp-&gt;files().size(); i &lt; S; ++i) {</span>
<a name="l00867"></a>00867 <span class="stringliteral">            (*block) &lt;&lt; new (ctx.mem) Import_Stub(pstate, imp-&gt;files()[i]);</span>
<a name="l00868"></a>00868 <span class="stringliteral">          }</span>
<a name="l00869"></a>00869 <span class="stringliteral">        }</span>
<a name="l00870"></a>00870 <span class="stringliteral">        semicolon = true;</span>
<a name="l00871"></a>00871 <span class="stringliteral">      }</span>
<a name="l00872"></a>00872 <span class="stringliteral">      else if (lex&lt; variable &gt;()) {</span>
<a name="l00873"></a>00873 <span class="stringliteral">        (*block) &lt;&lt; parse_assignment();</span>
<a name="l00874"></a>00874 <span class="stringliteral">        semicolon = true;</span>
<a name="l00875"></a>00875 <span class="stringliteral">      }</span>
<a name="l00876"></a>00876 <span class="stringliteral">      else if (lex&lt; line_comment &gt;()) {</span>
<a name="l00877"></a>00877 <span class="stringliteral">        // throw line comments away</span>
<a name="l00878"></a>00878 <span class="stringliteral">      }</span>
<a name="l00879"></a>00879 <span class="stringliteral">      else if (peek&lt; kwd_if_directive &gt;()) {</span>
<a name="l00880"></a>00880 <span class="stringliteral">        (*block) &lt;&lt; parse_if_directive();</span>
<a name="l00881"></a>00881 <span class="stringliteral">      }</span>
<a name="l00882"></a>00882 <span class="stringliteral">      else if (peek&lt; kwd_for_directive &gt;()) {</span>
<a name="l00883"></a>00883 <span class="stringliteral">        (*block) &lt;&lt; parse_for_directive();</span>
<a name="l00884"></a>00884 <span class="stringliteral">      }</span>
<a name="l00885"></a>00885 <span class="stringliteral">      else if (peek&lt; kwd_each_directive &gt;()) {</span>
<a name="l00886"></a>00886 <span class="stringliteral">        (*block) &lt;&lt; parse_each_directive();</span>
<a name="l00887"></a>00887 <span class="stringliteral">      }</span>
<a name="l00888"></a>00888 <span class="stringliteral">      else if (peek &lt; kwd_while_directive &gt;()) {</span>
<a name="l00889"></a>00889 <span class="stringliteral">        (*block) &lt;&lt; parse_while_directive();</span>
<a name="l00890"></a>00890 <span class="stringliteral">      }</span>
<a name="l00891"></a>00891 <span class="stringliteral">      else if (lex &lt; kwd_return_directive &gt;()) {</span>
<a name="l00892"></a>00892 <span class="stringliteral">        (*block) &lt;&lt; new (ctx.mem) Return(pstate, parse_list());</span>
<a name="l00893"></a>00893 <span class="stringliteral">        semicolon = true;</span>
<a name="l00894"></a>00894 <span class="stringliteral">      }</span>
<a name="l00895"></a>00895 <span class="stringliteral">      else if (peek&lt; kwd_warn &gt;()) {</span>
<a name="l00896"></a>00896 <span class="stringliteral">        (*block) &lt;&lt; parse_warning();</span>
<a name="l00897"></a>00897 <span class="stringliteral">        semicolon = true;</span>
<a name="l00898"></a>00898 <span class="stringliteral">      }</span>
<a name="l00899"></a>00899 <span class="stringliteral">      else if (peek&lt; kwd_err &gt;()) {</span>
<a name="l00900"></a>00900 <span class="stringliteral">        (*block) &lt;&lt; parse_error();</span>
<a name="l00901"></a>00901 <span class="stringliteral">        semicolon = true;</span>
<a name="l00902"></a>00902 <span class="stringliteral">      }</span>
<a name="l00903"></a>00903 <span class="stringliteral">      else if (peek&lt; kwd_dbg &gt;()) {</span>
<a name="l00904"></a>00904 <span class="stringliteral">        (*block) &lt;&lt; parse_debug();</span>
<a name="l00905"></a>00905 <span class="stringliteral">        semicolon = true;</span>
<a name="l00906"></a>00906 <span class="stringliteral">      }</span>
<a name="l00907"></a>00907 <span class="stringliteral">      else if (stack.back() == function_def) {</span>
<a name="l00908"></a>00908 <span class="stringliteral">        error("only variable declarations and control directives are allowed inside functions", pstate);</span>
<a name="l00909"></a>00909 <span class="stringliteral">      }</span>
<a name="l00910"></a>00910 <span class="stringliteral">      else if (peek&lt; kwd_mixin &gt;() || peek&lt; kwd_function &gt;()) {</span>
<a name="l00911"></a>00911 <span class="stringliteral">        (*block) &lt;&lt; parse_definition();</span>
<a name="l00912"></a>00912 <span class="stringliteral">      }</span>
<a name="l00913"></a>00913 <span class="stringliteral">      else if (peek&lt; kwd_include &gt;(position)) {</span>
<a name="l00914"></a>00914 <span class="stringliteral">        Mixin_Call* the_call = parse_mixin_call();</span>
<a name="l00915"></a>00915 <span class="stringliteral">        (*block) &lt;&lt; the_call;</span>
<a name="l00916"></a>00916 <span class="stringliteral">        // don'</span>t need <a class="code" href="../../df/d56/tag__support_8inc_8php.html#9d7c0d2d52751a85971430e899f14c25">a</a> semicolon after <a class="code" href="../../df/d56/tag__support_8inc_8php.html#9d7c0d2d52751a85971430e899f14c25">a</a> content block
<a name="l00917"></a>00917         semicolon = (the_call-&gt;block()) ? <span class="keyword">false</span> : <span class="keyword">true</span>;
<a name="l00918"></a>00918       }
<a name="l00919"></a>00919       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex&lt; kwd_content &gt;()) {
<a name="l00920"></a>00920         <span class="keywordflow">if</span> (stack.back() != mixin_def) {
<a name="l00921"></a>00921           <a class="code" href="../../da/d80/namespace_sass.html#e39f793ce497d7ebfa8137f09e4fd9ab">error</a>(<span class="stringliteral">"@content may only be used within a mixin"</span>, <a class="code" href="../../da/d80/namespace_sass.html#f837bfe668042350a77210b779f113c6">pstate</a>);
<a name="l00922"></a>00922         }
<a name="l00923"></a>00923         (*block) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d5/d1a/test__selector__difference_8cpp.html#ec24354016cba787162086d169717dcf">ctx</a>.mem) Content(<a class="code" href="../../da/d80/namespace_sass.html#f837bfe668042350a77210b779f113c6">pstate</a>);
<a name="l00924"></a>00924         semicolon = <span class="keyword">true</span>;
<a name="l00925"></a>00925       }
<a name="l00926"></a>00926       <span class="comment">/*</span>
<a name="l00927"></a>00927 <span class="comment">      else if (peek&lt; exactly&lt;'+'&gt; &gt;()) {</span>
<a name="l00928"></a>00928 <span class="comment">        (*block) &lt;&lt; parse_mixin_call();</span>
<a name="l00929"></a>00929 <span class="comment">        semicolon = true;</span>
<a name="l00930"></a>00930 <span class="comment">      }</span>
<a name="l00931"></a>00931 <span class="comment">      */</span>
<a name="l00932"></a>00932       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex&lt; kwd_extend &gt;()) {
<a name="l00933"></a>00933         <a class="code" href="../../de/d42/struct_selector___lookahead.html">Selector_Lookahead</a> <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#4eeaebe19dca339453f69c60aca396b5">lookahead</a> = lookahead_for_extension_target(position);
<a name="l00934"></a>00934         <span class="keywordflow">if</span> (!lookahead.<a class="code" href="../../de/d42/struct_selector___lookahead.html#d9cbff2850c6b423399b8e2dba1b564e">found</a>) <a class="code" href="../../da/d80/namespace_sass.html#e39f793ce497d7ebfa8137f09e4fd9ab">error</a>(<span class="stringliteral">"invalid selector for @extend"</span>, <a class="code" href="../../da/d80/namespace_sass.html#f837bfe668042350a77210b779f113c6">pstate</a>);
<a name="l00935"></a>00935         Selector* target;
<a name="l00936"></a>00936         <span class="keywordflow">if</span> (lookahead.<a class="code" href="../../de/d42/struct_selector___lookahead.html#4ee9331295a04ad1ff50e8af58f30648">has_interpolants</a>) target = parse_selector_schema(lookahead.<a class="code" href="../../de/d42/struct_selector___lookahead.html#d9cbff2850c6b423399b8e2dba1b564e">found</a>);
<a name="l00937"></a>00937         <span class="keywordflow">else</span>                            target = parse_selector_group();
<a name="l00938"></a>00938         (*block) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d5/d1a/test__selector__difference_8cpp.html#ec24354016cba787162086d169717dcf">ctx</a>.mem) Extension(<a class="code" href="../../da/d80/namespace_sass.html#f837bfe668042350a77210b779f113c6">pstate</a>, target);
<a name="l00939"></a>00939         semicolon = <span class="keyword">true</span>;
<a name="l00940"></a>00940       }
<a name="l00941"></a>00941       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; kwd_media &gt;()) {
<a name="l00942"></a>00942         (*block) &lt;&lt; parse_media_block();
<a name="l00943"></a>00943       }
<a name="l00944"></a>00944       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; kwd_supports &gt;()) {
<a name="l00945"></a>00945         (*block) &lt;&lt; parse_feature_block();
<a name="l00946"></a>00946       }
<a name="l00947"></a>00947       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; kwd_at_root &gt;()) {
<a name="l00948"></a>00948         (*block) &lt;&lt; parse_at_root_block();
<a name="l00949"></a>00949       }
<a name="l00950"></a>00950       <span class="comment">// ignore the @charset directive for now</span>
<a name="l00951"></a>00951       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex&lt; exactly&lt; charset_kwd &gt; &gt;()) {
<a name="l00952"></a>00952         lex&lt; quoted_string &gt;();
<a name="l00953"></a>00953         lex&lt; one_plus&lt; exactly&lt;';'&gt; &gt; &gt;();
<a name="l00954"></a>00954       }
<a name="l00955"></a>00955       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; at_keyword &gt;()) {
<a name="l00956"></a>00956         At_Rule* at_rule = parse_at_rule();
<a name="l00957"></a>00957         (*block) &lt;&lt; at_rule;
<a name="l00958"></a>00958         <span class="keywordflow">if</span> (!at_rule-&gt;block()) semicolon = <span class="keyword">true</span>;
<a name="l00959"></a>00959       }
<a name="l00960"></a>00960       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((lookahead_result = lookahead_for_selector(position)).found) {
<a name="l00961"></a>00961         (*block) &lt;&lt; parse_ruleset(lookahead_result);
<a name="l00962"></a>00962       }<span class="comment">/* not used anymore - remove?</span>
<a name="l00963"></a>00963 <span class="comment">      else if (peek&lt; sequence&lt; optional&lt; exactly&lt;'*'&gt; &gt;, alternatives&lt; identifier_schema, identifier &gt;, optional_spaces, exactly&lt;':'&gt;, optional_spaces, exactly&lt;'{'&gt; &gt; &gt;(position)) {</span>
<a name="l00964"></a>00964 <span class="comment">        (*block) &lt;&lt; parse_propset();</span>
<a name="l00965"></a>00965 <span class="comment">      }*/</span>
<a name="l00966"></a>00966       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!peek&lt; exactly&lt;';'&gt; &gt;()) {
<a name="l00967"></a>00967         <span class="keywordtype">bool</span> indent = ! peek&lt; sequence&lt; optional&lt; exactly&lt;'*'&gt; &gt;, alternatives&lt; identifier_schema, identifier &gt;, <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#47bb9988867b219f66ac05db2b90930d">optional_spaces</a>, exactly&lt;':'&gt;, optional_spaces, <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt; &gt; &gt;(position);
<a name="l00968"></a>00968         <span class="comment">/* not used anymore - remove?</span>
<a name="l00969"></a>00969 <span class="comment">        if (peek&lt; sequence&lt; optional&lt; exactly&lt;'*'&gt; &gt;, identifier_schema, exactly&lt;':'&gt;, exactly&lt;'{'&gt; &gt; &gt;()) {</span>
<a name="l00970"></a>00970 <span class="comment">          (*block) &lt;&lt; parse_propset();</span>
<a name="l00971"></a>00971 <span class="comment">        }</span>
<a name="l00972"></a>00972 <span class="comment">        else if (peek&lt; sequence&lt; optional&lt; exactly&lt;'*'&gt; &gt;, identifier, exactly&lt;':'&gt;, exactly&lt;'{'&gt; &gt; &gt;()) {</span>
<a name="l00973"></a>00973 <span class="comment">          (*block) &lt;&lt; parse_propset();</span>
<a name="l00974"></a>00974 <span class="comment">        }</span>
<a name="l00975"></a>00975 <span class="comment">        else */</span> {
<a name="l00976"></a>00976           Declaration* decl = parse_declaration();
<a name="l00977"></a>00977           decl-&gt;tabs(indentation);
<a name="l00978"></a>00978           (*block) &lt;&lt; decl;
<a name="l00979"></a>00979           <span class="keywordflow">if</span> (peek&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt; &gt;()) {
<a name="l00980"></a>00980             <span class="comment">// parse a propset that rides on the declaration's property</span>
<a name="l00981"></a>00981             <span class="keywordflow">if</span> (indent) indentation++;
<a name="l00982"></a>00982             Propset* ps = <span class="keyword">new</span> (<a class="code" href="../../d5/d1a/test__selector__difference_8cpp.html#ec24354016cba787162086d169717dcf">ctx</a>.mem) Propset(<a class="code" href="../../da/d80/namespace_sass.html#f837bfe668042350a77210b779f113c6">pstate</a>, decl-&gt;property(), parse_block());
<a name="l00983"></a>00983             <span class="keywordflow">if</span> (indent) indentation--;
<a name="l00984"></a>00984             (*block) &lt;&lt; ps;
<a name="l00985"></a>00985           }
<a name="l00986"></a>00986           <span class="keywordflow">else</span> {
<a name="l00987"></a>00987             <span class="comment">// finish and let the semicolon get munched</span>
<a name="l00988"></a>00988             semicolon = <span class="keyword">true</span>;
<a name="l00989"></a>00989           }
<a name="l00990"></a>00990         }
<a name="l00991"></a>00991       }
<a name="l00992"></a>00992       <span class="keywordflow">else</span> lex&lt; one_plus&lt; exactly&lt;';'&gt; &gt; &gt;();
<a name="l00993"></a>00993       parse_block_comments(block);
<a name="l00994"></a>00994     }
<a name="l00995"></a>00995     block_stack.pop_back();
<a name="l00996"></a>00996     <span class="keywordflow">return</span> block;
<a name="l00997"></a>00997   }
<a name="l00998"></a>00998 
<a name="l00999"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#ac040287d615641c146dca1e92bf77a8">00999</a>   <a class="code" href="../../dd/d40/class_sass_1_1_declaration.html">Declaration</a>* Parser::parse_declaration() {
<a name="l01000"></a>01000     <a class="code" href="../../db/ddf/class_sass_1_1_string.html">String</a>* prop = 0;
<a name="l01001"></a>01001     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#e9359ecc6fbb28868909b733d856c23c">optional</a>&lt; exactly&lt;'*'&gt; &gt;, <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#5ae7a74ebd405eaae34468993618db89">identifier_schema</a> &gt; &gt;()) {
<a name="l01002"></a>01002       prop = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#931c1d0e00e23404a2bdba77b4a3395f">parse_identifier_schema</a>();
<a name="l01003"></a>01003     }
<a name="l01004"></a>01004     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#e9359ecc6fbb28868909b733d856c23c">optional</a>&lt; exactly&lt;'*'&gt; &gt;, <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#60d4f12112b66e0f350764c69c028dda">identifier</a> &gt; &gt;()) {
<a name="l01005"></a>01005       prop = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l01006"></a>01006       prop-&gt;is_delayed(<span class="keyword">true</span>);
<a name="l01007"></a>01007     }
<a name="l01008"></a>01008     <span class="keywordflow">else</span> {
<a name="l01009"></a>01009       <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"invalid property name"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01010"></a>01010     }
<a name="l01011"></a>01011     <span class="keyword">const</span> <span class="keywordtype">string</span> property(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l01012"></a>01012     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0c9d2460847d81a9d93fb1c221291803">lex_css</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#42b576ae1a6383410b74ecd166917b18">one_plus</a>&lt; exactly&lt;':'&gt; &gt; &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"property \""</span> + property + <span class="stringliteral">"\" must be followed by a ':'"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01013"></a>01013     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1aecdde181125d84af61c9e4a95b9b63">peek_css</a>&lt; exactly&lt;';'&gt; &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"style declaration must contain a value"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01014"></a>01014     <span class="keywordflow">if</span> (peek_css&lt; static_value &gt;()) {
<a name="l01015"></a>01015       <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../dd/d40/class_sass_1_1_declaration.html">Declaration</a>(prop-&gt;pstate(), prop, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#2042c10eced527882c10562342fa34f5">parse_static_value</a>()<span class="comment">/*, lex&lt;important&gt;()*/</span>);
<a name="l01016"></a>01016     }
<a name="l01017"></a>01017     <span class="keywordflow">else</span> {
<a name="l01018"></a>01018       <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* value;
<a name="l01019"></a>01019       <a class="code" href="../../de/d42/struct_selector___lookahead.html">Selector_Lookahead</a> lookahead = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dd68592ddcce6032b60330ccc320710c">lookahead_for_value</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>);
<a name="l01020"></a>01020       <span class="keywordflow">if</span> (lookahead.<a class="code" href="../../de/d42/struct_selector___lookahead.html#d9cbff2850c6b423399b8e2dba1b564e">found</a>) {
<a name="l01021"></a>01021         <span class="keywordflow">if</span> (lookahead.<a class="code" href="../../de/d42/struct_selector___lookahead.html#4ee9331295a04ad1ff50e8af58f30648">has_interpolants</a>) {
<a name="l01022"></a>01022           value = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#8312bef879b5de894a835255a17c2b60">parse_value_schema</a>(lookahead.<a class="code" href="../../de/d42/struct_selector___lookahead.html#d9cbff2850c6b423399b8e2dba1b564e">found</a>);
<a name="l01023"></a>01023         } <span class="keywordflow">else</span> {
<a name="l01024"></a>01024           value = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>();
<a name="l01025"></a>01025         }
<a name="l01026"></a>01026       }
<a name="l01027"></a>01027       <span class="keywordflow">else</span> {
<a name="l01028"></a>01028         value = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>();
<a name="l01029"></a>01029         <span class="keywordflow">if</span> (<a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* list = dynamic_cast&lt;List*&gt;(value)) {
<a name="l01030"></a>01030           <span class="keywordflow">if</span> (list-&gt;length() == 0 &amp;&amp; !<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a> &lt;<span class="charliteral">'{'</span>&gt; &gt;()) {
<a name="l01031"></a>01031             <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1feaa8c1fed5779d5f15c46d66edb9a6">css_error</a>(<span class="stringliteral">"Invalid CSS"</span>, <span class="stringliteral">" after "</span>, <span class="stringliteral">": expected expression (e.g. 1px, bold), was "</span>);
<a name="l01032"></a>01032           }
<a name="l01033"></a>01033         }
<a name="l01034"></a>01034       }
<a name="l01035"></a>01035 
<a name="l01036"></a>01036       <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../dd/d40/class_sass_1_1_declaration.html">Declaration</a>(prop-&gt;pstate(), prop, value<span class="comment">/*, lex&lt;important&gt;()*/</span>);
<a name="l01037"></a>01037     }
<a name="l01038"></a>01038   }
<a name="l01039"></a>01039 
<a name="l01040"></a>01040   <span class="comment">// parse +/- and return false if negative</span>
<a name="l01041"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#c50c8ede8f7eb385f078bcc58f80c1fe">01041</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#c50c8ede8f7eb385f078bcc58f80c1fe">Parser::parse_number_prefix</a>()
<a name="l01042"></a>01042   {
<a name="l01043"></a>01043     <span class="keywordtype">bool</span> positive = <span class="keyword">true</span>;
<a name="l01044"></a>01044     <span class="keywordflow">while</span>(<span class="keyword">true</span>) {
<a name="l01045"></a>01045       <span class="keywordflow">if</span> (lex &lt; block_comment &gt;()) <span class="keywordflow">continue</span>;
<a name="l01046"></a>01046       <span class="keywordflow">if</span> (lex &lt; number_prefix &gt;()) <span class="keywordflow">continue</span>;
<a name="l01047"></a>01047       <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a> &lt; exactly &lt; '-' &gt; &gt;()) {
<a name="l01048"></a>01048         positive = !positive;
<a name="l01049"></a>01049         <span class="keywordflow">continue</span>;
<a name="l01050"></a>01050       }
<a name="l01051"></a>01051       <span class="keywordflow">break</span>;
<a name="l01052"></a>01052     }
<a name="l01053"></a>01053     <span class="keywordflow">return</span> positive;
<a name="l01054"></a>01054   }
<a name="l01055"></a>01055 
<a name="l01056"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#c31417ed311e98485311e25c507d8446">01056</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#c31417ed311e98485311e25c507d8446">Parser::parse_map</a>()
<a name="l01057"></a>01057   {
<a name="l01058"></a>01058     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> opstate = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l01059"></a>01059     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* key = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>();
<a name="l01060"></a>01060     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>* str = dynamic_cast&lt;String_Quoted*&gt;(key)) {
<a name="l01061"></a>01061       <span class="keywordflow">if</span> (!str-&gt;quote_mark() &amp;&amp; !str-&gt;is_delayed()) {
<a name="l01062"></a>01062         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#1b8dde5f4f9ebe06b1d27895c1dd9dfe">names_to_colors</a>.count(str-&gt;value())) {
<a name="l01063"></a>01063           <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>* c = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>(*<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#1b8dde5f4f9ebe06b1d27895c1dd9dfe">names_to_colors</a>[str-&gt;value()]);
<a name="l01064"></a>01064           c-&gt;pstate(str-&gt;pstate());
<a name="l01065"></a>01065           c-&gt;disp(str-&gt;value());
<a name="l01066"></a>01066           key = c;
<a name="l01067"></a>01067         }
<a name="l01068"></a>01068       }
<a name="l01069"></a>01069     }
<a name="l01070"></a>01070 
<a name="l01071"></a>01071     <span class="comment">// it's not a map so return the lexed value as a list value</span>
<a name="l01072"></a>01072     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; exactly&lt;':'&gt; &gt;())
<a name="l01073"></a>01073     { <span class="keywordflow">return</span> key; }
<a name="l01074"></a>01074 
<a name="l01075"></a>01075     lex&lt; exactly&lt;':'&gt; &gt;();
<a name="l01076"></a>01076 
<a name="l01077"></a>01077     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* value = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#10dd998de961f4ef59cf03b71ed7926d">parse_space_list</a>();
<a name="l01078"></a>01078 
<a name="l01079"></a>01079     <a class="code" href="../../df/d35/class_sass_1_1_map.html">Map</a>* map = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../df/d35/class_sass_1_1_map.html">Map</a>(opstate, 1);
<a name="l01080"></a>01080     (*map) &lt;&lt; make_pair(key, value);
<a name="l01081"></a>01081 
<a name="l01082"></a>01082     <span class="keywordflow">while</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0c9d2460847d81a9d93fb1c221291803">lex_css</a>&lt; exactly&lt;','&gt; &gt;())
<a name="l01083"></a>01083     {
<a name="l01084"></a>01084       <span class="comment">// allow trailing commas - #495</span>
<a name="l01085"></a>01085       <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1aecdde181125d84af61c9e4a95b9b63">peek_css</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt; &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>))
<a name="l01086"></a>01086       { <span class="keywordflow">break</span>; }
<a name="l01087"></a>01087 
<a name="l01088"></a>01088       <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* key = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>();
<a name="l01089"></a>01089       <span class="keywordflow">if</span> (<a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>* str = dynamic_cast&lt;String_Quoted*&gt;(key)) {
<a name="l01090"></a>01090         <span class="keywordflow">if</span> (!str-&gt;quote_mark() &amp;&amp; !str-&gt;is_delayed()) {
<a name="l01091"></a>01091           <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#1b8dde5f4f9ebe06b1d27895c1dd9dfe">names_to_colors</a>.count(str-&gt;value())) {
<a name="l01092"></a>01092             <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>* c = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>(*<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#1b8dde5f4f9ebe06b1d27895c1dd9dfe">names_to_colors</a>[str-&gt;value()]);
<a name="l01093"></a>01093             c-&gt;pstate(str-&gt;pstate());
<a name="l01094"></a>01094             c-&gt;disp(str-&gt;value());
<a name="l01095"></a>01095             key = c;
<a name="l01096"></a>01096           }
<a name="l01097"></a>01097         }
<a name="l01098"></a>01098       }
<a name="l01099"></a>01099 
<a name="l01100"></a>01100       <span class="keywordflow">if</span> (!(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; exactly&lt;':'&gt; &gt;()))
<a name="l01101"></a>01101       { <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"invalid syntax"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>); }
<a name="l01102"></a>01102 
<a name="l01103"></a>01103       <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* value = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#10dd998de961f4ef59cf03b71ed7926d">parse_space_list</a>();
<a name="l01104"></a>01104 
<a name="l01105"></a>01105       (*map) &lt;&lt; make_pair(key, value);
<a name="l01106"></a>01106     }
<a name="l01107"></a>01107 
<a name="l01108"></a>01108     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> ps = map-&gt;pstate();
<a name="l01109"></a>01109     ps.<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#dc97734c3146947e87902755f386597d">offset</a> = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a> - ps + <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>.<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#dc97734c3146947e87902755f386597d">offset</a>;
<a name="l01110"></a>01110     map-&gt;pstate(ps);
<a name="l01111"></a>01111 
<a name="l01112"></a>01112     <span class="keywordflow">return</span> map;
<a name="l01113"></a>01113   }
<a name="l01114"></a>01114 
<a name="l01115"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">01115</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">Parser::parse_list</a>()
<a name="l01116"></a>01116   {
<a name="l01117"></a>01117     <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#5e67b4ca87dfdb673dbe16094404c50f">parse_comma_list</a>();
<a name="l01118"></a>01118   }
<a name="l01119"></a>01119 
<a name="l01120"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#5e67b4ca87dfdb673dbe16094404c50f">01120</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#5e67b4ca87dfdb673dbe16094404c50f">Parser::parse_comma_list</a>()
<a name="l01121"></a>01121   {
<a name="l01122"></a>01122     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1aecdde181125d84af61c9e4a95b9b63">peek_css</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#1a0b0d01fb18f20c6947d999d10d6d3b">alternatives</a> &lt;
<a name="l01123"></a>01123           <span class="comment">// exactly&lt;'!'&gt;,</span>
<a name="l01124"></a>01124           <span class="comment">// exactly&lt;':'&gt;,</span>
<a name="l01125"></a>01125           exactly&lt;';'&gt;,
<a name="l01126"></a>01126           <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'}'</span>&gt;,
<a name="l01127"></a>01127           <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt;,
<a name="l01128"></a>01128           <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt;,
<a name="l01129"></a>01129           exactly&lt;ellipsis&gt;
<a name="l01130"></a>01130         &gt; &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>))
<a name="l01131"></a>01131     { <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, 0); }
<a name="l01132"></a>01132     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* list1 = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#10dd998de961f4ef59cf03b71ed7926d">parse_space_list</a>();
<a name="l01133"></a>01133     <span class="comment">// if it's a singleton, return it directly; don't wrap it</span>
<a name="l01134"></a>01134     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1aecdde181125d84af61c9e4a95b9b63">peek_css</a>&lt; exactly&lt;','&gt; &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>)) <span class="keywordflow">return</span> list1;
<a name="l01135"></a>01135 
<a name="l01136"></a>01136     <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* comma_list = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, 2, <a class="code" href="../../db/d2b/class_sass_1_1_list.html#9388a3ccf62a50f047b10c2d99114bcef81277bcd86412fe04bb68718ea09392">List::COMMA</a>);
<a name="l01137"></a>01137     (*comma_list) &lt;&lt; list1;
<a name="l01138"></a>01138 
<a name="l01139"></a>01139     <span class="keywordflow">while</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0c9d2460847d81a9d93fb1c221291803">lex_css</a>&lt; exactly&lt;','&gt; &gt;())
<a name="l01140"></a>01140     {
<a name="l01141"></a>01141       <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1aecdde181125d84af61c9e4a95b9b63">peek_css</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#1a0b0d01fb18f20c6947d999d10d6d3b">alternatives</a> &lt;
<a name="l01142"></a>01142             <span class="comment">// exactly&lt;'!'&gt;,</span>
<a name="l01143"></a>01143             exactly&lt;';'&gt;,
<a name="l01144"></a>01144             <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'}'</span>&gt;,
<a name="l01145"></a>01145             <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt;,
<a name="l01146"></a>01146             <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt;,
<a name="l01147"></a>01147             exactly&lt;':'&gt;,
<a name="l01148"></a>01148             exactly&lt;ellipsis&gt;
<a name="l01149"></a>01149           &gt; &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>)
<a name="l01150"></a>01150       ) { <span class="keywordflow">break</span>; }
<a name="l01151"></a>01151       <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* list = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#10dd998de961f4ef59cf03b71ed7926d">parse_space_list</a>();
<a name="l01152"></a>01152       (*comma_list) &lt;&lt; list;
<a name="l01153"></a>01153     }
<a name="l01154"></a>01154 
<a name="l01155"></a>01155     <span class="keywordflow">return</span> comma_list;
<a name="l01156"></a>01156   }
<a name="l01157"></a>01157 
<a name="l01158"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#10dd998de961f4ef59cf03b71ed7926d">01158</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#10dd998de961f4ef59cf03b71ed7926d">Parser::parse_space_list</a>()
<a name="l01159"></a>01159   {
<a name="l01160"></a>01160     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* disj1 = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#3dc7836c1e43192616026541e7390c55">parse_disjunction</a>();
<a name="l01161"></a>01161     <span class="comment">// if it's a singleton, return it directly; don't wrap it</span>
<a name="l01162"></a>01162     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1aecdde181125d84af61c9e4a95b9b63">peek_css</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#1a0b0d01fb18f20c6947d999d10d6d3b">alternatives</a> &lt;
<a name="l01163"></a>01163           <span class="comment">// exactly&lt;'!'&gt;,</span>
<a name="l01164"></a>01164           exactly&lt;';'&gt;,
<a name="l01165"></a>01165           <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'}'</span>&gt;,
<a name="l01166"></a>01166           <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt;,
<a name="l01167"></a>01167           <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt;,
<a name="l01168"></a>01168           exactly&lt;','&gt;,
<a name="l01169"></a>01169           exactly&lt;':'&gt;,
<a name="l01170"></a>01170           exactly&lt;ellipsis&gt;,
<a name="l01171"></a>01171           <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#53512a93480edb0a2a0d1063255279e1">default_flag</a>,
<a name="l01172"></a>01172           <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#7a787fef02366edd05db6e0ee299e9f1">global_flag</a>
<a name="l01173"></a>01173         &gt; &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>)
<a name="l01174"></a>01174     ) { <span class="keywordflow">return</span> disj1; }
<a name="l01175"></a>01175 
<a name="l01176"></a>01176     <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* space_list = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, 2, <a class="code" href="../../db/d2b/class_sass_1_1_list.html#9388a3ccf62a50f047b10c2d99114bcec08dae7edcb5c5bb959fee5971fbad95">List::SPACE</a>);
<a name="l01177"></a>01177     (*space_list) &lt;&lt; disj1;
<a name="l01178"></a>01178 
<a name="l01179"></a>01179     <span class="keywordflow">while</span> (!(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1aecdde181125d84af61c9e4a95b9b63">peek_css</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#1a0b0d01fb18f20c6947d999d10d6d3b">alternatives</a> &lt;
<a name="l01180"></a>01180                <span class="comment">// exactly&lt;'!'&gt;,</span>
<a name="l01181"></a>01181                exactly&lt;';'&gt;,
<a name="l01182"></a>01182                <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'}'</span>&gt;,
<a name="l01183"></a>01183                <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt;,
<a name="l01184"></a>01184                <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt;,
<a name="l01185"></a>01185                exactly&lt;','&gt;,
<a name="l01186"></a>01186                exactly&lt;':'&gt;,
<a name="l01187"></a>01187                exactly&lt;ellipsis&gt;,
<a name="l01188"></a>01188                <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#53512a93480edb0a2a0d1063255279e1">default_flag</a>,
<a name="l01189"></a>01189                <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#7a787fef02366edd05db6e0ee299e9f1">global_flag</a>
<a name="l01190"></a>01190            &gt; &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>)) &amp;&amp; peek_css&lt; optional_css_whitespace &gt;() != <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#a0c4bdeda46c4ae639e086c22fe5eed6">end</a>
<a name="l01191"></a>01191     ) {
<a name="l01192"></a>01192       (*space_list) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#3dc7836c1e43192616026541e7390c55">parse_disjunction</a>();
<a name="l01193"></a>01193     }
<a name="l01194"></a>01194 
<a name="l01195"></a>01195     <span class="keywordflow">return</span> space_list;
<a name="l01196"></a>01196   }
<a name="l01197"></a>01197 
<a name="l01198"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#3dc7836c1e43192616026541e7390c55">01198</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#3dc7836c1e43192616026541e7390c55">Parser::parse_disjunction</a>()
<a name="l01199"></a>01199   {
<a name="l01200"></a>01200     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* conj1 = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#35c60d3119b18ab6366ed4c1b26aa112">parse_conjunction</a>();
<a name="l01201"></a>01201     <span class="comment">// if it's a singleton, return it directly; don't wrap it</span>
<a name="l01202"></a>01202     <span class="keywordflow">if</span> (!peek_css&lt; kwd_or &gt;()) <span class="keywordflow">return</span> conj1;
<a name="l01203"></a>01203 
<a name="l01204"></a>01204     vector&lt;Expression*&gt; operands;
<a name="l01205"></a>01205     <span class="keywordflow">while</span> (lex_css&lt; kwd_or &gt;())
<a name="l01206"></a>01206       operands.push_back(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#35c60d3119b18ab6366ed4c1b26aa112">parse_conjunction</a>());
<a name="l01207"></a>01207 
<a name="l01208"></a>01208     <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#22bb08af4bd2d0d23e710abd27c06cc0">fold_operands</a>(conj1, operands, <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a796727447c0ad447987df1c6415aef074">Binary_Expression::OR</a>);
<a name="l01209"></a>01209   }
<a name="l01210"></a>01210 
<a name="l01211"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#35c60d3119b18ab6366ed4c1b26aa112">01211</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#35c60d3119b18ab6366ed4c1b26aa112">Parser::parse_conjunction</a>()
<a name="l01212"></a>01212   {
<a name="l01213"></a>01213     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* rel1 = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#532b37cd9fd0e5506fd84bd85d53474a">parse_relation</a>();
<a name="l01214"></a>01214     <span class="comment">// if it's a singleton, return it directly; don't wrap it</span>
<a name="l01215"></a>01215     <span class="keywordflow">if</span> (!peek_css&lt; kwd_and &gt;()) <span class="keywordflow">return</span> rel1;
<a name="l01216"></a>01216 
<a name="l01217"></a>01217     vector&lt;Expression*&gt; operands;
<a name="l01218"></a>01218     <span class="keywordflow">while</span> (lex_css&lt; kwd_and &gt;())
<a name="l01219"></a>01219       operands.push_back(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#532b37cd9fd0e5506fd84bd85d53474a">parse_relation</a>());
<a name="l01220"></a>01220 
<a name="l01221"></a>01221     <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#22bb08af4bd2d0d23e710abd27c06cc0">fold_operands</a>(rel1, operands, <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7865555c9f2e0458a7078486aa1b3254f">Binary_Expression::AND</a>);
<a name="l01222"></a>01222   }
<a name="l01223"></a>01223 
<a name="l01224"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#532b37cd9fd0e5506fd84bd85d53474a">01224</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#532b37cd9fd0e5506fd84bd85d53474a">Parser::parse_relation</a>()
<a name="l01225"></a>01225   {
<a name="l01226"></a>01226     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* expr1 = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#47213487dc8aec6fc011d7307b7bdea6">parse_expression</a>();
<a name="l01227"></a>01227     <span class="comment">// if it's a singleton, return it directly; don't wrap it</span>
<a name="l01228"></a>01228     <span class="keywordflow">if</span> (!(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#1a0b0d01fb18f20c6947d999d10d6d3b">alternatives</a> &lt;
<a name="l01229"></a>01229             <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#53791812b52e5f60884b6a78a38f9d50">kwd_eq</a>,
<a name="l01230"></a>01230             <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#0b2201231e04c3ef320db35240de7956">kwd_neq</a>,
<a name="l01231"></a>01231             <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#fbaf482ece1ff92b639ad093c4daf88c">kwd_gte</a>,
<a name="l01232"></a>01232             <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#0787d5cb0cf80d060744b836eb0bf826">kwd_gt</a>,
<a name="l01233"></a>01233             <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#a18f6816a88a4fd85c3f7c574f605091">kwd_lte</a>,
<a name="l01234"></a>01234             <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#2764716083634853ecf9cefdb6a6a308">kwd_lt</a>
<a name="l01235"></a>01235           &gt; &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>)))
<a name="l01236"></a>01236     { <span class="keywordflow">return</span> expr1; }
<a name="l01237"></a>01237 
<a name="l01238"></a>01238     <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7">Binary_Expression::Type</a> op
<a name="l01239"></a>01239     = lex&lt;kwd_eq&gt;()  ? <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a79efdc855f3c1477957fb50affec07f8f">Binary_Expression::EQ</a>
<a name="l01240"></a>01240     : lex&lt;kwd_neq&gt;() ? <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7b4ab8d2a8dc61f08e3cc919787c79cd8">Binary_Expression::NEQ</a>
<a name="l01241"></a>01241     : lex&lt;kwd_gte&gt;() ? <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a77303510947cbe9a41f9fed933a881e3c">Binary_Expression::GTE</a>
<a name="l01242"></a>01242     : lex&lt;kwd_lte&gt;() ? <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7dd4edd9fb0d6fad316ff9db560c4096d">Binary_Expression::LTE</a>
<a name="l01243"></a>01243     : lex&lt;kwd_gt&gt;()  ? <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a712f5476fa04803e6cc72f2198730d892">Binary_Expression::GT</a>
<a name="l01244"></a>01244     : lex&lt;kwd_lt&gt;()  ? <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7486aa221ceeeac475326e85d3d37f571">Binary_Expression::LT</a>
<a name="l01245"></a>01245     :                 <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7486aa221ceeeac475326e85d3d37f571">Binary_Expression::LT</a>; <span class="comment">// whatever</span>
<a name="l01246"></a>01246 
<a name="l01247"></a>01247     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* expr2 = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#47213487dc8aec6fc011d7307b7bdea6">parse_expression</a>();
<a name="l01248"></a>01248 
<a name="l01249"></a>01249     <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html">Binary_Expression</a>(expr1-&gt;pstate(), op, expr1, expr2);
<a name="l01250"></a>01250   }
<a name="l01251"></a>01251 
<a name="l01252"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#47213487dc8aec6fc011d7307b7bdea6">01252</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#47213487dc8aec6fc011d7307b7bdea6">Parser::parse_expression</a>()
<a name="l01253"></a>01253   {
<a name="l01254"></a>01254     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* term1 = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f04a226b727cd29fc66d96fd31be3dfd">parse_term</a>();
<a name="l01255"></a>01255     <span class="comment">// if it's a singleton, return it directly; don't wrap it</span>
<a name="l01256"></a>01256     <span class="keywordflow">if</span> (!(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; exactly&lt;'+'&gt; &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>) ||
<a name="l01257"></a>01257           (peek&lt; no_spaces &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>) &amp;&amp; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a>&lt; negate&lt; unsigned_number &gt;, exactly&lt;'-'&gt;, negate&lt; space &gt; &gt; &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>)) ||
<a name="l01258"></a>01258           (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a>&lt; negate&lt; unsigned_number &gt;, exactly&lt;'-'&gt;, negate&lt; unsigned_number &gt; &gt; &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>))) ||
<a name="l01259"></a>01259           peek&lt; identifier &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>))
<a name="l01260"></a>01260     { <span class="keywordflow">return</span> term1; }
<a name="l01261"></a>01261 
<a name="l01262"></a>01262     vector&lt;Expression*&gt; operands;
<a name="l01263"></a>01263     vector&lt;Binary_Expression::Type&gt; operators;
<a name="l01264"></a>01264     <span class="keywordflow">while</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; exactly&lt;'+'&gt; &gt;() || <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a>&lt; negate&lt; digit &gt;, exactly&lt;'-'&gt; &gt; &gt;()) {
<a name="l01265"></a>01265       operators.push_back(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>.<a class="code" href="../../de/d6f/class_sass_1_1_token.html#db8d804fbb2dc2bf2e22642939f19764">to_string</a>() == <span class="stringliteral">"+"</span> ? <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7cfcf145f2788bf340ff3f3098bc54909">Binary_Expression::ADD</a> : <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a712b733d4941495e86811fe6ceeeff9da">Binary_Expression::SUB</a>);
<a name="l01266"></a>01266       operands.push_back(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f04a226b727cd29fc66d96fd31be3dfd">parse_term</a>());
<a name="l01267"></a>01267     }
<a name="l01268"></a>01268 
<a name="l01269"></a>01269     <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#22bb08af4bd2d0d23e710abd27c06cc0">fold_operands</a>(term1, operands, operators);
<a name="l01270"></a>01270   }
<a name="l01271"></a>01271 
<a name="l01272"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f04a226b727cd29fc66d96fd31be3dfd">01272</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f04a226b727cd29fc66d96fd31be3dfd">Parser::parse_term</a>()
<a name="l01273"></a>01273   {
<a name="l01274"></a>01274     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* factor = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#7ffba33c7bbeec6294d952b928b0caf5">parse_factor</a>();
<a name="l01275"></a>01275     <span class="comment">// Special case: Ruby sass never tries to modulo if the lhs contains an interpolant</span>
<a name="l01276"></a>01276     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1aecdde181125d84af61c9e4a95b9b63">peek_css</a>&lt; exactly&lt;'%'&gt; &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>) &amp;&amp; factor-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede868ee847e634a4297b274316de8a8ca9921">Expression::STRING</a>) {
<a name="l01277"></a>01277       <a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>* ss = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>*<span class="keyword">&gt;</span>(factor);
<a name="l01278"></a>01278       <span class="keywordflow">if</span> (ss &amp;&amp; ss-&gt;has_interpolants()) <span class="keywordflow">return</span> factor;
<a name="l01279"></a>01279     }
<a name="l01280"></a>01280     <span class="comment">// if it's a singleton, return it directly; don't wrap it</span>
<a name="l01281"></a>01281     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; class_char&lt; static_ops &gt; &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>)) <span class="keywordflow">return</span> factor;
<a name="l01282"></a>01282     <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#77df8c05a0d0d11176c57f3d71866b19">parse_operators</a>(factor);
<a name="l01283"></a>01283   }
<a name="l01284"></a>01284 
<a name="l01285"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#77df8c05a0d0d11176c57f3d71866b19">01285</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#77df8c05a0d0d11176c57f3d71866b19">Parser::parse_operators</a>(<a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* factor)
<a name="l01286"></a>01286   {
<a name="l01287"></a>01287     <span class="comment">// parse more factors and operators</span>
<a name="l01288"></a>01288     vector&lt;Expression*&gt; operands; <span class="comment">// factors</span>
<a name="l01289"></a>01289     vector&lt;Binary_Expression::Type&gt; operators; <span class="comment">// ops</span>
<a name="l01290"></a>01290     <span class="keywordflow">while</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0c9d2460847d81a9d93fb1c221291803">lex_css</a>&lt; class_char&lt; static_ops &gt; &gt;()) {
<a name="l01291"></a>01291       <span class="keywordflow">switch</span>(*<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>.<a class="code" href="../../de/d6f/class_sass_1_1_token.html#a06f03daa0de61d791a3c7855ee4378e">begin</a>) {
<a name="l01292"></a>01292         <span class="keywordflow">case</span> <span class="charliteral">'*'</span>: operators.push_back(<a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7086ab1f2f4dac104b6826ebe0eaba8fd">Binary_Expression::MUL</a>); <span class="keywordflow">break</span>;
<a name="l01293"></a>01293         <span class="keywordflow">case</span> <span class="charliteral">'/'</span>: operators.push_back(<a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a78565f0d60c3ba6d468661c49d86e9744">Binary_Expression::DIV</a>); <span class="keywordflow">break</span>;
<a name="l01294"></a>01294         <span class="keywordflow">case</span> <span class="charliteral">'%'</span>: operators.push_back(<a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7140fcc89db148e5975f1486e794675ba">Binary_Expression::MOD</a>); <span class="keywordflow">break</span>;
<a name="l01295"></a>01295         <span class="keywordflow">default</span>: <span class="keywordflow">throw</span> runtime_error(<span class="stringliteral">"unknown static op parsed"</span>); <span class="keywordflow">break</span>;
<a name="l01296"></a>01296       }
<a name="l01297"></a>01297       operands.push_back(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#7ffba33c7bbeec6294d952b928b0caf5">parse_factor</a>());
<a name="l01298"></a>01298     }
<a name="l01299"></a>01299     <span class="comment">// operands and operators to binary expression</span>
<a name="l01300"></a>01300     <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#22bb08af4bd2d0d23e710abd27c06cc0">fold_operands</a>(factor, operands, operators);
<a name="l01301"></a>01301   }
<a name="l01302"></a>01302 
<a name="l01303"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#7ffba33c7bbeec6294d952b928b0caf5">01303</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#7ffba33c7bbeec6294d952b928b0caf5">Parser::parse_factor</a>()
<a name="l01304"></a>01304   {
<a name="l01305"></a>01305     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0c9d2460847d81a9d93fb1c221291803">lex_css</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'('</span>&gt; &gt;()) {
<a name="l01306"></a>01306       <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* value = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#c31417ed311e98485311e25c507d8446">parse_map</a>();
<a name="l01307"></a>01307       <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0c9d2460847d81a9d93fb1c221291803">lex_css</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt; &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"unclosed parenthesis"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01308"></a>01308       value-&gt;is_delayed(<span class="keyword">false</span>);
<a name="l01309"></a>01309       <span class="comment">// make sure wrapped lists and division expressions are non-delayed within parentheses</span>
<a name="l01310"></a>01310       <span class="keywordflow">if</span> (value-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86825688e799536738ea469158ef15fd1c0">Expression::LIST</a>) {
<a name="l01311"></a>01311         <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* <a class="code" href="../../d4/d9b/common_8inc_8php.html#367c038113690266a013d2e04a42a3b1" title="Shorthand method for the Localization::localize method.">l</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>*<span class="keyword">&gt;</span>(value);
<a name="l01312"></a>01312         <span class="keywordflow">if</span> (!l-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#c6e61de369e994009e36f344f99c15ad">empty</a>()) (*l)[0]-&gt;is_delayed(<span class="keyword">false</span>);
<a name="l01313"></a>01313       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">typeid</span>(*value) == <span class="keyword">typeid</span>(<a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html">Binary_Expression</a>)) {
<a name="l01314"></a>01314         <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html">Binary_Expression</a>* b = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html">Binary_Expression</a>*<span class="keyword">&gt;</span>(value);
<a name="l01315"></a>01315         <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html">Binary_Expression</a>* lhs = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html">Binary_Expression</a>*<span class="keyword">&gt;</span>(b-&gt;left());
<a name="l01316"></a>01316         <span class="keywordflow">if</span> (lhs &amp;&amp; lhs-&gt;<a class="code" href="../../db/df1/class_sass_1_1_expression.html#f9f069732bfdd88e8e8b13652f3af643">type</a>() == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a78565f0d60c3ba6d468661c49d86e9744">Binary_Expression::DIV</a>) lhs-&gt;is_delayed(<span class="keyword">false</span>);
<a name="l01317"></a>01317       }
<a name="l01318"></a>01318       <span class="keywordflow">return</span> value;
<a name="l01319"></a>01319     }
<a name="l01320"></a>01320     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; ie_property &gt;()) {
<a name="l01321"></a>01321       <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f64f9c87ecc7ae98bf2b6017e61da8a7">parse_ie_property</a>();
<a name="l01322"></a>01322     }
<a name="l01323"></a>01323     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; ie_keyword_arg &gt;()) {
<a name="l01324"></a>01324       <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#43631e5c43b5f46ed8c603fad014e7b5">parse_ie_keyword_arg</a>();
<a name="l01325"></a>01325     }
<a name="l01326"></a>01326     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; exactly&lt; calc_kwd &gt; &gt;() ||
<a name="l01327"></a>01327              <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; exactly&lt; moz_calc_kwd &gt; &gt;() ||
<a name="l01328"></a>01328              <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; exactly&lt; ms_calc_kwd &gt; &gt;() ||
<a name="l01329"></a>01329              <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; exactly&lt; webkit_calc_kwd &gt; &gt;()) {
<a name="l01330"></a>01330       <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#9e8a664f069d8a95d65b5f488c499c6f">parse_calc_function</a>();
<a name="l01331"></a>01331     }
<a name="l01332"></a>01332     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; functional_schema &gt;()) {
<a name="l01333"></a>01333       <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b7df9965782e3de24d7fde5c04e4f5c9">parse_function_call_schema</a>();
<a name="l01334"></a>01334     }
<a name="l01335"></a>01335     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#5ae7a74ebd405eaae34468993618db89">identifier_schema</a>, <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#fd714e5be03a7029d97f364b830c6a84">negate</a>&lt; exactly&lt;'%'&gt; &gt; &gt; &gt;()) {
<a name="l01336"></a>01336       <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#931c1d0e00e23404a2bdba77b4a3395f">parse_identifier_schema</a>();
<a name="l01337"></a>01337     }
<a name="l01338"></a>01338     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; functional &gt;()) {
<a name="l01339"></a>01339       <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1882ea2e7b26d148b95b96f48bdfa54c">parse_function_call</a>();
<a name="l01340"></a>01340     }
<a name="l01341"></a>01341     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a>&lt; exactly&lt;'+'&gt;, <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#150057d442c199a6fe3159fe1b585e7e">optional_css_whitespace</a>, negate&lt; number &gt; &gt; &gt;()) {
<a name="l01342"></a>01342       <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../dd/d85/class_sass_1_1_unary___expression.html">Unary_Expression</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../dd/d85/class_sass_1_1_unary___expression.html#1d1cfd8ffb84e947f82999c682b666a787fe59ef12c3d13dc2a4d14c9b16c1f9">Unary_Expression::PLUS</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#7ffba33c7bbeec6294d952b928b0caf5">parse_factor</a>());
<a name="l01343"></a>01343     }
<a name="l01344"></a>01344     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a>&lt; exactly&lt;'-'&gt;, <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#150057d442c199a6fe3159fe1b585e7e">optional_css_whitespace</a>, negate&lt; number&gt; &gt; &gt;()) {
<a name="l01345"></a>01345       <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../dd/d85/class_sass_1_1_unary___expression.html">Unary_Expression</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../dd/d85/class_sass_1_1_unary___expression.html#1d1cfd8ffb84e947f82999c682b666a7f613d73b4e7b570ffd967df4a13c4225">Unary_Expression::MINUS</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#7ffba33c7bbeec6294d952b928b0caf5">parse_factor</a>());
<a name="l01346"></a>01346     }
<a name="l01347"></a>01347     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; sequence&lt; kwd_not, css_whitespace &gt; &gt;()) {
<a name="l01348"></a>01348       <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../dd/d85/class_sass_1_1_unary___expression.html">Unary_Expression</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../dd/d85/class_sass_1_1_unary___expression.html#1d1cfd8ffb84e947f82999c682b666a70378ebc895849163b249d0b330257dd6">Unary_Expression::NOT</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#7ffba33c7bbeec6294d952b928b0caf5">parse_factor</a>());
<a name="l01349"></a>01349     }
<a name="l01350"></a>01350     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a> &lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a> &lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#42b576ae1a6383410b74ecd166917b18">one_plus</a> &lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#1a0b0d01fb18f20c6947d999d10d6d3b">alternatives</a> &lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#e195763c57609aa549fdaddcc8b7550c">css_whitespace</a>, exactly&lt;'-'&gt;, exactly&lt;'+'&gt; &gt; &gt;, <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#b9c4f34cbfc504789a7f41f881d5bb4a">number</a> &gt; &gt;()) {
<a name="l01351"></a>01351       <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#c50c8ede8f7eb385f078bcc58f80c1fe">parse_number_prefix</a>()) <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#8136d35acbbfbb5dc6e69ccb6a96fd51">parse_value</a>(); <span class="comment">// prefix is positive</span>
<a name="l01352"></a>01352       <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../dd/d85/class_sass_1_1_unary___expression.html">Unary_Expression</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../dd/d85/class_sass_1_1_unary___expression.html#1d1cfd8ffb84e947f82999c682b666a7f613d73b4e7b570ffd967df4a13c4225">Unary_Expression::MINUS</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#8136d35acbbfbb5dc6e69ccb6a96fd51">parse_value</a>());
<a name="l01353"></a>01353     }
<a name="l01354"></a>01354     <span class="keywordflow">else</span> {
<a name="l01355"></a>01355       <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#8136d35acbbfbb5dc6e69ccb6a96fd51">parse_value</a>();
<a name="l01356"></a>01356     }
<a name="l01357"></a>01357   }
<a name="l01358"></a>01358 
<a name="l01359"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#8136d35acbbfbb5dc6e69ccb6a96fd51">01359</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#8136d35acbbfbb5dc6e69ccb6a96fd51">Parser::parse_value</a>()
<a name="l01360"></a>01360   {
<a name="l01361"></a>01361     lex&lt; css_comments &gt;();
<a name="l01362"></a>01362     <span class="keywordflow">if</span> (lex&lt; ampersand &gt;())
<a name="l01363"></a>01363     {
<a name="l01364"></a>01364       <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d5/d3f/class_sass_1_1_parent___selector.html">Parent_Selector</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#780542b782a7ad33fed8792314100ba8">parse_selector_group</a>()); }
<a name="l01365"></a>01365 
<a name="l01366"></a>01366     <span class="keywordflow">if</span> (lex&lt; important &gt;())
<a name="l01367"></a>01367     { <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <span class="stringliteral">"!important"</span>); }
<a name="l01368"></a>01368 
<a name="l01369"></a>01369     <span class="keyword">const</span> <span class="keywordtype">char</span>* stop;
<a name="l01370"></a>01370     <span class="keywordflow">if</span> ((stop = peek&lt; value_schema &gt;()))
<a name="l01371"></a>01371     { <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#8312bef879b5de894a835255a17c2b60">parse_value_schema</a>(stop); }
<a name="l01372"></a>01372 
<a name="l01373"></a>01373     <span class="keywordflow">if</span> (lex&lt; kwd_true &gt;())
<a name="l01374"></a>01374     { <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d4a/class_sass_1_1_boolean.html">Boolean</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <span class="keyword">true</span>); }
<a name="l01375"></a>01375 
<a name="l01376"></a>01376     <span class="keywordflow">if</span> (lex&lt; kwd_false &gt;())
<a name="l01377"></a>01377     { <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d4a/class_sass_1_1_boolean.html">Boolean</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <span class="keyword">false</span>); }
<a name="l01378"></a>01378 
<a name="l01379"></a>01379     <span class="keywordflow">if</span> (lex&lt; kwd_null &gt;())
<a name="l01380"></a>01380     { <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d6/dd5/namespace_nan.html#d4b94b84f0a38f43868cd876fc366714">Null</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>); }
<a name="l01381"></a>01381 
<a name="l01382"></a>01382     <span class="keywordflow">if</span> (lex&lt; identifier &gt;()) {
<a name="l01383"></a>01383       <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>* str = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l01384"></a>01384       <span class="comment">// Dont' delay this string if it is a name color. Fixes #652.</span>
<a name="l01385"></a>01385       str-&gt;is_delayed(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#1b8dde5f4f9ebe06b1d27895c1dd9dfe">names_to_colors</a>.count(<a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>)) == 0);
<a name="l01386"></a>01386       <span class="keywordflow">return</span> str;
<a name="l01387"></a>01387     }
<a name="l01388"></a>01388 
<a name="l01389"></a>01389     <span class="keywordflow">if</span> (lex&lt; percentage &gt;())
<a name="l01390"></a>01390     { <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/df5/class_sass_1_1_textual.html">Textual</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d7/df5/class_sass_1_1_textual.html#1d1cfd8ffb84e947f82999c682b666a7ee7c061a4ea53ca0cd5717e800617b39">Textual::PERCENTAGE</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>); }
<a name="l01391"></a>01391 
<a name="l01392"></a>01392     <span class="comment">// match hex number first because 0x000 looks like a number followed by an indentifier</span>
<a name="l01393"></a>01393     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; alternatives&lt; hex, hex0 &gt; &gt;())
<a name="l01394"></a>01394     { <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/df5/class_sass_1_1_textual.html">Textual</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d7/df5/class_sass_1_1_textual.html#1d1cfd8ffb84e947f82999c682b666a7d3c20094c5fe3327350484d01c44c137">Textual::HEX</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>); }
<a name="l01395"></a>01395 
<a name="l01396"></a>01396     <span class="comment">// also handle the 10em- foo special case</span>
<a name="l01397"></a>01397     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#f415044b67923e9c7f44a487c244708f">dimension</a>, <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#e9359ecc6fbb28868909b733d856c23c">optional</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a>&lt; exactly&lt;'-'&gt;, negate&lt; digit &gt; &gt; &gt; &gt; &gt;())
<a name="l01398"></a>01398     { <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/df5/class_sass_1_1_textual.html">Textual</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d7/df5/class_sass_1_1_textual.html#1d1cfd8ffb84e947f82999c682b666a7b76859fb31ae59096e234a3f32eac4f7">Textual::DIMENSION</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>); }
<a name="l01399"></a>01399 
<a name="l01400"></a>01400     <span class="keywordflow">if</span> (lex&lt; number &gt;())
<a name="l01401"></a>01401     { <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/df5/class_sass_1_1_textual.html">Textual</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d7/df5/class_sass_1_1_textual.html#1d1cfd8ffb84e947f82999c682b666a712a90dfe20486bbe3e075afcd19ef2d0">Textual::NUMBER</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>); }
<a name="l01402"></a>01402 
<a name="l01403"></a>01403     <span class="keywordflow">if</span> (peek&lt; quoted_string &gt;())
<a name="l01404"></a>01404     { <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#40846dc85c924cb333a605f4ba9f7364">parse_string</a>(); }
<a name="l01405"></a>01405 
<a name="l01406"></a>01406     <span class="keywordflow">if</span> (lex&lt; variable &gt;())
<a name="l01407"></a>01407     { <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d8/d41/class_sass_1_1_variable.html">Variable</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d0/d1c/namespace_sass_1_1_util.html#84d459f975b5bed53d97a712add3261f">Util::normalize_underscores</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>)); }
<a name="l01408"></a>01408 
<a name="l01409"></a>01409     <span class="comment">// Special case handling for `%` proceeding an interpolant.</span>
<a name="l01410"></a>01410     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a>&lt; exactly&lt;'%'&gt;, optional&lt; percentage &gt; &gt; &gt;())
<a name="l01411"></a>01411     { <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>); }
<a name="l01412"></a>01412 
<a name="l01413"></a>01413     <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"error reading values after "</span> + <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>.<a class="code" href="../../de/d6f/class_sass_1_1_token.html#db8d804fbb2dc2bf2e22642939f19764">to_string</a>(), <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01414"></a>01414 
<a name="l01415"></a>01415     <span class="comment">// unreachable statement</span>
<a name="l01416"></a>01416     <span class="keywordflow">return</span> 0;
<a name="l01417"></a>01417   }
<a name="l01418"></a>01418 
<a name="l01419"></a>01419   <span class="comment">// this parses interpolation inside other strings</span>
<a name="l01420"></a>01420   <span class="comment">// means the result should later be quoted again</span>
<a name="l01421"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#ba34a907f8619a5cbf26c8fb53f56324">01421</a>   <a class="code" href="../../db/ddf/class_sass_1_1_string.html">String</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#ba34a907f8619a5cbf26c8fb53f56324">Parser::parse_interpolated_chunk</a>(<a class="code" href="../../de/d6f/class_sass_1_1_token.html">Token</a> chunk, <span class="keywordtype">bool</span> constant)
<a name="l01422"></a>01422   {
<a name="l01423"></a>01423     <span class="keyword">const</span> <span class="keywordtype">char</span>* i = chunk.<a class="code" href="../../de/d6f/class_sass_1_1_token.html#a06f03daa0de61d791a3c7855ee4378e">begin</a>;
<a name="l01424"></a>01424     <span class="comment">// see if there any interpolants</span>
<a name="l01425"></a>01425     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a> = find_first_in_interval&lt; exactly&lt;hash_lbrace&gt; &gt;(i, chunk.<a class="code" href="../../de/d6f/class_sass_1_1_token.html#a0c4bdeda46c4ae639e086c22fe5eed6">end</a>);
<a name="l01426"></a>01426     <span class="keywordflow">if</span> (!p) {
<a name="l01427"></a>01427       <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>* str_quoted = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <span class="keywordtype">string</span>(i, chunk.<a class="code" href="../../de/d6f/class_sass_1_1_token.html#a0c4bdeda46c4ae639e086c22fe5eed6">end</a>));
<a name="l01428"></a>01428       <span class="keywordflow">if</span> (!constant &amp;&amp; str_quoted-&gt;quote_mark()) str_quoted-&gt;quote_mark(<span class="charliteral">'*'</span>);
<a name="l01429"></a>01429       str_quoted-&gt;is_delayed(<span class="keyword">true</span>);
<a name="l01430"></a>01430       <span class="keywordflow">return</span> str_quoted;
<a name="l01431"></a>01431     }
<a name="l01432"></a>01432 
<a name="l01433"></a>01433     <a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>* schema = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01434"></a>01434     <span class="keywordflow">while</span> (i &lt; chunk.<a class="code" href="../../de/d6f/class_sass_1_1_token.html#a0c4bdeda46c4ae639e086c22fe5eed6">end</a>) {
<a name="l01435"></a>01435       p = find_first_in_interval&lt; exactly&lt;hash_lbrace&gt; &gt;(i, chunk.<a class="code" href="../../de/d6f/class_sass_1_1_token.html#a0c4bdeda46c4ae639e086c22fe5eed6">end</a>);
<a name="l01436"></a>01436       <span class="keywordflow">if</span> (p) {
<a name="l01437"></a>01437         <span class="keywordflow">if</span> (i &lt; p) {
<a name="l01438"></a>01438           <span class="comment">// accumulate the preceding segment if it's nonempty</span>
<a name="l01439"></a>01439           (*schema) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <span class="keywordtype">string</span>(i, p));
<a name="l01440"></a>01440         }
<a name="l01441"></a>01441         <span class="comment">// we need to skip anything inside strings</span>
<a name="l01442"></a>01442         <span class="comment">// create a new target in parser/prelexer</span>
<a name="l01443"></a>01443         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a> &lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a> &lt; optional_spaces, exactly&lt;rbrace&gt; &gt; &gt;(p+2)) { <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a> = p+2;
<a name="l01444"></a>01444           <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1feaa8c1fed5779d5f15c46d66edb9a6">css_error</a>(<span class="stringliteral">"Invalid CSS"</span>, <span class="stringliteral">" after "</span>, <span class="stringliteral">": expected expression (e.g. 1px, bold), was "</span>);
<a name="l01445"></a>01445         }
<a name="l01446"></a>01446         <span class="keyword">const</span> <span class="keywordtype">char</span>* j = skip_over_scopes&lt; exactly&lt;hash_lbrace&gt;, exactly&lt;rbrace&gt; &gt;(p + 2, chunk.<a class="code" href="../../de/d6f/class_sass_1_1_token.html#a0c4bdeda46c4ae639e086c22fe5eed6">end</a>); <span class="comment">// find the closing brace</span>
<a name="l01447"></a>01447         <span class="keywordflow">if</span> (j) { --j;
<a name="l01448"></a>01448           <span class="comment">// parse the interpolant and accumulate it</span>
<a name="l01449"></a>01449           <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* interp_node = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#94df5be9293b174abe27b456bca69c64">Parser::from_token</a>(<a class="code" href="../../de/d6f/class_sass_1_1_token.html">Token</a>(p+2, j), <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>).<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>();
<a name="l01450"></a>01450           interp_node-&gt;is_interpolant(<span class="keyword">true</span>);
<a name="l01451"></a>01451           (*schema) &lt;&lt; interp_node;
<a name="l01452"></a>01452           i = j;
<a name="l01453"></a>01453         }
<a name="l01454"></a>01454         <span class="keywordflow">else</span> {
<a name="l01455"></a>01455           <span class="comment">// throw an error if the interpolant is unterminated</span>
<a name="l01456"></a>01456           <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"unterminated interpolant inside string constant "</span> + chunk.<a class="code" href="../../de/d6f/class_sass_1_1_token.html#db8d804fbb2dc2bf2e22642939f19764">to_string</a>(), <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01457"></a>01457         }
<a name="l01458"></a>01458       }
<a name="l01459"></a>01459       <span class="keywordflow">else</span> { <span class="comment">// no interpolants left; add the last segment if nonempty</span>
<a name="l01460"></a>01460         <span class="comment">// check if we need quotes here (was not sure after merge)</span>
<a name="l01461"></a>01461         <span class="keywordflow">if</span> (i &lt; chunk.<a class="code" href="../../de/d6f/class_sass_1_1_token.html#a0c4bdeda46c4ae639e086c22fe5eed6">end</a>) (*schema) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <span class="keywordtype">string</span>(i, chunk.<a class="code" href="../../de/d6f/class_sass_1_1_token.html#a0c4bdeda46c4ae639e086c22fe5eed6">end</a>));
<a name="l01462"></a>01462         <span class="keywordflow">break</span>;
<a name="l01463"></a>01463       }
<a name="l01464"></a>01464       ++ i;
<a name="l01465"></a>01465     }
<a name="l01466"></a>01466     <span class="keywordflow">return</span> schema;
<a name="l01467"></a>01467   }
<a name="l01468"></a>01468 
<a name="l01469"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#2846d07cdfd7e30ab1a82568b17491f7">01469</a>   <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#2846d07cdfd7e30ab1a82568b17491f7">Parser::parse_static_expression</a>()
<a name="l01470"></a>01470   {
<a name="l01471"></a>01471     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#b9c4f34cbfc504789a7f41f881d5bb4a">number</a>, optional_spaces, exactly&lt;'/'&gt;, optional_spaces, <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#b9c4f34cbfc504789a7f41f881d5bb4a">number</a> &gt; &gt;()) {
<a name="l01472"></a>01472       <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#2042c10eced527882c10562342fa34f5">parse_static_value</a>();
<a name="l01473"></a>01473     }
<a name="l01474"></a>01474     <span class="keywordflow">return</span> 0;
<a name="l01475"></a>01475   }
<a name="l01476"></a>01476 
<a name="l01477"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#2042c10eced527882c10562342fa34f5">01477</a>   <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#2042c10eced527882c10562342fa34f5">Parser::parse_static_value</a>()
<a name="l01478"></a>01478   {
<a name="l01479"></a>01479     lex&lt; static_value &gt;();
<a name="l01480"></a>01480     <a class="code" href="../../de/d6f/class_sass_1_1_token.html">Token</a> str(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l01481"></a>01481     --str.end;
<a name="l01482"></a>01482     --<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>;
<a name="l01483"></a>01483 
<a name="l01484"></a>01484     <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>* str_node = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, str.time_wspace());
<a name="l01485"></a>01485     str_node-&gt;is_delayed(<span class="keyword">true</span>);
<a name="l01486"></a>01486     <span class="keywordflow">return</span> str_node;
<a name="l01487"></a>01487   }
<a name="l01488"></a>01488 
<a name="l01489"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#40846dc85c924cb333a605f4ba9f7364">01489</a>   <a class="code" href="../../db/ddf/class_sass_1_1_string.html">String</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#40846dc85c924cb333a605f4ba9f7364">Parser::parse_string</a>()
<a name="l01490"></a>01490   {
<a name="l01491"></a>01491     lex&lt; quoted_string &gt;();
<a name="l01492"></a>01492     <a class="code" href="../../de/d6f/class_sass_1_1_token.html">Token</a> <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#b88f7a2c255ddf124db18f5bf961c10c">token</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l01493"></a>01493     <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#ba34a907f8619a5cbf26c8fb53f56324">parse_interpolated_chunk</a>(token);
<a name="l01494"></a>01494   }
<a name="l01495"></a>01495 
<a name="l01496"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f64f9c87ecc7ae98bf2b6017e61da8a7">01496</a>   <a class="code" href="../../db/ddf/class_sass_1_1_string.html">String</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f64f9c87ecc7ae98bf2b6017e61da8a7">Parser::parse_ie_property</a>()
<a name="l01497"></a>01497   {
<a name="l01498"></a>01498     lex&lt; ie_property &gt;();
<a name="l01499"></a>01499     <a class="code" href="../../de/d6f/class_sass_1_1_token.html">Token</a> str(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l01500"></a>01500     <span class="keyword">const</span> <span class="keywordtype">char</span>* i = str.begin;
<a name="l01501"></a>01501     <span class="comment">// see if there any interpolants</span>
<a name="l01502"></a>01502     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a> = find_first_in_interval&lt; exactly&lt;hash_lbrace&gt; &gt;(str.begin, str.end);
<a name="l01503"></a>01503     <span class="keywordflow">if</span> (!p) {
<a name="l01504"></a>01504       <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>* str_node = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../da/d80/namespace_sass.html#59cd32148ab37912e137d5b799c460cf">normalize_wspace</a>(<span class="keywordtype">string</span>(str.begin, str.end)));
<a name="l01505"></a>01505       str_node-&gt;is_delayed(<span class="keyword">true</span>);
<a name="l01506"></a>01506       str_node-&gt;quote_mark(<span class="charliteral">'*'</span>);
<a name="l01507"></a>01507       <span class="keywordflow">return</span> str_node;
<a name="l01508"></a>01508     }
<a name="l01509"></a>01509 
<a name="l01510"></a>01510     <a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>* schema = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01511"></a>01511     <span class="keywordflow">while</span> (i &lt; str.end) {
<a name="l01512"></a>01512       p = find_first_in_interval&lt; exactly&lt;hash_lbrace&gt; &gt;(i, str.end);
<a name="l01513"></a>01513       <span class="keywordflow">if</span> (p) {
<a name="l01514"></a>01514         <span class="keywordflow">if</span> (i &lt; p) {
<a name="l01515"></a>01515           <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>* part = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../da/d80/namespace_sass.html#59cd32148ab37912e137d5b799c460cf">normalize_wspace</a>(<span class="keywordtype">string</span>(i, p))); <span class="comment">// accumulate the preceding segment if it's nonempty</span>
<a name="l01516"></a>01516           part-&gt;is_delayed(<span class="keyword">true</span>);
<a name="l01517"></a>01517           part-&gt;quote_mark(<span class="charliteral">'*'</span>); <span class="comment">// avoid unquote in interpolation</span>
<a name="l01518"></a>01518           (*schema) &lt;&lt; part;
<a name="l01519"></a>01519         }
<a name="l01520"></a>01520         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a> &lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a> &lt; optional_spaces, exactly&lt;rbrace&gt; &gt; &gt;(p+2)) { <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a> = p+2;
<a name="l01521"></a>01521           <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1feaa8c1fed5779d5f15c46d66edb9a6">css_error</a>(<span class="stringliteral">"Invalid CSS"</span>, <span class="stringliteral">" after "</span>, <span class="stringliteral">": expected expression (e.g. 1px, bold), was "</span>);
<a name="l01522"></a>01522         }
<a name="l01523"></a>01523         <span class="keyword">const</span> <span class="keywordtype">char</span>* j = skip_over_scopes&lt; exactly&lt;hash_lbrace&gt;, exactly&lt;rbrace&gt; &gt;(p+2, str.end); <span class="comment">// find the closing brace</span>
<a name="l01524"></a>01524         <span class="keywordflow">if</span> (j) {
<a name="l01525"></a>01525           <span class="comment">// parse the interpolant and accumulate it</span>
<a name="l01526"></a>01526           <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* interp_node = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#94df5be9293b174abe27b456bca69c64">Parser::from_token</a>(<a class="code" href="../../de/d6f/class_sass_1_1_token.html">Token</a>(p+2, j), <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>).<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>();
<a name="l01527"></a>01527           interp_node-&gt;is_interpolant(<span class="keyword">true</span>);
<a name="l01528"></a>01528           (*schema) &lt;&lt; interp_node;
<a name="l01529"></a>01529           i = j;
<a name="l01530"></a>01530         }
<a name="l01531"></a>01531         <span class="keywordflow">else</span> {
<a name="l01532"></a>01532           <span class="comment">// throw an error if the interpolant is unterminated</span>
<a name="l01533"></a>01533           <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"unterminated interpolant inside IE function "</span> + str.to_string(), <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01534"></a>01534         }
<a name="l01535"></a>01535       }
<a name="l01536"></a>01536       <span class="keywordflow">else</span> { <span class="comment">// no interpolants left; add the last segment if nonempty</span>
<a name="l01537"></a>01537         <span class="keywordflow">if</span> (i &lt; str.end) {
<a name="l01538"></a>01538           <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>* part = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../da/d80/namespace_sass.html#59cd32148ab37912e137d5b799c460cf">normalize_wspace</a>(<span class="keywordtype">string</span>(i, str.end)));
<a name="l01539"></a>01539           part-&gt;is_delayed(<span class="keyword">true</span>);
<a name="l01540"></a>01540           part-&gt;quote_mark(<span class="charliteral">'*'</span>); <span class="comment">// avoid unquote in interpolation</span>
<a name="l01541"></a>01541           (*schema) &lt;&lt; part;
<a name="l01542"></a>01542         }
<a name="l01543"></a>01543         <span class="keywordflow">break</span>;
<a name="l01544"></a>01544       }
<a name="l01545"></a>01545     }
<a name="l01546"></a>01546     <span class="keywordflow">return</span> schema;
<a name="l01547"></a>01547   }
<a name="l01548"></a>01548 
<a name="l01549"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#43631e5c43b5f46ed8c603fad014e7b5">01549</a>   <a class="code" href="../../db/ddf/class_sass_1_1_string.html">String</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#43631e5c43b5f46ed8c603fad014e7b5">Parser::parse_ie_keyword_arg</a>()
<a name="l01550"></a>01550   {
<a name="l01551"></a>01551     <a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>* kwd_arg = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, 3);
<a name="l01552"></a>01552     <span class="keywordflow">if</span> (lex&lt; variable &gt;()) {
<a name="l01553"></a>01553       *kwd_arg &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d8/d41/class_sass_1_1_variable.html">Variable</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d0/d1c/namespace_sass_1_1_util.html#84d459f975b5bed53d97a712add3261f">Util::normalize_underscores</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>));
<a name="l01554"></a>01554     } <span class="keywordflow">else</span> {
<a name="l01555"></a>01555       lex&lt; alternatives&lt; identifier_schema, identifier &gt; &gt;();
<a name="l01556"></a>01556       *kwd_arg &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l01557"></a>01557     }
<a name="l01558"></a>01558     lex&lt; exactly&lt;'='&gt; &gt;();
<a name="l01559"></a>01559     *kwd_arg &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l01560"></a>01560     <span class="keywordflow">if</span> (peek&lt; variable &gt;()) *kwd_arg &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>();
<a name="l01561"></a>01561     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex&lt; number &gt;()) *kwd_arg &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/df5/class_sass_1_1_textual.html">Textual</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d7/df5/class_sass_1_1_textual.html#1d1cfd8ffb84e947f82999c682b666a712a90dfe20486bbe3e075afcd19ef2d0">Textual::NUMBER</a>, <a class="code" href="../../d0/d1c/namespace_sass_1_1_util.html#dd9b8d3310e19b3d13a6420a0c528a4b">Util::normalize_decimals</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>));
<a name="l01562"></a>01562     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek &lt; ie_keyword_arg_value &gt;()) { *kwd_arg &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>(); }
<a name="l01563"></a>01563     <span class="keywordflow">return</span> kwd_arg;
<a name="l01564"></a>01564   }
<a name="l01565"></a>01565 
<a name="l01566"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#8312bef879b5de894a835255a17c2b60">01566</a>   <a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#8312bef879b5de894a835255a17c2b60">Parser::parse_value_schema</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* stop)
<a name="l01567"></a>01567   {
<a name="l01568"></a>01568     <a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>* schema = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01569"></a>01569     <span class="keywordtype">size_t</span> num_items = 0;
<a name="l01570"></a>01570     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt;<a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'}'</span>&gt;&gt;()) {
<a name="l01571"></a>01571       <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1feaa8c1fed5779d5f15c46d66edb9a6">css_error</a>(<span class="stringliteral">"Invalid CSS"</span>, <span class="stringliteral">" after "</span>, <span class="stringliteral">": expected expression (e.g. 1px, bold), was "</span>);
<a name="l01572"></a>01572     }
<a name="l01573"></a>01573     <span class="keywordflow">while</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a> &lt; stop) {
<a name="l01574"></a>01574       <span class="keywordflow">if</span> (lex&lt; spaces &gt;() &amp;&amp; num_items) {
<a name="l01575"></a>01575         (*schema) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <span class="stringliteral">" "</span>);
<a name="l01576"></a>01576       }
<a name="l01577"></a>01577       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex&lt; interpolant &gt;()) {
<a name="l01578"></a>01578         <a class="code" href="../../de/d6f/class_sass_1_1_token.html">Token</a> insides(<a class="code" href="../../de/d6f/class_sass_1_1_token.html">Token</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>.<a class="code" href="../../de/d6f/class_sass_1_1_token.html#a06f03daa0de61d791a3c7855ee4378e">begin</a> + 2, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>.<a class="code" href="../../de/d6f/class_sass_1_1_token.html#a0c4bdeda46c4ae639e086c22fe5eed6">end</a> - 1));
<a name="l01579"></a>01579         <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* interp_node;
<a name="l01580"></a>01580         <a class="code" href="../../d4/d05/class_sass_1_1_parser.html">Parser</a> <a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a> = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#94df5be9293b174abe27b456bca69c64">Parser::from_token</a>(insides, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01581"></a>01581         <span class="keywordflow">if</span> (!(interp_node = p.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#2846d07cdfd7e30ab1a82568b17491f7">parse_static_expression</a>())) {
<a name="l01582"></a>01582           interp_node = p.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>();
<a name="l01583"></a>01583           interp_node-&gt;is_interpolant(<span class="keyword">true</span>);
<a name="l01584"></a>01584         }
<a name="l01585"></a>01585         (*schema) &lt;&lt; interp_node;
<a name="l01586"></a>01586       }
<a name="l01587"></a>01587       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; exactly&lt;'%'&gt; &gt;()) {
<a name="l01588"></a>01588         (*schema) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l01589"></a>01589       }
<a name="l01590"></a>01590       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex&lt; identifier &gt;()) {
<a name="l01591"></a>01591         (*schema) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l01592"></a>01592       }
<a name="l01593"></a>01593       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex&lt; percentage &gt;()) {
<a name="l01594"></a>01594         (*schema) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/df5/class_sass_1_1_textual.html">Textual</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d7/df5/class_sass_1_1_textual.html#1d1cfd8ffb84e947f82999c682b666a7ee7c061a4ea53ca0cd5717e800617b39">Textual::PERCENTAGE</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l01595"></a>01595       }
<a name="l01596"></a>01596       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex&lt; dimension &gt;()) {
<a name="l01597"></a>01597         (*schema) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/df5/class_sass_1_1_textual.html">Textual</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d7/df5/class_sass_1_1_textual.html#1d1cfd8ffb84e947f82999c682b666a7b76859fb31ae59096e234a3f32eac4f7">Textual::DIMENSION</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l01598"></a>01598       }
<a name="l01599"></a>01599       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex&lt; number &gt;()) {
<a name="l01600"></a>01600         <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* factor = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/df5/class_sass_1_1_textual.html">Textual</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d7/df5/class_sass_1_1_textual.html#1d1cfd8ffb84e947f82999c682b666a712a90dfe20486bbe3e075afcd19ef2d0">Textual::NUMBER</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l01601"></a>01601         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; class_char&lt; static_ops &gt; &gt;()) {
<a name="l01602"></a>01602           (*schema) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#77df8c05a0d0d11176c57f3d71866b19">parse_operators</a>(factor);
<a name="l01603"></a>01603         } <span class="keywordflow">else</span> {
<a name="l01604"></a>01604           (*schema) &lt;&lt; factor;
<a name="l01605"></a>01605         }
<a name="l01606"></a>01606       }
<a name="l01607"></a>01607       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex&lt; hex &gt;()) {
<a name="l01608"></a>01608         (*schema) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/df5/class_sass_1_1_textual.html">Textual</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d7/df5/class_sass_1_1_textual.html#1d1cfd8ffb84e947f82999c682b666a7d3c20094c5fe3327350484d01c44c137">Textual::HEX</a>, <a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>));
<a name="l01609"></a>01609       }
<a name="l01610"></a>01610       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a> &lt; exactly &lt; '-' &gt; &gt;()) {
<a name="l01611"></a>01611         (*schema) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l01612"></a>01612       }
<a name="l01613"></a>01613       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex&lt; quoted_string &gt;()) {
<a name="l01614"></a>01614         (*schema) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l01615"></a>01615       }
<a name="l01616"></a>01616       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex&lt; variable &gt;()) {
<a name="l01617"></a>01617         (*schema) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d8/d41/class_sass_1_1_variable.html">Variable</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d0/d1c/namespace_sass_1_1_util.html#84d459f975b5bed53d97a712add3261f">Util::normalize_underscores</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>));
<a name="l01618"></a>01618       }
<a name="l01619"></a>01619       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; parenthese_scope &gt;()) {
<a name="l01620"></a>01620         (*schema) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#7ffba33c7bbeec6294d952b928b0caf5">parse_factor</a>();
<a name="l01621"></a>01621       }
<a name="l01622"></a>01622       <span class="keywordflow">else</span> {
<a name="l01623"></a>01623         <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"error parsing interpolated value"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01624"></a>01624       }
<a name="l01625"></a>01625       ++num_items;
<a name="l01626"></a>01626     }
<a name="l01627"></a>01627     <span class="keywordflow">return</span> schema;
<a name="l01628"></a>01628   }
<a name="l01629"></a>01629 
<a name="l01630"></a>01630   <span class="comment">/* not used anymore - remove?</span>
<a name="l01631"></a>01631 <span class="comment">  String_Schema* Parser::parse_url_schema()</span>
<a name="l01632"></a>01632 <span class="comment">  {</span>
<a name="l01633"></a>01633 <span class="comment">    String_Schema* schema = new (ctx.mem) String_Schema(pstate);</span>
<a name="l01634"></a>01634 <span class="comment"></span>
<a name="l01635"></a>01635 <span class="comment">    while (position &lt; end) {</span>
<a name="l01636"></a>01636 <span class="comment">      if (position[0] == '/') {</span>
<a name="l01637"></a>01637 <span class="comment">        lexed = Token(position, position+1, before_token);</span>
<a name="l01638"></a>01638 <span class="comment">        (*schema) &lt;&lt; new (ctx.mem) String_Quoted(pstate, lexed);</span>
<a name="l01639"></a>01639 <span class="comment">        ++position;</span>
<a name="l01640"></a>01640 <span class="comment">      }</span>
<a name="l01641"></a>01641 <span class="comment">      else if (lex&lt; interpolant &gt;()) {</span>
<a name="l01642"></a>01642 <span class="comment">        Token insides(Token(lexed.begin + 2, lexed.end - 1, before_token));</span>
<a name="l01643"></a>01643 <span class="comment">        Expression* interp_node = Parser::from_token(insides, ctx, pstate).parse_list();</span>
<a name="l01644"></a>01644 <span class="comment">        interp_node-&gt;is_interpolant(true);</span>
<a name="l01645"></a>01645 <span class="comment">        (*schema) &lt;&lt; interp_node;</span>
<a name="l01646"></a>01646 <span class="comment">      }</span>
<a name="l01647"></a>01647 <span class="comment">      else if (lex&lt; sequence&lt; identifier, exactly&lt;':'&gt; &gt; &gt;()) {</span>
<a name="l01648"></a>01648 <span class="comment">        (*schema) &lt;&lt; new (ctx.mem) String_Quoted(pstate, lexed);</span>
<a name="l01649"></a>01649 <span class="comment">      }</span>
<a name="l01650"></a>01650 <span class="comment">      else if (lex&lt; filename &gt;()) {</span>
<a name="l01651"></a>01651 <span class="comment">        (*schema) &lt;&lt; new (ctx.mem) String_Quoted(pstate, lexed);</span>
<a name="l01652"></a>01652 <span class="comment">      }</span>
<a name="l01653"></a>01653 <span class="comment">      else {</span>
<a name="l01654"></a>01654 <span class="comment">        error("error parsing interpolated url", pstate);</span>
<a name="l01655"></a>01655 <span class="comment">      }</span>
<a name="l01656"></a>01656 <span class="comment">    }</span>
<a name="l01657"></a>01657 <span class="comment">    return schema;</span>
<a name="l01658"></a>01658 <span class="comment">  } */</span>
<a name="l01659"></a>01659 
<a name="l01660"></a>01660   <span class="comment">// this parses interpolation outside other strings</span>
<a name="l01661"></a>01661   <span class="comment">// means the result must not be quoted again later</span>
<a name="l01662"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#931c1d0e00e23404a2bdba77b4a3395f">01662</a>   <a class="code" href="../../db/ddf/class_sass_1_1_string.html">String</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#931c1d0e00e23404a2bdba77b4a3395f">Parser::parse_identifier_schema</a>()
<a name="l01663"></a>01663   {
<a name="l01664"></a>01664     <span class="comment">// first lex away whatever we have found</span>
<a name="l01665"></a>01665     lex&lt; sequence&lt; optional&lt; exactly&lt;'*'&gt; &gt;, <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#5ae7a74ebd405eaae34468993618db89">identifier_schema</a> &gt; &gt;();
<a name="l01666"></a>01666     <a class="code" href="../../de/d6f/class_sass_1_1_token.html">Token</a> id(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l01667"></a>01667     <span class="keyword">const</span> <span class="keywordtype">char</span>* i = <span class="keywordtype">id</span>.begin;
<a name="l01668"></a>01668     <span class="comment">// see if there any interpolants</span>
<a name="l01669"></a>01669     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a> = find_first_in_interval&lt; exactly&lt;hash_lbrace&gt; &gt;(<span class="keywordtype">id</span>.begin, <span class="keywordtype">id</span>.end);
<a name="l01670"></a>01670     <span class="keywordflow">if</span> (!p) {
<a name="l01671"></a>01671       <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <span class="keywordtype">string</span>(<span class="keywordtype">id</span>.begin, <span class="keywordtype">id</span>.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#a0c4bdeda46c4ae639e086c22fe5eed6">end</a>));
<a name="l01672"></a>01672     }
<a name="l01673"></a>01673 
<a name="l01674"></a>01674     <a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>* schema = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01675"></a>01675     <span class="keywordflow">while</span> (i &lt; <span class="keywordtype">id</span>.<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#a0c4bdeda46c4ae639e086c22fe5eed6">end</a>) {
<a name="l01676"></a>01676       p = find_first_in_interval&lt; exactly&lt;hash_lbrace&gt; &gt;(i, <span class="keywordtype">id</span>.end);
<a name="l01677"></a>01677       <span class="keywordflow">if</span> (p) {
<a name="l01678"></a>01678         <span class="keywordflow">if</span> (i &lt; p) {
<a name="l01679"></a>01679           <span class="comment">// accumulate the preceding segment if it's nonempty</span>
<a name="l01680"></a>01680           (*schema) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <span class="keywordtype">string</span>(i, p));
<a name="l01681"></a>01681         }
<a name="l01682"></a>01682         <span class="comment">// we need to skip anything inside strings</span>
<a name="l01683"></a>01683         <span class="comment">// create a new target in parser/prelexer</span>
<a name="l01684"></a>01684         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a> &lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#aaad40849adc9b974da5829dca52c1f9">sequence</a> &lt; optional_spaces, exactly&lt;rbrace&gt; &gt; &gt;(p+2)) { <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a> = p+2;
<a name="l01685"></a>01685           <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1feaa8c1fed5779d5f15c46d66edb9a6">css_error</a>(<span class="stringliteral">"Invalid CSS"</span>, <span class="stringliteral">" after "</span>, <span class="stringliteral">": expected expression (e.g. 1px, bold), was "</span>);
<a name="l01686"></a>01686         }
<a name="l01687"></a>01687         <span class="keyword">const</span> <span class="keywordtype">char</span>* j = skip_over_scopes&lt; exactly&lt;hash_lbrace&gt;, exactly&lt;rbrace&gt; &gt;(p+2, <span class="keywordtype">id</span>.end); <span class="comment">// find the closing brace</span>
<a name="l01688"></a>01688         <span class="keywordflow">if</span> (j) {
<a name="l01689"></a>01689           <span class="comment">// parse the interpolant and accumulate it</span>
<a name="l01690"></a>01690           <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* interp_node = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#94df5be9293b174abe27b456bca69c64">Parser::from_token</a>(<a class="code" href="../../de/d6f/class_sass_1_1_token.html">Token</a>(p+2, j), <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>).<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>();
<a name="l01691"></a>01691           interp_node-&gt;is_interpolant(<span class="keyword">true</span>);
<a name="l01692"></a>01692           (*schema) &lt;&lt; interp_node;
<a name="l01693"></a>01693           schema-&gt;has_interpolants(<span class="keyword">true</span>);
<a name="l01694"></a>01694           i = j;
<a name="l01695"></a>01695         }
<a name="l01696"></a>01696         <span class="keywordflow">else</span> {
<a name="l01697"></a>01697           <span class="comment">// throw an error if the interpolant is unterminated</span>
<a name="l01698"></a>01698           <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"unterminated interpolant inside interpolated identifier "</span> + <span class="keywordtype">id</span>.<a class="code" href="../../da/d80/namespace_sass.html#c098cb6b59a09dd2673ba0f3c23d8253">to_string</a>(), <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01699"></a>01699         }
<a name="l01700"></a>01700       }
<a name="l01701"></a>01701       <span class="keywordflow">else</span> { <span class="comment">// no interpolants left; add the last segment if nonempty</span>
<a name="l01702"></a>01702         <span class="keywordflow">if</span> (i &lt; end) (*schema) &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <span class="keywordtype">string</span>(i, <span class="keywordtype">id</span>.end));
<a name="l01703"></a>01703         <span class="keywordflow">break</span>;
<a name="l01704"></a>01704       }
<a name="l01705"></a>01705     }
<a name="l01706"></a>01706     <span class="keywordflow">return</span> schema;
<a name="l01707"></a>01707   }
<a name="l01708"></a>01708 
<a name="l01709"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#9e8a664f069d8a95d65b5f488c499c6f">01709</a>   <a class="code" href="../../d1/d00/class_sass_1_1_function___call.html">Function_Call</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#9e8a664f069d8a95d65b5f488c499c6f">Parser::parse_calc_function</a>()
<a name="l01710"></a>01710   {
<a name="l01711"></a>01711     lex&lt; identifier &gt;();
<a name="l01712"></a>01712     <span class="keywordtype">string</span> <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#db7e7d3cb8558e5c8c2c6ee7704b94ce">name</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l01713"></a>01713     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> call_pos = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l01714"></a>01714     lex&lt; exactly&lt;'('&gt; &gt;();
<a name="l01715"></a>01715     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> arg_pos = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l01716"></a>01716     <span class="keyword">const</span> <span class="keywordtype">char</span>* arg_beg = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>;
<a name="l01717"></a>01717     <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>();
<a name="l01718"></a>01718     <span class="keyword">const</span> <span class="keywordtype">char</span>* arg_end = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>;
<a name="l01719"></a>01719     lex&lt; exactly&lt;')'&gt; &gt;();
<a name="l01720"></a>01720 
<a name="l01721"></a>01721     <a class="code" href="../../de/d6a/class_sass_1_1_argument.html">Argument</a>* <a class="code" href="../../d1/ddf/namespacegyp_1_1msvs__emulation.html#4ef4a85aab5149bdab1fbd46db2fa082">arg</a> = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../de/d6a/class_sass_1_1_argument.html">Argument</a>(arg_pos, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#ba34a907f8619a5cbf26c8fb53f56324">parse_interpolated_chunk</a>(<a class="code" href="../../de/d6f/class_sass_1_1_token.html">Token</a>(arg_beg, arg_end)));
<a name="l01722"></a>01722     <a class="code" href="../../d0/d1a/class_sass_1_1_arguments.html">Arguments</a>* args = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d1a/class_sass_1_1_arguments.html">Arguments</a>(arg_pos);
<a name="l01723"></a>01723     *args &lt;&lt; arg;
<a name="l01724"></a>01724     <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d1/d00/class_sass_1_1_function___call.html">Function_Call</a>(call_pos, name, args);
<a name="l01725"></a>01725   }
<a name="l01726"></a>01726 
<a name="l01727"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1882ea2e7b26d148b95b96f48bdfa54c">01727</a>   <a class="code" href="../../d1/d00/class_sass_1_1_function___call.html">Function_Call</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1882ea2e7b26d148b95b96f48bdfa54c">Parser::parse_function_call</a>()
<a name="l01728"></a>01728   {
<a name="l01729"></a>01729     lex&lt; identifier &gt;();
<a name="l01730"></a>01730     <span class="keywordtype">string</span> <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#db7e7d3cb8558e5c8c2c6ee7704b94ce">name</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l01731"></a>01731 
<a name="l01732"></a>01732     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> call_pos = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l01733"></a>01733     <a class="code" href="../../d0/d1a/class_sass_1_1_arguments.html">Arguments</a>* args = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0835f4c42118fb9715d05ef8f0b64db0">parse_arguments</a>(name == <span class="stringliteral">"url"</span>);
<a name="l01734"></a>01734     <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d1/d00/class_sass_1_1_function___call.html">Function_Call</a>(call_pos, name, args);
<a name="l01735"></a>01735   }
<a name="l01736"></a>01736 
<a name="l01737"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b7df9965782e3de24d7fde5c04e4f5c9">01737</a>   <a class="code" href="../../d1/d9b/class_sass_1_1_function___call___schema.html">Function_Call_Schema</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b7df9965782e3de24d7fde5c04e4f5c9">Parser::parse_function_call_schema</a>()
<a name="l01738"></a>01738   {
<a name="l01739"></a>01739     <a class="code" href="../../db/ddf/class_sass_1_1_string.html">String</a>* <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#db7e7d3cb8558e5c8c2c6ee7704b94ce">name</a> = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#931c1d0e00e23404a2bdba77b4a3395f">parse_identifier_schema</a>();
<a name="l01740"></a>01740     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> source_position_of_call = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l01741"></a>01741 
<a name="l01742"></a>01742     <a class="code" href="../../d1/d9b/class_sass_1_1_function___call___schema.html">Function_Call_Schema</a>* the_call = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d1/d9b/class_sass_1_1_function___call___schema.html">Function_Call_Schema</a>(source_position_of_call, name, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0835f4c42118fb9715d05ef8f0b64db0">parse_arguments</a>());
<a name="l01743"></a>01743     <span class="keywordflow">return</span> the_call;
<a name="l01744"></a>01744   }
<a name="l01745"></a>01745 
<a name="l01746"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1ad949d68e3d770e0f8542332d5d343e">01746</a>   <a class="code" href="../../d1/dd7/class_sass_1_1_if.html">If</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1ad949d68e3d770e0f8542332d5d343e">Parser::parse_if_directive</a>(<span class="keywordtype">bool</span> else_if)
<a name="l01747"></a>01747   {
<a name="l01748"></a>01748     lex&lt; kwd_if_directive &gt;() || (else_if &amp;&amp; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; exactly&lt;if_after_else_kwd&gt; &gt;());
<a name="l01749"></a>01749     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> if_source_position = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l01750"></a>01750     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* predicate = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>();
<a name="l01751"></a>01751     predicate-&gt;is_delayed(<span class="keyword">false</span>);
<a name="l01752"></a>01752     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt; &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"expected '{' after the predicate for @if"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01753"></a>01753     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* consequent = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#95ac245b6f5628b59c54b9e66475e6eb">parse_block</a>();
<a name="l01754"></a>01754     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* alternative = 0;
<a name="l01755"></a>01755 
<a name="l01756"></a>01756     <span class="keywordflow">if</span> (lex&lt; elseif_directive &gt;()) {
<a name="l01757"></a>01757       alternative = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01758"></a>01758       (*alternative) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1ad949d68e3d770e0f8542332d5d343e">parse_if_directive</a>(<span class="keyword">true</span>);
<a name="l01759"></a>01759     }
<a name="l01760"></a>01760     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex&lt; kwd_else_directive &gt;()) {
<a name="l01761"></a>01761       <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt; &gt;()) {
<a name="l01762"></a>01762         <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"expected '{' after @else"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01763"></a>01763       }
<a name="l01764"></a>01764       <span class="keywordflow">else</span> {
<a name="l01765"></a>01765         alternative = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#95ac245b6f5628b59c54b9e66475e6eb">parse_block</a>();
<a name="l01766"></a>01766       }
<a name="l01767"></a>01767     }
<a name="l01768"></a>01768     <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d1/dd7/class_sass_1_1_if.html">If</a>(if_source_position, predicate, consequent, alternative);
<a name="l01769"></a>01769   }
<a name="l01770"></a>01770 
<a name="l01771"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#71f8e8989c349a9aba1a9bdb029fbdb9">01771</a>   <a class="code" href="../../db/d5a/class_sass_1_1_for.html">For</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#71f8e8989c349a9aba1a9bdb029fbdb9">Parser::parse_for_directive</a>()
<a name="l01772"></a>01772   {
<a name="l01773"></a>01773     lex&lt; kwd_for_directive &gt;();
<a name="l01774"></a>01774     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> for_source_position = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l01775"></a>01775     <span class="keywordflow">if</span> (!lex&lt; variable &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"@for directive requires an iteration variable"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01776"></a>01776     <span class="keywordtype">string</span> var(<a class="code" href="../../d0/d1c/namespace_sass_1_1_util.html#84d459f975b5bed53d97a712add3261f">Util::normalize_underscores</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>));
<a name="l01777"></a>01777     <span class="keywordflow">if</span> (!lex&lt; kwd_from &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"expected 'from' keyword in @for directive"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01778"></a>01778     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* lower_bound = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#47213487dc8aec6fc011d7307b7bdea6">parse_expression</a>();
<a name="l01779"></a>01779     lower_bound-&gt;is_delayed(<span class="keyword">false</span>);
<a name="l01780"></a>01780     <span class="keywordtype">bool</span> inclusive = <span class="keyword">false</span>;
<a name="l01781"></a>01781     <span class="keywordflow">if</span> (lex&lt; kwd_through &gt;()) inclusive = <span class="keyword">true</span>;
<a name="l01782"></a>01782     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex&lt; kwd_to &gt;()) inclusive = <span class="keyword">false</span>;
<a name="l01783"></a>01783     <span class="keywordflow">else</span>                  <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"expected 'through' or 'to' keyword in @for directive"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01784"></a>01784     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* upper_bound = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#47213487dc8aec6fc011d7307b7bdea6">parse_expression</a>();
<a name="l01785"></a>01785     upper_bound-&gt;is_delayed(<span class="keyword">false</span>);
<a name="l01786"></a>01786     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt; &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"expected '{' after the upper bound in @for directive"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01787"></a>01787     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* body = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#95ac245b6f5628b59c54b9e66475e6eb">parse_block</a>();
<a name="l01788"></a>01788     <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d5a/class_sass_1_1_for.html">For</a>(for_source_position, var, lower_bound, upper_bound, body, inclusive);
<a name="l01789"></a>01789   }
<a name="l01790"></a>01790 
<a name="l01791"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#10643159cd6540b6b2ad132c7205f076">01791</a>   <a class="code" href="../../d7/d5e/class_sass_1_1_each.html">Each</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#10643159cd6540b6b2ad132c7205f076">Parser::parse_each_directive</a>()
<a name="l01792"></a>01792   {
<a name="l01793"></a>01793     lex &lt; kwd_each_directive &gt;();
<a name="l01794"></a>01794     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> each_source_position = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l01795"></a>01795     <span class="keywordflow">if</span> (!lex&lt; variable &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"@each directive requires an iteration variable"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01796"></a>01796     vector&lt;string&gt; vars;
<a name="l01797"></a>01797     vars.push_back(<a class="code" href="../../d0/d1c/namespace_sass_1_1_util.html#84d459f975b5bed53d97a712add3261f">Util::normalize_underscores</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>));
<a name="l01798"></a>01798     <span class="keywordflow">while</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; exactly&lt;','&gt; &gt;()) {
<a name="l01799"></a>01799       <span class="keywordflow">if</span> (!lex&lt; variable &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"@each directive requires an iteration variable"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01800"></a>01800       vars.push_back(<a class="code" href="../../d0/d1c/namespace_sass_1_1_util.html#84d459f975b5bed53d97a712add3261f">Util::normalize_underscores</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>));
<a name="l01801"></a>01801     }
<a name="l01802"></a>01802     <span class="keywordflow">if</span> (!lex&lt; kwd_in &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"expected 'in' keyword in @each directive"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01803"></a>01803     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* list = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>();
<a name="l01804"></a>01804     list-&gt;is_delayed(<span class="keyword">false</span>);
<a name="l01805"></a>01805     <span class="keywordflow">if</span> (list-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86825688e799536738ea469158ef15fd1c0">Expression::LIST</a>) {
<a name="l01806"></a>01806       <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* <a class="code" href="../../d4/d9b/common_8inc_8php.html#367c038113690266a013d2e04a42a3b1" title="Shorthand method for the Localization::localize method.">l</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>*<span class="keyword">&gt;</span>(list);
<a name="l01807"></a>01807       <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, L = l-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>(); i &lt; L; ++i) {
<a name="l01808"></a>01808         (*l)[i]-&gt;is_delayed(<span class="keyword">false</span>);
<a name="l01809"></a>01809       }
<a name="l01810"></a>01810     }
<a name="l01811"></a>01811     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt; &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"expected '{' after the upper bound in @each directive"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01812"></a>01812     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* body = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#95ac245b6f5628b59c54b9e66475e6eb">parse_block</a>();
<a name="l01813"></a>01813     <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d5e/class_sass_1_1_each.html">Each</a>(each_source_position, vars, list, body);
<a name="l01814"></a>01814   }
<a name="l01815"></a>01815 
<a name="l01816"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#31cc372ecb3b26334501ff6a108115c7">01816</a>   <a class="code" href="../../d3/d55/class_sass_1_1_while.html">While</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#31cc372ecb3b26334501ff6a108115c7">Parser::parse_while_directive</a>()
<a name="l01817"></a>01817   {
<a name="l01818"></a>01818     lex&lt; kwd_while_directive &gt;();
<a name="l01819"></a>01819     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> while_source_position = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l01820"></a>01820     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* predicate = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>();
<a name="l01821"></a>01821     predicate-&gt;is_delayed(<span class="keyword">false</span>);
<a name="l01822"></a>01822     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* body = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#95ac245b6f5628b59c54b9e66475e6eb">parse_block</a>();
<a name="l01823"></a>01823     <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d3/d55/class_sass_1_1_while.html">While</a>(while_source_position, predicate, body);
<a name="l01824"></a>01824   }
<a name="l01825"></a>01825 
<a name="l01826"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#72a77c7065bc2b94e634b52c6a756bd1">01826</a>   <a class="code" href="../../d7/dd1/class_sass_1_1_media___block.html">Media_Block</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#72a77c7065bc2b94e634b52c6a756bd1">Parser::parse_media_block</a>()
<a name="l01827"></a>01827   {
<a name="l01828"></a>01828     lex&lt; kwd_media &gt;();
<a name="l01829"></a>01829     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> media_source_position = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l01830"></a>01830 
<a name="l01831"></a>01831     <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* media_queries = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#97fc4bce55cd995fd6c3632f49a40056">parse_media_queries</a>();
<a name="l01832"></a>01832 
<a name="l01833"></a>01833     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt; &gt;()) {
<a name="l01834"></a>01834       <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"expected '{' in media query"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01835"></a>01835     }
<a name="l01836"></a>01836     <a class="code" href="../../d7/dd1/class_sass_1_1_media___block.html">Media_Block</a>* media_block = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/dd1/class_sass_1_1_media___block.html">Media_Block</a>(media_source_position, media_queries, 0);
<a name="l01837"></a>01837     <a class="code" href="../../d7/dd1/class_sass_1_1_media___block.html">Media_Block</a>* prev_media_block = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#4163fdd782b03cff85462e00a98183e1">last_media_block</a>;
<a name="l01838"></a>01838     <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#4163fdd782b03cff85462e00a98183e1">last_media_block</a> = media_block;
<a name="l01839"></a>01839     media_block-&gt;<a class="code" href="../../de/d02/class_sass_1_1_statement.html#40bf4a3f15e120a4967308486b2ddb21">block</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#95ac245b6f5628b59c54b9e66475e6eb">parse_block</a>());
<a name="l01840"></a>01840     <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#4163fdd782b03cff85462e00a98183e1">last_media_block</a> = prev_media_block;
<a name="l01841"></a>01841 
<a name="l01842"></a>01842     <span class="keywordflow">return</span> media_block;
<a name="l01843"></a>01843   }
<a name="l01844"></a>01844 
<a name="l01845"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#97fc4bce55cd995fd6c3632f49a40056">01845</a>   <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#97fc4bce55cd995fd6c3632f49a40056">Parser::parse_media_queries</a>()
<a name="l01846"></a>01846   {
<a name="l01847"></a>01847     <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* media_queries = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, 0, <a class="code" href="../../db/d2b/class_sass_1_1_list.html#9388a3ccf62a50f047b10c2d99114bcef81277bcd86412fe04bb68718ea09392">List::COMMA</a>);
<a name="l01848"></a>01848     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt; &gt;()) (*media_queries) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0957af54e7a56bb39a2b1a8166f830e9">parse_media_query</a>();
<a name="l01849"></a>01849     <span class="keywordflow">while</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; exactly&lt;','&gt; &gt;()) (*media_queries) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0957af54e7a56bb39a2b1a8166f830e9">parse_media_query</a>();
<a name="l01850"></a>01850     <span class="keywordflow">return</span> media_queries;
<a name="l01851"></a>01851   }
<a name="l01852"></a>01852 
<a name="l01853"></a>01853   <span class="comment">// Expression* Parser::parse_media_query()</span>
<a name="l01854"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0957af54e7a56bb39a2b1a8166f830e9">01854</a>   <a class="code" href="../../d7/d62/class_sass_1_1_media___query.html">Media_Query</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0957af54e7a56bb39a2b1a8166f830e9">Parser::parse_media_query</a>()
<a name="l01855"></a>01855   {
<a name="l01856"></a>01856     <a class="code" href="../../d7/d62/class_sass_1_1_media___query.html">Media_Query</a>* media_query = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d62/class_sass_1_1_media___query.html">Media_Query</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01857"></a>01857 
<a name="l01858"></a>01858     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; exactly&lt; not_kwd &gt; &gt;()) media_query-&gt;is_negated(<span class="keyword">true</span>);
<a name="l01859"></a>01859     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; exactly&lt; only_kwd &gt; &gt;()) media_query-&gt;is_restricted(<span class="keyword">true</span>);
<a name="l01860"></a>01860 
<a name="l01861"></a>01861     <span class="keywordflow">if</span> (peek&lt; identifier_schema &gt;()) media_query-&gt;media_type(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#931c1d0e00e23404a2bdba77b4a3395f">parse_identifier_schema</a>());
<a name="l01862"></a>01862     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lex&lt; identifier &gt;())    media_query-&gt;media_type(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#ba34a907f8619a5cbf26c8fb53f56324">parse_interpolated_chunk</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>));
<a name="l01863"></a>01863     <span class="keywordflow">else</span>                             (*media_query) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#9ea892b71648c29bcd27454731fb71d4">parse_media_expression</a>();
<a name="l01864"></a>01864 
<a name="l01865"></a>01865     <span class="keywordflow">while</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; exactly&lt; and_kwd &gt; &gt;()) (*media_query) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#9ea892b71648c29bcd27454731fb71d4">parse_media_expression</a>();
<a name="l01866"></a>01866     <span class="keywordflow">if</span> (peek&lt; identifier_schema &gt;()) {
<a name="l01867"></a>01867       <a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>* schema = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01868"></a>01868       *schema &lt;&lt; media_query-&gt;media_type();
<a name="l01869"></a>01869       *schema &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <span class="stringliteral">" "</span>);
<a name="l01870"></a>01870       *schema &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#931c1d0e00e23404a2bdba77b4a3395f">parse_identifier_schema</a>();
<a name="l01871"></a>01871       media_query-&gt;media_type(schema);
<a name="l01872"></a>01872     }
<a name="l01873"></a>01873     <span class="keywordflow">while</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; exactly&lt; and_kwd &gt; &gt;()) (*media_query) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#9ea892b71648c29bcd27454731fb71d4">parse_media_expression</a>();
<a name="l01874"></a>01874     <span class="keywordflow">return</span> media_query;
<a name="l01875"></a>01875   }
<a name="l01876"></a>01876 
<a name="l01877"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#9ea892b71648c29bcd27454731fb71d4">01877</a>   <a class="code" href="../../df/d31/class_sass_1_1_media___query___expression.html">Media_Query_Expression</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#9ea892b71648c29bcd27454731fb71d4">Parser::parse_media_expression</a>()
<a name="l01878"></a>01878   {
<a name="l01879"></a>01879     <span class="keywordflow">if</span> (peek&lt; identifier_schema &gt;()) {
<a name="l01880"></a>01880       <a class="code" href="../../db/ddf/class_sass_1_1_string.html">String</a>* ss = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#931c1d0e00e23404a2bdba77b4a3395f">parse_identifier_schema</a>();
<a name="l01881"></a>01881       <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../df/d31/class_sass_1_1_media___query___expression.html">Media_Query_Expression</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, ss, 0, <span class="keyword">true</span>);
<a name="l01882"></a>01882     }
<a name="l01883"></a>01883     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'('</span>&gt; &gt;()) {
<a name="l01884"></a>01884       <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"media query expression must begin with '('"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01885"></a>01885     }
<a name="l01886"></a>01886     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* feature = 0;
<a name="l01887"></a>01887     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt; &gt;()) {
<a name="l01888"></a>01888       <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"media feature required in media query expression"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01889"></a>01889     }
<a name="l01890"></a>01890     feature = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#47213487dc8aec6fc011d7307b7bdea6">parse_expression</a>();
<a name="l01891"></a>01891     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* expression = 0;
<a name="l01892"></a>01892     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; exactly&lt;':'&gt; &gt;()) {
<a name="l01893"></a>01893       expression = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>();
<a name="l01894"></a>01894     }
<a name="l01895"></a>01895     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt; &gt;()) {
<a name="l01896"></a>01896       <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"unclosed parenthesis in media query expression"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01897"></a>01897     }
<a name="l01898"></a>01898     <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../df/d31/class_sass_1_1_media___query___expression.html">Media_Query_Expression</a>(feature-&gt;pstate(), feature, expression);
<a name="l01899"></a>01899   }
<a name="l01900"></a>01900 
<a name="l01901"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#d0b9336e9de03fdf1d91cc26b71c8923">01901</a>   <a class="code" href="../../d6/d28/class_sass_1_1_feature___block.html">Feature_Block</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#d0b9336e9de03fdf1d91cc26b71c8923">Parser::parse_feature_block</a>()
<a name="l01902"></a>01902   {
<a name="l01903"></a>01903     lex&lt; kwd_supports &gt;();
<a name="l01904"></a>01904     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> supports_source_position = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l01905"></a>01905 
<a name="l01906"></a>01906     <a class="code" href="../../da/da9/class_sass_1_1_feature___query.html">Feature_Query</a>* feature_queries = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#62181de480974e2a11a0078deed0fc53">parse_feature_queries</a>();
<a name="l01907"></a>01907 
<a name="l01908"></a>01908     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt; &gt;()) {
<a name="l01909"></a>01909       <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"expected '{' in feature query"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01910"></a>01910     }
<a name="l01911"></a>01911     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* block = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#95ac245b6f5628b59c54b9e66475e6eb">parse_block</a>();
<a name="l01912"></a>01912 
<a name="l01913"></a>01913     <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d6/d28/class_sass_1_1_feature___block.html">Feature_Block</a>(supports_source_position, feature_queries, block);
<a name="l01914"></a>01914   }
<a name="l01915"></a>01915 
<a name="l01916"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#62181de480974e2a11a0078deed0fc53">01916</a>   <a class="code" href="../../da/da9/class_sass_1_1_feature___query.html">Feature_Query</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#62181de480974e2a11a0078deed0fc53">Parser::parse_feature_queries</a>()
<a name="l01917"></a>01917   {
<a name="l01918"></a>01918     <a class="code" href="../../da/da9/class_sass_1_1_feature___query.html">Feature_Query</a>* fq = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../da/da9/class_sass_1_1_feature___query.html">Feature_Query</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01919"></a>01919     <a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html">Feature_Query_Condition</a>* cond = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html">Feature_Query_Condition</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01920"></a>01920     cond-&gt;is_root(<span class="keyword">true</span>);
<a name="l01921"></a>01921     <span class="keywordflow">while</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt; &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>) &amp;&amp; !<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt; &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>))
<a name="l01922"></a>01922       (*cond) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#96cb5514365b08dc03a77abc64da3471">parse_feature_query</a>();
<a name="l01923"></a>01923     (*fq) &lt;&lt; cond;
<a name="l01924"></a>01924 
<a name="l01925"></a>01925     <span class="keywordflow">if</span> (fq-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#c6e61de369e994009e36f344f99c15ad">empty</a>()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"expected @supports condition (e.g. (display: flexbox))"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01926"></a>01926 
<a name="l01927"></a>01927     <span class="keywordflow">return</span> fq;
<a name="l01928"></a>01928   }
<a name="l01929"></a>01929 
<a name="l01930"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#96cb5514365b08dc03a77abc64da3471">01930</a>   <a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html">Feature_Query_Condition</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#96cb5514365b08dc03a77abc64da3471">Parser::parse_feature_query</a>()
<a name="l01931"></a>01931   {
<a name="l01932"></a>01932     <span class="keywordflow">if</span> (peek&lt; kwd_not &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>)) <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#c1ca9a63a16333947ac352abf9691dee">parse_supports_negation</a>();
<a name="l01933"></a>01933     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; kwd_and &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>)) <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0d73ed4647523375d03741dbfcfedc87">parse_supports_conjunction</a>();
<a name="l01934"></a>01934     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peek&lt; kwd_or &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>)) <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#135bd4597b967ac31c7044c17894a902">parse_supports_disjunction</a>();
<a name="l01935"></a>01935     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'('</span>&gt; &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>)) <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#fc17e626b828bd8d3ba88ed40713ab3b">parse_feature_query_in_parens</a>();
<a name="l01936"></a>01936     <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0d09c10fefd3e83bea8c76eda4ee72fe">parse_supports_declaration</a>();
<a name="l01937"></a>01937   }
<a name="l01938"></a>01938 
<a name="l01939"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#fc17e626b828bd8d3ba88ed40713ab3b">01939</a>   <a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html">Feature_Query_Condition</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#fc17e626b828bd8d3ba88ed40713ab3b">Parser::parse_feature_query_in_parens</a>()
<a name="l01940"></a>01940   {
<a name="l01941"></a>01941     <a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html">Feature_Query_Condition</a>* cond = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html">Feature_Query_Condition</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01942"></a>01942 
<a name="l01943"></a>01943     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'('</span>&gt; &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"@supports declaration expected '('"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01944"></a>01944     <span class="keywordflow">while</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt; &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>) &amp;&amp; !<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt; &gt;(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>))
<a name="l01945"></a>01945       (*cond) &lt;&lt; <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#96cb5514365b08dc03a77abc64da3471">parse_feature_query</a>();
<a name="l01946"></a>01946     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt; &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"unclosed parenthesis in @supports declaration"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l01947"></a>01947 
<a name="l01948"></a>01948     <span class="keywordflow">return</span> (cond-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>() == 1) ? (*cond)[0] : cond;
<a name="l01949"></a>01949   }
<a name="l01950"></a>01950 
<a name="l01951"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#c1ca9a63a16333947ac352abf9691dee">01951</a>   <a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html">Feature_Query_Condition</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#c1ca9a63a16333947ac352abf9691dee">Parser::parse_supports_negation</a>()
<a name="l01952"></a>01952   {
<a name="l01953"></a>01953     lex&lt; kwd_not &gt;();
<a name="l01954"></a>01954 
<a name="l01955"></a>01955     <a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html">Feature_Query_Condition</a>* cond = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#96cb5514365b08dc03a77abc64da3471">parse_feature_query</a>();
<a name="l01956"></a>01956     cond-&gt;operand(<a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html#0cab31dfe640baa3b72c492ed1d0a4a90378ebc895849163b249d0b330257dd6">Feature_Query_Condition::NOT</a>);
<a name="l01957"></a>01957 
<a name="l01958"></a>01958     <span class="keywordflow">return</span> cond;
<a name="l01959"></a>01959   }
<a name="l01960"></a>01960 
<a name="l01961"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0d73ed4647523375d03741dbfcfedc87">01961</a>   <a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html">Feature_Query_Condition</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0d73ed4647523375d03741dbfcfedc87">Parser::parse_supports_conjunction</a>()
<a name="l01962"></a>01962   {
<a name="l01963"></a>01963     lex&lt; kwd_and &gt;();
<a name="l01964"></a>01964 
<a name="l01965"></a>01965     <a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html">Feature_Query_Condition</a>* cond = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#96cb5514365b08dc03a77abc64da3471">parse_feature_query</a>();
<a name="l01966"></a>01966     cond-&gt;operand(<a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html#0cab31dfe640baa3b72c492ed1d0a4a9865555c9f2e0458a7078486aa1b3254f">Feature_Query_Condition::AND</a>);
<a name="l01967"></a>01967 
<a name="l01968"></a>01968     <span class="keywordflow">return</span> cond;
<a name="l01969"></a>01969   }
<a name="l01970"></a>01970 
<a name="l01971"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#135bd4597b967ac31c7044c17894a902">01971</a>   <a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html">Feature_Query_Condition</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#135bd4597b967ac31c7044c17894a902">Parser::parse_supports_disjunction</a>()
<a name="l01972"></a>01972   {
<a name="l01973"></a>01973     lex&lt; kwd_or &gt;();
<a name="l01974"></a>01974 
<a name="l01975"></a>01975     <a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html">Feature_Query_Condition</a>* cond = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#96cb5514365b08dc03a77abc64da3471">parse_feature_query</a>();
<a name="l01976"></a>01976     cond-&gt;operand(<a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html#0cab31dfe640baa3b72c492ed1d0a4a996727447c0ad447987df1c6415aef074">Feature_Query_Condition::OR</a>);
<a name="l01977"></a>01977 
<a name="l01978"></a>01978     <span class="keywordflow">return</span> cond;
<a name="l01979"></a>01979   }
<a name="l01980"></a>01980 
<a name="l01981"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0d09c10fefd3e83bea8c76eda4ee72fe">01981</a>   <a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html">Feature_Query_Condition</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0d09c10fefd3e83bea8c76eda4ee72fe">Parser::parse_supports_declaration</a>()
<a name="l01982"></a>01982   {
<a name="l01983"></a>01983     <a class="code" href="../../dd/d40/class_sass_1_1_declaration.html">Declaration</a>* declaration = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#ac040287d615641c146dca1e92bf77a8">parse_declaration</a>();
<a name="l01984"></a>01984     <a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html">Feature_Query_Condition</a>* cond = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html">Feature_Query_Condition</a>(declaration-&gt;pstate(),
<a name="l01985"></a>01985                                                                           1,
<a name="l01986"></a>01986                                                                           declaration-&gt;property(),
<a name="l01987"></a>01987                                                                           declaration-&gt;value());
<a name="l01988"></a>01988     <span class="keywordflow">return</span> cond;
<a name="l01989"></a>01989   }
<a name="l01990"></a>01990 
<a name="l01991"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#d60a4e9e0fe28810edb0ec424b51a3d1">01991</a>   <a class="code" href="../../d9/d36/class_sass_1_1_at___root___block.html">At_Root_Block</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#d60a4e9e0fe28810edb0ec424b51a3d1">Parser::parse_at_root_block</a>()
<a name="l01992"></a>01992   {
<a name="l01993"></a>01993     lex&lt;kwd_at_root&gt;();
<a name="l01994"></a>01994     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> at_source_position = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l01995"></a>01995     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* body = 0;
<a name="l01996"></a>01996     <a class="code" href="../../d1/d41/class_sass_1_1_at___root___expression.html">At_Root_Expression</a>* expr = 0;
<a name="l01997"></a>01997     <a class="code" href="../../de/d42/struct_selector___lookahead.html">Selector_Lookahead</a> lookahead_result;
<a name="l01998"></a>01998     <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#a33c6a9bfe6c0671c3a6c6ab77aee0ea">in_at_root</a> = <span class="keyword">true</span>;
<a name="l01999"></a>01999     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'('</span>&gt; &gt;()) {
<a name="l02000"></a>02000       expr = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#de7d48f704b6b58f0e29aa203666c1a9">parse_at_root_expression</a>();
<a name="l02001"></a>02001       body = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#95ac245b6f5628b59c54b9e66475e6eb">parse_block</a>();
<a name="l02002"></a>02002     }
<a name="l02003"></a>02003     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt; &gt;()) {
<a name="l02004"></a>02004       body = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#95ac245b6f5628b59c54b9e66475e6eb">parse_block</a>();
<a name="l02005"></a>02005     }
<a name="l02006"></a>02006     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((lookahead_result = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#8c0d385a19385a41fc6c18d7d6512e2e">lookahead_for_selector</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>)).found) {
<a name="l02007"></a>02007       <a class="code" href="../../d3/d35/class_sass_1_1_ruleset.html">Ruleset</a>* r = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#318ff1f7e78823a56e9bb64f409321ce">parse_ruleset</a>(lookahead_result);
<a name="l02008"></a>02008       body = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>(r-&gt;pstate(), 1);
<a name="l02009"></a>02009       *body &lt;&lt; r;
<a name="l02010"></a>02010     }
<a name="l02011"></a>02011     <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#a33c6a9bfe6c0671c3a6c6ab77aee0ea">in_at_root</a> = <span class="keyword">false</span>;
<a name="l02012"></a>02012     <a class="code" href="../../d9/d36/class_sass_1_1_at___root___block.html">At_Root_Block</a>* at_root = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d9/d36/class_sass_1_1_at___root___block.html">At_Root_Block</a>(at_source_position, body);
<a name="l02013"></a>02013     <span class="keywordflow">if</span> (expr) at_root-&gt;expression(expr);
<a name="l02014"></a>02014     <span class="keywordflow">return</span> at_root;
<a name="l02015"></a>02015   }
<a name="l02016"></a>02016 
<a name="l02017"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#de7d48f704b6b58f0e29aa203666c1a9">02017</a>   <a class="code" href="../../d1/d41/class_sass_1_1_at___root___expression.html">At_Root_Expression</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#de7d48f704b6b58f0e29aa203666c1a9">Parser::parse_at_root_expression</a>()
<a name="l02018"></a>02018   {
<a name="l02019"></a>02019     lex&lt; exactly&lt;'('&gt; &gt;();
<a name="l02020"></a>02020     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt; &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"at-root feature required in at-root expression"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l02021"></a>02021 
<a name="l02022"></a>02022     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; alternatives&lt; kwd_with_directive, kwd_without_directive &gt; &gt;()) {
<a name="l02023"></a>02023       <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1feaa8c1fed5779d5f15c46d66edb9a6">css_error</a>(<span class="stringliteral">"Invalid CSS"</span>, <span class="stringliteral">" after "</span>, <span class="stringliteral">": expected \"with\" or \"without\", was "</span>);
<a name="l02024"></a>02024     }
<a name="l02025"></a>02025 
<a name="l02026"></a>02026     <a class="code" href="../../dd/d40/class_sass_1_1_declaration.html">Declaration</a>* declaration = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#ac040287d615641c146dca1e92bf77a8">parse_declaration</a>();
<a name="l02027"></a>02027     <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* value = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>(declaration-&gt;value()-&gt;pstate(), 1);
<a name="l02028"></a>02028 
<a name="l02029"></a>02029     <span class="keywordflow">if</span> (declaration-&gt;value()-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86825688e799536738ea469158ef15fd1c0">Expression::LIST</a>) {
<a name="l02030"></a>02030         value = <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>*<span class="keyword">&gt;</span>(declaration-&gt;value());
<a name="l02031"></a>02031     }
<a name="l02032"></a>02032     <span class="keywordflow">else</span> *value &lt;&lt; declaration-&gt;value();
<a name="l02033"></a>02033 
<a name="l02034"></a>02034     <a class="code" href="../../d1/d41/class_sass_1_1_at___root___expression.html">At_Root_Expression</a>* cond = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d1/d41/class_sass_1_1_at___root___expression.html">At_Root_Expression</a>(declaration-&gt;pstate(),
<a name="l02035"></a>02035                                                                 declaration-&gt;property(),
<a name="l02036"></a>02036                                                                 value);
<a name="l02037"></a>02037     <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#0b2c0de4346d2e848d1434d432df86c9">lex</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt; &gt;()) <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">error</a>(<span class="stringliteral">"unclosed parenthesis in @at-root expression"</span>, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>);
<a name="l02038"></a>02038     <span class="keywordflow">return</span> cond;
<a name="l02039"></a>02039   }
<a name="l02040"></a>02040 
<a name="l02041"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#a84065b8a99ac8d0d89f67afa4eda664">02041</a>   <a class="code" href="../../d9/d0b/class_sass_1_1_at___rule.html">At_Rule</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#a84065b8a99ac8d0d89f67afa4eda664">Parser::parse_at_rule</a>()
<a name="l02042"></a>02042   {
<a name="l02043"></a>02043     lex&lt;at_keyword&gt;();
<a name="l02044"></a>02044     <span class="keywordtype">string</span> kwd(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dbd35b0f06ad7bd56ea4ff87d378cdeb">lexed</a>);
<a name="l02045"></a>02045     <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> at_source_position = <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>;
<a name="l02046"></a>02046     <a class="code" href="../../df/d05/class_sass_1_1_selector.html">Selector</a>* sel = 0;
<a name="l02047"></a>02047     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* val = 0;
<a name="l02048"></a>02048     <a class="code" href="../../de/d42/struct_selector___lookahead.html">Selector_Lookahead</a> lookahead = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#5080e96cd8d0c75bd31a7ad9c3ea106f">lookahead_for_extension_target</a>(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>);
<a name="l02049"></a>02049     <span class="keywordflow">if</span> (lookahead.<a class="code" href="../../de/d42/struct_selector___lookahead.html#d9cbff2850c6b423399b8e2dba1b564e">found</a>) {
<a name="l02050"></a>02050       <span class="keywordflow">if</span> (lookahead.<a class="code" href="../../de/d42/struct_selector___lookahead.html#4ee9331295a04ad1ff50e8af58f30648">has_interpolants</a>) {
<a name="l02051"></a>02051         sel = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#da95029f8fe693f13d49f9b1465daf50">parse_selector_schema</a>(lookahead.<a class="code" href="../../de/d42/struct_selector___lookahead.html#d9cbff2850c6b423399b8e2dba1b564e">found</a>);
<a name="l02052"></a>02052       }
<a name="l02053"></a>02053       <span class="keywordflow">else</span> {
<a name="l02054"></a>02054         sel = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#780542b782a7ad33fed8792314100ba8">parse_selector_group</a>();
<a name="l02055"></a>02055       }
<a name="l02056"></a>02056     }
<a name="l02057"></a>02057     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt;<a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt; &gt;() || <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt;<a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'}'</span>&gt; &gt;() || <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt;exactly&lt;';'&gt; &gt;())) {
<a name="l02058"></a>02058       val = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>();
<a name="l02059"></a>02059     }
<a name="l02060"></a>02060     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* body = 0;
<a name="l02061"></a>02061     <span class="keywordflow">if</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'{'</span>&gt; &gt;()) body = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#95ac245b6f5628b59c54b9e66475e6eb">parse_block</a>();
<a name="l02062"></a>02062     <a class="code" href="../../d9/d0b/class_sass_1_1_at___rule.html">At_Rule</a>* rule = <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d9/d0b/class_sass_1_1_at___rule.html">At_Rule</a>(at_source_position, kwd, sel, body);
<a name="l02063"></a>02063     <span class="keywordflow">if</span> (!sel) rule-&gt;value(val);
<a name="l02064"></a>02064     <span class="keywordflow">return</span> rule;
<a name="l02065"></a>02065   }
<a name="l02066"></a>02066 
<a name="l02067"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#01fdc25917d0cf05c0293c8d0d1d198f">02067</a>   <a class="code" href="../../d3/d5e/class_sass_1_1_warning.html">Warning</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#01fdc25917d0cf05c0293c8d0d1d198f">Parser::parse_warning</a>()
<a name="l02068"></a>02068   {
<a name="l02069"></a>02069     lex&lt; kwd_warn &gt;();
<a name="l02070"></a>02070     <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d3/d5e/class_sass_1_1_warning.html">Warning</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>());
<a name="l02071"></a>02071   }
<a name="l02072"></a>02072 
<a name="l02073"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#89422c7d7b7b35d528bf418af6378e07">02073</a>   <a class="code" href="../../dd/d37/class_sass_1_1_error.html">Error</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#89422c7d7b7b35d528bf418af6378e07">Parser::parse_error</a>()
<a name="l02074"></a>02074   {
<a name="l02075"></a>02075     lex&lt; kwd_err &gt;();
<a name="l02076"></a>02076     <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../dd/d37/class_sass_1_1_error.html">Error</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>());
<a name="l02077"></a>02077   }
<a name="l02078"></a>02078 
<a name="l02079"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f47affe2057df4fb234c851d6cadeedb">02079</a>   <a class="code" href="../../df/d62/class_sass_1_1_debug.html">Debug</a>* <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#f47affe2057df4fb234c851d6cadeedb">Parser::parse_debug</a>()
<a name="l02080"></a>02080   {
<a name="l02081"></a>02081     lex&lt; kwd_dbg &gt;();
<a name="l02082"></a>02082     <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d4/d05/class_sass_1_1_parser.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../df/d62/class_sass_1_1_debug.html">Debug</a>(<a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html#48fcc65e16351fbcec4f9d65c44597aa">pstate</a>, <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#58019d619ee7f0efca6dfb812f046329">parse_list</a>());
<a name="l02083"></a>02083   }
<a name="l02084"></a>02084 
<a name="l02085"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#8c0d385a19385a41fc6c18d7d6512e2e">02085</a>   <a class="code" href="../../de/d42/struct_selector___lookahead.html">Selector_Lookahead</a> <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#8c0d385a19385a41fc6c18d7d6512e2e">Parser::lookahead_for_selector</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* start)
<a name="l02086"></a>02086   {
<a name="l02087"></a>02087     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a> = start ? start : <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#cf876c23470d5841362014821a981885">position</a>;
<a name="l02088"></a>02088     <span class="keyword">const</span> <span class="keywordtype">char</span>* q;
<a name="l02089"></a>02089     <span class="keywordtype">bool</span> saw_stuff = <span class="keyword">false</span>;
<a name="l02090"></a>02090     <span class="keywordtype">bool</span> saw_interpolant = <span class="keyword">false</span>;
<a name="l02091"></a>02091 
<a name="l02092"></a>02092     <span class="keywordflow">while</span> ((q = peek&lt; identifier &gt;(p))                             ||
<a name="l02093"></a>02093            (q = peek&lt; hyphens_and_identifier &gt;(p))                 ||
<a name="l02094"></a>02094            (q = peek&lt; hyphens_and_name &gt;(p))                       ||
<a name="l02095"></a>02095            (q = peek&lt; type_selector &gt;(p))                          ||
<a name="l02096"></a>02096            (q = peek&lt; id_name &gt;(p))                                ||
<a name="l02097"></a>02097            (q = peek&lt; class_name &gt;(p))                             ||
<a name="l02098"></a>02098            (q = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; sequence&lt; pseudo_prefix, identifier &gt; &gt;(p))  ||
<a name="l02099"></a>02099            (q = peek&lt; percentage &gt;(p))                             ||
<a name="l02100"></a>02100            (q = peek&lt; variable &gt;(p))                            ||
<a name="l02101"></a>02101            (q = peek&lt; dimension &gt;(p))                              ||
<a name="l02102"></a>02102            (q = peek&lt; quoted_string &gt;(p))                          ||
<a name="l02103"></a>02103            (q = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; exactly&lt;'*'&gt; &gt;(p))                           ||
<a name="l02104"></a>02104            (q = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; exactly&lt;sel_deep_kwd&gt; &gt;(p))                           ||
<a name="l02105"></a>02105            (q = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'('</span>&gt; &gt;(p))                           ||
<a name="l02106"></a>02106            (q = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">')'</span>&gt; &gt;(p))                           ||
<a name="l02107"></a>02107            (q = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">'['</span>&gt; &gt;(p))                           ||
<a name="l02108"></a>02108            (q = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#422640735cf6dc886fdd0ca0c03a12d1">exactly</a>&lt;<span class="charliteral">']'</span>&gt; &gt;(p))                           ||
<a name="l02109"></a>02109            (q = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; exactly&lt;'+'&gt; &gt;(p))                           ||
<a name="l02110"></a>02110            (q = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; exactly&lt;'~'&gt; &gt;(p))                           ||
<a name="l02111"></a>02111            (q = <a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1b96cb8419010f7be64e836ddc22afbc">peek</a>&lt; exactly&lt;'&gt;<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02112"></a>02112 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>,<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02113"></a>02113 <span class="stringliteral">           (saw_stuff &amp;&amp; (q = peek&lt; exactly&lt;'</span>-<span class="stringliteral">'&gt; &gt;(p)))            ||</span>
<a name="l02114"></a>02114 <span class="stringliteral">           (q = peek&lt; binomial &gt;(p))                               ||</span>
<a name="l02115"></a>02115 <span class="stringliteral">           (q = peek&lt; block_comment &gt;(p))                          ||</span>
<a name="l02116"></a>02116 <span class="stringliteral">           (q = peek&lt; sequence&lt; optional&lt;sign&gt;,</span>
<a name="l02117"></a>02117 <span class="stringliteral">                                zero_plus&lt;digit&gt;,</span>
<a name="l02118"></a>02118 <span class="stringliteral">                                exactly&lt;'</span>n<span class="stringliteral">'&gt; &gt; &gt;(p))               ||</span>
<a name="l02119"></a>02119 <span class="stringliteral">           (q = peek&lt; sequence&lt; optional&lt;sign&gt;,</span>
<a name="l02120"></a>02120 <span class="stringliteral">                                one_plus&lt;digit&gt; &gt; &gt;(p))                     ||</span>
<a name="l02121"></a>02121 <span class="stringliteral">           (q = peek&lt; number &gt;(p))                                 ||</span>
<a name="l02122"></a>02122 <span class="stringliteral">           (q = peek&lt; sequence&lt; exactly&lt;'</span>&amp;<span class="stringliteral">'&gt;,</span>
<a name="l02123"></a>02123 <span class="stringliteral">                                identifier_alnums &gt; &gt;(p))        ||</span>
<a name="l02124"></a>02124 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>&amp;<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02125"></a>02125 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>%<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02126"></a>02126 <span class="stringliteral">           (q = peek&lt; alternatives&lt;exact_match,</span>
<a name="l02127"></a>02127 <span class="stringliteral">                                   class_match,</span>
<a name="l02128"></a>02128 <span class="stringliteral">                                   dash_match,</span>
<a name="l02129"></a>02129 <span class="stringliteral">                                   prefix_match,</span>
<a name="l02130"></a>02130 <span class="stringliteral">                                   suffix_match,</span>
<a name="l02131"></a>02131 <span class="stringliteral">                                   substring_match&gt; &gt;(p))          ||</span>
<a name="l02132"></a>02132 <span class="stringliteral">           (q = peek&lt; sequence&lt; exactly&lt;'</span>.<span class="stringliteral">'&gt;, interpolant &gt; &gt;(p))  ||</span>
<a name="l02133"></a>02133 <span class="stringliteral">           (q = peek&lt; sequence&lt; exactly&lt;'</span>#<span class="stringliteral">'&gt;, interpolant &gt; &gt;(p))  ||</span>
<a name="l02134"></a>02134 <span class="stringliteral">           (q = peek&lt; sequence&lt; one_plus&lt; exactly&lt;'</span>-<span class="stringliteral">'&gt; &gt;, interpolant &gt; &gt;(p))  ||</span>
<a name="l02135"></a>02135 <span class="stringliteral">           (q = peek&lt; sequence&lt; pseudo_prefix, interpolant &gt; &gt;(p)) ||</span>
<a name="l02136"></a>02136 <span class="stringliteral">           (q = peek&lt; interpolant &gt;(p))) {</span>
<a name="l02137"></a>02137 <span class="stringliteral">      saw_stuff = true;</span>
<a name="l02138"></a>02138 <span class="stringliteral">      p = q;</span>
<a name="l02139"></a>02139 <span class="stringliteral">      if (*(p - 1) == '</span>}<span class="stringliteral">') saw_interpolant = true;</span>
<a name="l02140"></a>02140 <span class="stringliteral">    }</span>
<a name="l02141"></a>02141 <span class="stringliteral"></span>
<a name="l02142"></a>02142 <span class="stringliteral">    Selector_Lookahead result;</span>
<a name="l02143"></a>02143 <span class="stringliteral">    result.found            = saw_stuff &amp;&amp; peek&lt; exactly&lt;'</span>{<span class="stringliteral">'&gt; &gt;(p) ? p : 0;</span>
<a name="l02144"></a>02144 <span class="stringliteral">    result.has_interpolants = saw_interpolant;</span>
<a name="l02145"></a>02145 <span class="stringliteral"></span>
<a name="l02146"></a>02146 <span class="stringliteral">    return result;</span>
<a name="l02147"></a>02147 <span class="stringliteral">  }</span>
<a name="l02148"></a>02148 <span class="stringliteral"></span>
<a name="l02149"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#5080e96cd8d0c75bd31a7ad9c3ea106f">02149</a> <span class="stringliteral">  Selector_Lookahead Parser::lookahead_for_extension_target(const char* start)</span>
<a name="l02150"></a>02150 <span class="stringliteral">  {</span>
<a name="l02151"></a>02151 <span class="stringliteral">    const char* p = start ? start : position;</span>
<a name="l02152"></a>02152 <span class="stringliteral">    const char* q;</span>
<a name="l02153"></a>02153 <span class="stringliteral">    bool saw_interpolant = false;</span>
<a name="l02154"></a>02154 <span class="stringliteral">    bool saw_stuff = false;</span>
<a name="l02155"></a>02155 <span class="stringliteral"></span>
<a name="l02156"></a>02156 <span class="stringliteral">    while ((q = peek&lt; identifier &gt;(p))                             ||</span>
<a name="l02157"></a>02157 <span class="stringliteral">           (q = peek&lt; type_selector &gt;(p))                          ||</span>
<a name="l02158"></a>02158 <span class="stringliteral">           (q = peek&lt; id_name &gt;(p))                                ||</span>
<a name="l02159"></a>02159 <span class="stringliteral">           (q = peek&lt; class_name &gt;(p))                             ||</span>
<a name="l02160"></a>02160 <span class="stringliteral">           (q = peek&lt; sequence&lt; pseudo_prefix, identifier &gt; &gt;(p))  ||</span>
<a name="l02161"></a>02161 <span class="stringliteral">           (q = peek&lt; percentage &gt;(p))                             ||</span>
<a name="l02162"></a>02162 <span class="stringliteral">           (q = peek&lt; dimension &gt;(p))                              ||</span>
<a name="l02163"></a>02163 <span class="stringliteral">           (q = peek&lt; quoted_string &gt;(p))                          ||</span>
<a name="l02164"></a>02164 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>*<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02165"></a>02165 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>(<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02166"></a>02166 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>)<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02167"></a>02167 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>[<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02168"></a>02168 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>]<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02169"></a>02169 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>+<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02170"></a>02170 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>~<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02171"></a>02171 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>&gt;<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02172"></a>02172 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>,<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02173"></a>02173 <span class="stringliteral">           (saw_stuff &amp;&amp; (q = peek&lt; exactly&lt;'</span>-<span class="stringliteral">'&gt; &gt;(p)))            ||</span>
<a name="l02174"></a>02174 <span class="stringliteral">           (q = peek&lt; binomial &gt;(p))                               ||</span>
<a name="l02175"></a>02175 <span class="stringliteral">           (q = peek&lt; block_comment &gt;(p))                          ||</span>
<a name="l02176"></a>02176 <span class="stringliteral">           (q = peek&lt; sequence&lt; optional&lt;sign&gt;,</span>
<a name="l02177"></a>02177 <span class="stringliteral">                                zero_plus&lt;digit&gt;,</span>
<a name="l02178"></a>02178 <span class="stringliteral">                                exactly&lt;'</span>n<span class="stringliteral">'&gt; &gt; &gt;(p))               ||</span>
<a name="l02179"></a>02179 <span class="stringliteral">           (q = peek&lt; sequence&lt; optional&lt;sign&gt;,</span>
<a name="l02180"></a>02180 <span class="stringliteral">                                one_plus&lt;digit&gt; &gt; &gt;(p))                     ||</span>
<a name="l02181"></a>02181 <span class="stringliteral">           (q = peek&lt; number &gt;(p))                                 ||</span>
<a name="l02182"></a>02182 <span class="stringliteral">           (q = peek&lt; sequence&lt; exactly&lt;'</span>&amp;<span class="stringliteral">'&gt;,</span>
<a name="l02183"></a>02183 <span class="stringliteral">                                identifier_alnums &gt; &gt;(p))        ||</span>
<a name="l02184"></a>02184 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>&amp;<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02185"></a>02185 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>%<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02186"></a>02186 <span class="stringliteral">           (q = peek&lt; alternatives&lt;exact_match,</span>
<a name="l02187"></a>02187 <span class="stringliteral">                                   class_match,</span>
<a name="l02188"></a>02188 <span class="stringliteral">                                   dash_match,</span>
<a name="l02189"></a>02189 <span class="stringliteral">                                   prefix_match,</span>
<a name="l02190"></a>02190 <span class="stringliteral">                                   suffix_match,</span>
<a name="l02191"></a>02191 <span class="stringliteral">                                   substring_match&gt; &gt;(p))          ||</span>
<a name="l02192"></a>02192 <span class="stringliteral">           (q = peek&lt; sequence&lt; exactly&lt;'</span>.<span class="stringliteral">'&gt;, interpolant &gt; &gt;(p))  ||</span>
<a name="l02193"></a>02193 <span class="stringliteral">           (q = peek&lt; sequence&lt; exactly&lt;'</span>#<span class="stringliteral">'&gt;, interpolant &gt; &gt;(p))  ||</span>
<a name="l02194"></a>02194 <span class="stringliteral">           (q = peek&lt; sequence&lt; one_plus&lt; exactly&lt;'</span>-<span class="stringliteral">'&gt; &gt;, interpolant &gt; &gt;(p))  ||</span>
<a name="l02195"></a>02195 <span class="stringliteral">           (q = peek&lt; sequence&lt; pseudo_prefix, interpolant &gt; &gt;(p)) ||</span>
<a name="l02196"></a>02196 <span class="stringliteral">           (q = peek&lt; interpolant &gt;(p))                            ||</span>
<a name="l02197"></a>02197 <span class="stringliteral">           (q = peek&lt; optional &gt;(p))) {</span>
<a name="l02198"></a>02198 <span class="stringliteral">      p = q;</span>
<a name="l02199"></a>02199 <span class="stringliteral">      if (*(p - 1) == '</span>}<span class="stringliteral">') saw_interpolant = true;</span>
<a name="l02200"></a>02200 <span class="stringliteral">      saw_stuff = true;</span>
<a name="l02201"></a>02201 <span class="stringliteral">    }</span>
<a name="l02202"></a>02202 <span class="stringliteral"></span>
<a name="l02203"></a>02203 <span class="stringliteral">    Selector_Lookahead result;</span>
<a name="l02204"></a>02204 <span class="stringliteral">    result.found            = peek&lt; alternatives&lt; exactly&lt;'</span>;<span class="stringliteral">'&gt;, exactly&lt;'</span>}<span class="stringliteral">'&gt;, exactly&lt;'</span>{<span class="stringliteral">'&gt; &gt; &gt;(p) &amp;&amp; saw_stuff ? p : 0;</span>
<a name="l02205"></a>02205 <span class="stringliteral">    result.has_interpolants = saw_interpolant;</span>
<a name="l02206"></a>02206 <span class="stringliteral"></span>
<a name="l02207"></a>02207 <span class="stringliteral">    return result;</span>
<a name="l02208"></a>02208 <span class="stringliteral">  }</span>
<a name="l02209"></a>02209 <span class="stringliteral"></span>
<a name="l02210"></a>02210 <span class="stringliteral"></span>
<a name="l02211"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#dd68592ddcce6032b60330ccc320710c">02211</a> <span class="stringliteral">  Selector_Lookahead Parser::lookahead_for_value(const char* start)</span>
<a name="l02212"></a>02212 <span class="stringliteral">  {</span>
<a name="l02213"></a>02213 <span class="stringliteral">    const char* p = start ? start : position;</span>
<a name="l02214"></a>02214 <span class="stringliteral">    const char* q;</span>
<a name="l02215"></a>02215 <span class="stringliteral">    bool saw_interpolant = false;</span>
<a name="l02216"></a>02216 <span class="stringliteral">    bool saw_stuff = false;</span>
<a name="l02217"></a>02217 <span class="stringliteral"></span>
<a name="l02218"></a>02218 <span class="stringliteral">    while ((q = peek&lt; identifier &gt;(p))                             ||</span>
<a name="l02219"></a>02219 <span class="stringliteral">           (q = peek&lt; percentage &gt;(p))                             ||</span>
<a name="l02220"></a>02220 <span class="stringliteral">           (q = peek&lt; dimension &gt;(p))                              ||</span>
<a name="l02221"></a>02221 <span class="stringliteral">           (q = peek&lt; quoted_string &gt;(p))                          ||</span>
<a name="l02222"></a>02222 <span class="stringliteral">           (q = peek&lt; variable &gt;(p))                               ||</span>
<a name="l02223"></a>02223 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>*<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02224"></a>02224 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>+<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02225"></a>02225 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>~<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02226"></a>02226 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>&gt;<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02227"></a>02227 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>,<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02228"></a>02228 <span class="stringliteral">           (q = peek&lt; sequence&lt;parenthese_scope, interpolant&gt;&gt;(p)) ||</span>
<a name="l02229"></a>02229 <span class="stringliteral">           (saw_stuff &amp;&amp; (q = peek&lt; exactly&lt;'</span>-<span class="stringliteral">'&gt; &gt;(p)))            ||</span>
<a name="l02230"></a>02230 <span class="stringliteral">           (q = peek&lt; binomial &gt;(p))                               ||</span>
<a name="l02231"></a>02231 <span class="stringliteral">           (q = peek&lt; block_comment &gt;(p))                          ||</span>
<a name="l02232"></a>02232 <span class="stringliteral">           (q = peek&lt; sequence&lt; optional&lt;sign&gt;,</span>
<a name="l02233"></a>02233 <span class="stringliteral">                                zero_plus&lt;digit&gt;,</span>
<a name="l02234"></a>02234 <span class="stringliteral">                                exactly&lt;'</span>n<span class="stringliteral">'&gt; &gt; &gt;(p))               ||</span>
<a name="l02235"></a>02235 <span class="stringliteral">           (q = peek&lt; sequence&lt; optional&lt;sign&gt;,</span>
<a name="l02236"></a>02236 <span class="stringliteral">                                one_plus&lt;digit&gt; &gt; &gt;(p))            ||</span>
<a name="l02237"></a>02237 <span class="stringliteral">           (q = peek&lt; number &gt;(p))                                 ||</span>
<a name="l02238"></a>02238 <span class="stringliteral">           (q = peek&lt; sequence&lt; exactly&lt;'</span>&amp;<span class="stringliteral">'&gt;,</span>
<a name="l02239"></a>02239 <span class="stringliteral">                                identifier_alnums &gt; &gt;(p))          ||</span>
<a name="l02240"></a>02240 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>&amp;<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02241"></a>02241 <span class="stringliteral">           (q = peek&lt; exactly&lt;'</span>%<span class="stringliteral">'&gt; &gt;(p))                           ||</span>
<a name="l02242"></a>02242 <span class="stringliteral">           (q = peek&lt; sequence&lt; exactly&lt;'</span>.<span class="stringliteral">'&gt;, interpolant &gt; &gt;(p))  ||</span>
<a name="l02243"></a>02243 <span class="stringliteral">           (q = peek&lt; sequence&lt; exactly&lt;'</span>#<span class="stringliteral">'&gt;, interpolant &gt; &gt;(p))  ||</span>
<a name="l02244"></a>02244 <span class="stringliteral">           (q = peek&lt; sequence&lt; one_plus&lt; exactly&lt;'</span>-<span class="stringliteral">'&gt; &gt;, interpolant &gt; &gt;(p))  ||</span>
<a name="l02245"></a>02245 <span class="stringliteral">           (q = peek&lt; sequence&lt; pseudo_prefix, interpolant &gt; &gt;(p)) ||</span>
<a name="l02246"></a>02246 <span class="stringliteral">           (q = peek&lt; interpolant &gt;(p))                            ||</span>
<a name="l02247"></a>02247 <span class="stringliteral">           (q = peek&lt; optional &gt;(p))) {</span>
<a name="l02248"></a>02248 <span class="stringliteral">      p = q;</span>
<a name="l02249"></a>02249 <span class="stringliteral">      if (*(p - 1) == '</span>}<span class="stringliteral">') saw_interpolant = true;</span>
<a name="l02250"></a>02250 <span class="stringliteral">      saw_stuff = true;</span>
<a name="l02251"></a>02251 <span class="stringliteral">    }</span>
<a name="l02252"></a>02252 <span class="stringliteral"></span>
<a name="l02253"></a>02253 <span class="stringliteral">    Selector_Lookahead result;</span>
<a name="l02254"></a>02254 <span class="stringliteral">    result.found            = peek&lt; alternatives&lt; exactly&lt;'</span>;<span class="stringliteral">'&gt;, exactly&lt;'</span>}<span class="stringliteral">'&gt;, exactly&lt;'</span>{<span class="stringliteral">'&gt; &gt; &gt;(p) &amp;&amp; saw_stuff ? p : 0;</span>
<a name="l02255"></a>02255 <span class="stringliteral">    result.has_interpolants = saw_interpolant;</span>
<a name="l02256"></a>02256 <span class="stringliteral"></span>
<a name="l02257"></a>02257 <span class="stringliteral">    return result;</span>
<a name="l02258"></a>02258 <span class="stringliteral">  }</span>
<a name="l02259"></a>02259 <span class="stringliteral"></span>
<a name="l02260"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#38f7cffef701b4b50a64c916b764f5fa">02260</a> <span class="stringliteral">  void Parser::read_bom()</span>
<a name="l02261"></a>02261 <span class="stringliteral">  {</span>
<a name="l02262"></a>02262 <span class="stringliteral">    size_t skip = 0;</span>
<a name="l02263"></a>02263 <span class="stringliteral">    string encoding;</span>
<a name="l02264"></a>02264 <span class="stringliteral">    bool utf_8 = false;</span>
<a name="l02265"></a>02265 <span class="stringliteral">    switch ((unsigned char) source[0]) {</span>
<a name="l02266"></a>02266 <span class="stringliteral">    case 0xEF:</span>
<a name="l02267"></a>02267 <span class="stringliteral">      skip = check_bom_chars(source, end, utf_8_bom, 3);</span>
<a name="l02268"></a>02268 <span class="stringliteral">      encoding = "UTF-8";</span>
<a name="l02269"></a>02269 <span class="stringliteral">      utf_8 = true;</span>
<a name="l02270"></a>02270 <span class="stringliteral">      break;</span>
<a name="l02271"></a>02271 <span class="stringliteral">    case 0xFE:</span>
<a name="l02272"></a>02272 <span class="stringliteral">      skip = check_bom_chars(source, end, utf_16_bom_be, 2);</span>
<a name="l02273"></a>02273 <span class="stringliteral">      encoding = "UTF-16 (big endian)";</span>
<a name="l02274"></a>02274 <span class="stringliteral">      break;</span>
<a name="l02275"></a>02275 <span class="stringliteral">    case 0xFF:</span>
<a name="l02276"></a>02276 <span class="stringliteral">      skip = check_bom_chars(source, end, utf_16_bom_le, 2);</span>
<a name="l02277"></a>02277 <span class="stringliteral">      skip += (skip ? check_bom_chars(source, end, utf_32_bom_le, 4) : 0);</span>
<a name="l02278"></a>02278 <span class="stringliteral">      encoding = (skip == 2 ? "UTF-16 (little endian)" : "UTF-32 (little endian)");</span>
<a name="l02279"></a>02279 <span class="stringliteral">      break;</span>
<a name="l02280"></a>02280 <span class="stringliteral">    case 0x00:</span>
<a name="l02281"></a>02281 <span class="stringliteral">      skip = check_bom_chars(source, end, utf_32_bom_be, 4);</span>
<a name="l02282"></a>02282 <span class="stringliteral">      encoding = "UTF-32 (big endian)";</span>
<a name="l02283"></a>02283 <span class="stringliteral">      break;</span>
<a name="l02284"></a>02284 <span class="stringliteral">    case 0x2B:</span>
<a name="l02285"></a>02285 <span class="stringliteral">      skip = check_bom_chars(source, end, utf_7_bom_1, 4)</span>
<a name="l02286"></a>02286 <span class="stringliteral">           | check_bom_chars(source, end, utf_7_bom_2, 4)</span>
<a name="l02287"></a>02287 <span class="stringliteral">           | check_bom_chars(source, end, utf_7_bom_3, 4)</span>
<a name="l02288"></a>02288 <span class="stringliteral">           | check_bom_chars(source, end, utf_7_bom_4, 4)</span>
<a name="l02289"></a>02289 <span class="stringliteral">           | check_bom_chars(source, end, utf_7_bom_5, 5);</span>
<a name="l02290"></a>02290 <span class="stringliteral">      encoding = "UTF-7";</span>
<a name="l02291"></a>02291 <span class="stringliteral">      break;</span>
<a name="l02292"></a>02292 <span class="stringliteral">    case 0xF7:</span>
<a name="l02293"></a>02293 <span class="stringliteral">      skip = check_bom_chars(source, end, utf_1_bom, 3);</span>
<a name="l02294"></a>02294 <span class="stringliteral">      encoding = "UTF-1";</span>
<a name="l02295"></a>02295 <span class="stringliteral">      break;</span>
<a name="l02296"></a>02296 <span class="stringliteral">    case 0xDD:</span>
<a name="l02297"></a>02297 <span class="stringliteral">      skip = check_bom_chars(source, end, utf_ebcdic_bom, 4);</span>
<a name="l02298"></a>02298 <span class="stringliteral">      encoding = "UTF-EBCDIC";</span>
<a name="l02299"></a>02299 <span class="stringliteral">      break;</span>
<a name="l02300"></a>02300 <span class="stringliteral">    case 0x0E:</span>
<a name="l02301"></a>02301 <span class="stringliteral">      skip = check_bom_chars(source, end, scsu_bom, 3);</span>
<a name="l02302"></a>02302 <span class="stringliteral">      encoding = "SCSU";</span>
<a name="l02303"></a>02303 <span class="stringliteral">      break;</span>
<a name="l02304"></a>02304 <span class="stringliteral">    case 0xFB:</span>
<a name="l02305"></a>02305 <span class="stringliteral">      skip = check_bom_chars(source, end, bocu_1_bom, 3);</span>
<a name="l02306"></a>02306 <span class="stringliteral">      encoding = "BOCU-1";</span>
<a name="l02307"></a>02307 <span class="stringliteral">      break;</span>
<a name="l02308"></a>02308 <span class="stringliteral">    case 0x84:</span>
<a name="l02309"></a>02309 <span class="stringliteral">      skip = check_bom_chars(source, end, gb_18030_bom, 4);</span>
<a name="l02310"></a>02310 <span class="stringliteral">      encoding = "GB-18030";</span>
<a name="l02311"></a>02311 <span class="stringliteral">      break;</span>
<a name="l02312"></a>02312 <span class="stringliteral">    }</span>
<a name="l02313"></a>02313 <span class="stringliteral">    if (skip &gt; 0 &amp;&amp; !utf_8) error("only UTF-8 documents are currently supported; your document appears to be " + encoding, pstate);</span>
<a name="l02314"></a>02314 <span class="stringliteral">    position += skip;</span>
<a name="l02315"></a>02315 <span class="stringliteral">  }</span>
<a name="l02316"></a>02316 <span class="stringliteral"></span>
<a name="l02317"></a><a class="code" href="../../da/d80/namespace_sass.html#7a075d789a0f76eeb0d63af0ca016ece">02317</a> <span class="stringliteral">  size_t check_bom_chars(const char* src, const char *end, const unsigned char* bom, size_t len)</span>
<a name="l02318"></a>02318 <span class="stringliteral">  {</span>
<a name="l02319"></a>02319 <span class="stringliteral">    size_t skip = 0;</span>
<a name="l02320"></a>02320 <span class="stringliteral">    if (src + len &gt; end) return 0;</span>
<a name="l02321"></a>02321 <span class="stringliteral">    for (size_t i = 0; i &lt; len; ++i, ++skip) {</span>
<a name="l02322"></a>02322 <span class="stringliteral">      if ((unsigned char) src[i] != bom[i]) return 0;</span>
<a name="l02323"></a>02323 <span class="stringliteral">    }</span>
<a name="l02324"></a>02324 <span class="stringliteral">    return skip;</span>
<a name="l02325"></a>02325 <span class="stringliteral">  }</span>
<a name="l02326"></a>02326 <span class="stringliteral"></span>
<a name="l02327"></a>02327 <span class="stringliteral"></span>
<a name="l02328"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#22bb08af4bd2d0d23e710abd27c06cc0">02328</a> <span class="stringliteral">  Expression* Parser::fold_operands(Expression* base, vector&lt;Expression*&gt;&amp; operands, Binary_Expression::Type op)</span>
<a name="l02329"></a>02329 <span class="stringliteral">  {</span>
<a name="l02330"></a>02330 <span class="stringliteral">    for (size_t i = 0, S = operands.size(); i &lt; S; ++i) {</span>
<a name="l02331"></a>02331 <span class="stringliteral">      base = new (ctx.mem) Binary_Expression(pstate, op, base, operands[i]);</span>
<a name="l02332"></a>02332 <span class="stringliteral">      Binary_Expression* b = static_cast&lt;Binary_Expression*&gt;(base);</span>
<a name="l02333"></a>02333 <span class="stringliteral">      if (op == Binary_Expression::DIV &amp;&amp; b-&gt;left()-&gt;is_delayed() &amp;&amp; b-&gt;right()-&gt;is_delayed()) {</span>
<a name="l02334"></a>02334 <span class="stringliteral">        base-&gt;is_delayed(true);</span>
<a name="l02335"></a>02335 <span class="stringliteral">      }</span>
<a name="l02336"></a>02336 <span class="stringliteral">      else {</span>
<a name="l02337"></a>02337 <span class="stringliteral">        b-&gt;left()-&gt;is_delayed(false);</span>
<a name="l02338"></a>02338 <span class="stringliteral">        b-&gt;right()-&gt;is_delayed(false);</span>
<a name="l02339"></a>02339 <span class="stringliteral">      }</span>
<a name="l02340"></a>02340 <span class="stringliteral">    }</span>
<a name="l02341"></a>02341 <span class="stringliteral">    return base;</span>
<a name="l02342"></a>02342 <span class="stringliteral">  }</span>
<a name="l02343"></a>02343 <span class="stringliteral"></span>
<a name="l02344"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#2cdc22ee692a635935f168e3c2fdff65">02344</a> <span class="stringliteral">  Expression* Parser::fold_operands(Expression* base, vector&lt;Expression*&gt;&amp; operands, vector&lt;Binary_Expression::Type&gt;&amp; ops)</span>
<a name="l02345"></a>02345 <span class="stringliteral">  {</span>
<a name="l02346"></a>02346 <span class="stringliteral">    for (size_t i = 0, S = operands.size(); i &lt; S; ++i) {</span>
<a name="l02347"></a>02347 <span class="stringliteral">      base = new (ctx.mem) Binary_Expression(base-&gt;pstate(), ops[i], base, operands[i]);</span>
<a name="l02348"></a>02348 <span class="stringliteral">      Binary_Expression* b = static_cast&lt;Binary_Expression*&gt;(base);</span>
<a name="l02349"></a>02349 <span class="stringliteral">      if (ops[i] == Binary_Expression::DIV &amp;&amp; b-&gt;left()-&gt;is_delayed() &amp;&amp; b-&gt;right()-&gt;is_delayed()) {</span>
<a name="l02350"></a>02350 <span class="stringliteral">        base-&gt;is_delayed(true);</span>
<a name="l02351"></a>02351 <span class="stringliteral">      }</span>
<a name="l02352"></a>02352 <span class="stringliteral">      else {</span>
<a name="l02353"></a>02353 <span class="stringliteral">        b-&gt;left()-&gt;is_delayed(false);</span>
<a name="l02354"></a>02354 <span class="stringliteral">        b-&gt;right()-&gt;is_delayed(false);</span>
<a name="l02355"></a>02355 <span class="stringliteral">      }</span>
<a name="l02356"></a>02356 <span class="stringliteral">    }</span>
<a name="l02357"></a>02357 <span class="stringliteral">    return base;</span>
<a name="l02358"></a>02358 <span class="stringliteral">  }</span>
<a name="l02359"></a>02359 <span class="stringliteral"></span>
<a name="l02360"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#919fd075bcd5b6404d4a073f4848e097">02360</a> <span class="stringliteral">  void Parser::error(string msg, Position pos)</span>
<a name="l02361"></a>02361 <span class="stringliteral">  {</span>
<a name="l02362"></a>02362 <span class="stringliteral">    throw Sass_Error(Sass_Error::syntax, ParserState(path, source, pos.line ? pos : before_token, Offset(0, 0)), msg);</span>
<a name="l02363"></a>02363 <span class="stringliteral">  }</span>
<a name="l02364"></a>02364 <span class="stringliteral"></span>
<a name="l02365"></a>02365 <span class="stringliteral">  // print a css parsing error with actual context information from parsed source</span>
<a name="l02366"></a><a class="code" href="../../d4/d05/class_sass_1_1_parser.html#1feaa8c1fed5779d5f15c46d66edb9a6">02366</a> <span class="stringliteral">  void Parser::css_error(const string&amp; msg, const string&amp; prefix, const string&amp; middle)</span>
<a name="l02367"></a>02367 <span class="stringliteral">  {</span>
<a name="l02368"></a>02368 <span class="stringliteral">    int max_len = 14;</span>
<a name="l02369"></a>02369 <span class="stringliteral">    const char* pos = peek &lt; optional_spaces &gt;();</span>
<a name="l02370"></a>02370 <span class="stringliteral">    bool ellipsis_left = false;</span>
<a name="l02371"></a>02371 <span class="stringliteral">    const char* pos_left(pos);</span>
<a name="l02372"></a>02372 <span class="stringliteral">    while (*pos_left &amp;&amp; pos_left &gt; source) {</span>
<a name="l02373"></a>02373 <span class="stringliteral">      if (pos - pos_left &gt; max_len) {</span>
<a name="l02374"></a>02374 <span class="stringliteral">        ellipsis_left = true;</span>
<a name="l02375"></a>02375 <span class="stringliteral">        break;</span>
<a name="l02376"></a>02376 <span class="stringliteral">      }</span>
<a name="l02377"></a>02377 <span class="stringliteral">      const char* prev = pos_left - 1;</span>
<a name="l02378"></a>02378 <span class="stringliteral">      if (*prev == '</span>\r<span class="stringliteral">') break;</span>
<a name="l02379"></a>02379 <span class="stringliteral">      if (*prev == '</span>\n<span class="stringliteral">') break;</span>
<a name="l02380"></a>02380 <span class="stringliteral">      if (*prev == 10) break;</span>
<a name="l02381"></a>02381 <span class="stringliteral">      pos_left = prev;</span>
<a name="l02382"></a>02382 <span class="stringliteral">    }</span>
<a name="l02383"></a>02383 <span class="stringliteral">    bool ellipsis_right = false;</span>
<a name="l02384"></a>02384 <span class="stringliteral">    const char* pos_right(pos);</span>
<a name="l02385"></a>02385 <span class="stringliteral">    while (*pos_right &amp;&amp; pos_right &lt;= end) {</span>
<a name="l02386"></a>02386 <span class="stringliteral">      if (pos_right - pos &gt; max_len) {</span>
<a name="l02387"></a>02387 <span class="stringliteral">        ellipsis_right = true;</span>
<a name="l02388"></a>02388 <span class="stringliteral">        break;</span>
<a name="l02389"></a>02389 <span class="stringliteral">      }</span>
<a name="l02390"></a>02390 <span class="stringliteral">      if (*pos_right == '</span>\r<span class="stringliteral">') break;</span>
<a name="l02391"></a>02391 <span class="stringliteral">      if (*pos_right == '</span>\n<span class="stringliteral">') break;</span>
<a name="l02392"></a>02392 <span class="stringliteral">      if (*pos_left == 10) break;</span>
<a name="l02393"></a>02393 <span class="stringliteral">      ++ pos_right;</span>
<a name="l02394"></a>02394 <span class="stringliteral">    }</span>
<a name="l02395"></a>02395 <span class="stringliteral">    string left(pos_left, pos);</span>
<a name="l02396"></a>02396 <span class="stringliteral">    string right(pos, pos_right);</span>
<a name="l02397"></a>02397 <span class="stringliteral">    if (ellipsis_left) left = ellipsis + left;</span>
<a name="l02398"></a>02398 <span class="stringliteral">    if (ellipsis_right) right = right + ellipsis;</span>
<a name="l02399"></a>02399 <span class="stringliteral">    // now pass new message to the more generic error function</span>
<a name="l02400"></a>02400 <span class="stringliteral">    error(msg + prefix + quote(left) + middle + quote(right), pstate);</span>
<a name="l02401"></a>02401 <span class="stringliteral">  }</span>
<a name="l02402"></a>02402 <span class="stringliteral"></span>
<a name="l02403"></a>02403 <span class="stringliteral">}</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Oct 7 19:26:29 2015 for Emeraldion Lodge (codename Zelda) by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
