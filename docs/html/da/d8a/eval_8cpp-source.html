<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Emeraldion Lodge (codename Zelda): /Users/delphine/Development/SVN/emeraldion.it/zelda/node_modules/gulp-sass/node_modules/node-sass/src/libsass/eval.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css">
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="../../main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="../../files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>/Users/delphine/Development/SVN/emeraldion.it/zelda/node_modules/gulp-sass/node_modules/node-sass/src/libsass/eval.cpp</h1><a href="../../df/dac/eval_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include &lt;cstdlib&gt;</span>
<a name="l00002"></a>00002 <span class="preprocessor">#include &lt;cmath&gt;</span>
<a name="l00003"></a>00003 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &lt;sstream&gt;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;iomanip&gt;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;typeinfo&gt;</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="preprocessor">#include "<a class="code" href="../../db/d3b/file_8hpp.html">file.hpp</a>"</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include "<a class="code" href="../../dc/dee/eval_8hpp.html">eval.hpp</a>"</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include "<a class="code" href="../../dd/dc8/ast_8hpp.html">ast.hpp</a>"</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include "<a class="code" href="../../d9/d76/bind_8hpp.html">bind.hpp</a>"</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include "<a class="code" href="../../d0/d3f/util_8hpp.html">util.hpp</a>"</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include "<a class="code" href="../../de/d56/to__string_8hpp.html">to_string.hpp</a>"</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include "<a class="code" href="../../dc/dc1/inspect_8hpp.html">inspect.hpp</a>"</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include "<a class="code" href="../../d1/d6e/to__c_8hpp.html">to_c.hpp</a>"</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include "<a class="code" href="../../d2/da3/context_8hpp.html">context.hpp</a>"</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include "<a class="code" href="../../da/dfe/backtrace_8hpp.html">backtrace.hpp</a>"</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include "<a class="code" href="../../d2/def/prelexer_8hpp.html">prelexer.hpp</a>"</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include "<a class="code" href="../../d1/d46/parser_8hpp.html">parser.hpp</a>"</span>
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 <span class="keyword">namespace </span>Sass {
<a name="l00022"></a>00022   <span class="keyword">using namespace </span>std;
<a name="l00023"></a>00023 
<a name="l00024"></a><a class="code" href="../../da/d80/namespace_sass.html#8403d317b782ad1fff0c262dd2529b84">00024</a>   <span class="keyword">inline</span> <span class="keywordtype">double</span> <span class="keyword">add</span>(<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y) { <span class="keywordflow">return</span> x + y; }
<a name="l00025"></a><a class="code" href="../../da/d80/namespace_sass.html#63d97f8b2fcc91cc4eac14edf7626b0d">00025</a>   <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="../../da/d80/namespace_sass.html#63d97f8b2fcc91cc4eac14edf7626b0d">sub</a>(<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y) { <span class="keywordflow">return</span> x - y; }
<a name="l00026"></a><a class="code" href="../../da/d80/namespace_sass.html#941639211ca90f1accc13fb0918b7ed3">00026</a>   <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="../../da/d80/namespace_sass.html#941639211ca90f1accc13fb0918b7ed3">mul</a>(<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y) { <span class="keywordflow">return</span> x * y; }
<a name="l00027"></a><a class="code" href="../../da/d80/namespace_sass.html#3bb626dbcdf0aba7b9367268b2216222">00027</a>   <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="../../da/d80/namespace_sass.html#3bb626dbcdf0aba7b9367268b2216222">div</a>(<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y) { <span class="keywordflow">return</span> x / y; } <span class="comment">// x/0 checked by caller</span>
<a name="l00028"></a><a class="code" href="../../da/d80/namespace_sass.html#a4386dab8d9d2b52bc23a31f3a52493c">00028</a>   <span class="keyword">typedef</span> double (*<a class="code" href="../../da/d80/namespace_sass.html#a4386dab8d9d2b52bc23a31f3a52493c">bop</a>)(double, double);
<a name="l00029"></a><a class="code" href="../../da/d80/namespace_sass.html#2cc1c3f085ad1f3d0394ba482fab75af">00029</a>   <a class="code" href="../../da/d80/namespace_sass.html#a4386dab8d9d2b52bc23a31f3a52493c">bop</a> <a class="code" href="../../da/d80/namespace_sass.html#2cc1c3f085ad1f3d0394ba482fab75af">ops</a>[<a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a70a243a5c27911ab7541def214ab88515">Binary_Expression::NUM_OPS</a>] = {
<a name="l00030"></a>00030     0, 0, <span class="comment">// and, or</span>
<a name="l00031"></a>00031     0, 0, 0, 0, 0, 0, <span class="comment">// eq, neq, gt, gte, lt, lte</span>
<a name="l00032"></a>00032     <span class="keyword">add</span>, <a class="code" href="../../da/d80/namespace_sass.html#63d97f8b2fcc91cc4eac14edf7626b0d">sub</a>, <a class="code" href="../../da/d80/namespace_sass.html#941639211ca90f1accc13fb0918b7ed3">mul</a>, <a class="code" href="../../da/d80/namespace_sass.html#3bb626dbcdf0aba7b9367268b2216222">div</a>, fmod
<a name="l00033"></a>00033   };
<a name="l00034"></a>00034 
<a name="l00035"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b5d9f6490f1da1944e84de1add3a3c45">00035</a>   <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b5d9f6490f1da1944e84de1add3a3c45">Eval::Eval</a>(<a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp; <a class="code" href="../../da/d80/namespace_sass.html#ec24354016cba787162086d169717dcf">ctx</a>, <a class="code" href="../../d8/d6c/class_sass_1_1_contextualize.html">Contextualize</a>* contextualize, <a class="code" href="../../d5/de8/class_sass_1_1_listize.html">Listize</a>* listize, <a class="code" href="../../de/ddd/class_sass_1_1_environment.html">Env</a>* env, <a class="code" href="../../d3/d1e/struct_sass_1_1_backtrace.html">Backtrace</a>* bt)
<a name="l00036"></a>00036   : ctx(ctx), contextualize(contextualize), listize(listize), env(env), backtrace(bt) { }
<a name="l00037"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#7cde6a81a83cc412e87effcba544c8bf">00037</a>   <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#7cde6a81a83cc412e87effcba544c8bf">Eval::~Eval</a>() { }
<a name="l00038"></a>00038 
<a name="l00039"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#a95d3831089c25fa85347e3876bdcf7f">00039</a>   <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html">Eval</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#a95d3831089c25fa85347e3876bdcf7f">Eval::with</a>(<a class="code" href="../../de/ddd/class_sass_1_1_environment.html">Env</a>* e, <a class="code" href="../../d3/d1e/struct_sass_1_1_backtrace.html">Backtrace</a>* bt) <span class="comment">// for setting the env before eval'ing an expression</span>
<a name="l00040"></a>00040   {
<a name="l00041"></a>00041     <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#27d42098295427d18ba710b85658d482">contextualize</a> = <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#27d42098295427d18ba710b85658d482">contextualize</a>-&gt;<a class="code" href="../../d8/d6c/class_sass_1_1_contextualize.html#225ebb8e7e5117c0606a7feab713ef70">with</a>(0, e, bt);
<a name="l00042"></a>00042     <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a> = e;
<a name="l00043"></a>00043     <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#f472d8f26172aff2c4662362af4ef650">backtrace</a> = bt;
<a name="l00044"></a>00044     <span class="keywordflow">return</span> <span class="keyword">this</span>;
<a name="l00045"></a>00045   }
<a name="l00046"></a>00046 
<a name="l00047"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5ecfb268c772bc8db2b87e23a1cabded">00047</a>   <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html">Eval</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#a95d3831089c25fa85347e3876bdcf7f">Eval::with</a>(<a class="code" href="../../df/d05/class_sass_1_1_selector.html">Selector</a>* c, <a class="code" href="../../de/ddd/class_sass_1_1_environment.html">Env</a>* e, <a class="code" href="../../d3/d1e/struct_sass_1_1_backtrace.html">Backtrace</a>* bt, <a class="code" href="../../df/d05/class_sass_1_1_selector.html">Selector</a>* <a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a>, <a class="code" href="../../df/d05/class_sass_1_1_selector.html">Selector</a>* ex) <span class="comment">// for setting the env before eval'ing an expression</span>
<a name="l00048"></a>00048   {
<a name="l00049"></a>00049     <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#27d42098295427d18ba710b85658d482">contextualize</a> = <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#27d42098295427d18ba710b85658d482">contextualize</a>-&gt;<a class="code" href="../../d8/d6c/class_sass_1_1_contextualize.html#225ebb8e7e5117c0606a7feab713ef70">with</a>(c, e, bt, p, ex);
<a name="l00050"></a>00050     <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a> = e;
<a name="l00051"></a>00051     <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#f472d8f26172aff2c4662362af4ef650">backtrace</a> = bt;
<a name="l00052"></a>00052     <span class="keywordflow">return</span> <span class="keyword">this</span>;
<a name="l00053"></a>00053   }
<a name="l00054"></a>00054 
<a name="l00055"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">00055</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* b)
<a name="l00056"></a>00056   {
<a name="l00057"></a>00057     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* val = 0;
<a name="l00058"></a>00058     <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, L = b-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>(); i &lt; L; ++i) {
<a name="l00059"></a>00059       val = (*b)[i]-&gt;perform(<span class="keyword">this</span>);
<a name="l00060"></a>00060       <span class="keywordflow">if</span> (val) <span class="keywordflow">return</span> val;
<a name="l00061"></a>00061     }
<a name="l00062"></a>00062     <span class="keywordflow">return</span> val;
<a name="l00063"></a>00063   }
<a name="l00064"></a>00064 
<a name="l00065"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#3ded60636ee10ed9f99a85ff94ff0c5d">00065</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../d0/d35/class_sass_1_1_assignment.html">Assignment</a>* <a class="code" href="../../df/d56/tag__support_8inc_8php.html#9d7c0d2d52751a85971430e899f14c25">a</a>)
<a name="l00066"></a>00066   {
<a name="l00067"></a>00067     <span class="keywordtype">string</span> var(a-&gt;variable());
<a name="l00068"></a>00068     <span class="keywordflow">if</span> (a-&gt;is_global()) {
<a name="l00069"></a>00069       <span class="keywordflow">if</span> (a-&gt;is_default()) {
<a name="l00070"></a>00070         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#0d221b95957e25028aafb7e1c94bb1f8">has_global</a>(var)) {
<a name="l00071"></a>00071           <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* e = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*<span class="keyword">&gt;</span>(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#c8f1c568ea91688e9019ec5ddfdbf899">get_global</a>(var));
<a name="l00072"></a>00072           <span class="keywordflow">if</span> (!e || e-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8685a1a6646a516c78ae30556b836aa1fde">Expression::NULL_VAL</a>) {
<a name="l00073"></a>00073             <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#d6dd752bbe021f5c14fee7689db3b7f6">set_global</a>(var, a-&gt;value()-&gt;perform(<span class="keyword">this</span>));
<a name="l00074"></a>00074           }
<a name="l00075"></a>00075         }
<a name="l00076"></a>00076         <span class="keywordflow">else</span> {
<a name="l00077"></a>00077           <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#d6dd752bbe021f5c14fee7689db3b7f6">set_global</a>(var, a-&gt;value()-&gt;perform(<span class="keyword">this</span>));
<a name="l00078"></a>00078         }
<a name="l00079"></a>00079       }
<a name="l00080"></a>00080       <span class="keywordflow">else</span> {
<a name="l00081"></a>00081         <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#d6dd752bbe021f5c14fee7689db3b7f6">set_global</a>(var, a-&gt;value()-&gt;perform(<span class="keyword">this</span>));
<a name="l00082"></a>00082       }
<a name="l00083"></a>00083     }
<a name="l00084"></a>00084     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;is_default()) {
<a name="l00085"></a>00085       <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#20da12fe25713ed026dcdcda20c221c1">has_lexical</a>(var)) {
<a name="l00086"></a>00086         <span class="keyword">auto</span> cur = <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>;
<a name="l00087"></a>00087         <span class="keywordflow">while</span> (cur &amp;&amp; cur-&gt;is_lexical()) {
<a name="l00088"></a>00088           <span class="keywordflow">if</span> (cur-&gt;has_local(var)) {
<a name="l00089"></a>00089             <span class="keywordflow">if</span> (<a class="code" href="../../d4/d4a/class_sass_1_1_a_s_t___node.html">AST_Node</a>* node = cur-&gt;get_local(var)) {
<a name="l00090"></a>00090               <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* e = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*<span class="keyword">&gt;</span>(node);
<a name="l00091"></a>00091               <span class="keywordflow">if</span> (!e || e-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8685a1a6646a516c78ae30556b836aa1fde">Expression::NULL_VAL</a>) {
<a name="l00092"></a>00092                 cur-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#70f7aa09dda72a42d8d671dbdeb54d50">set_local</a>(var, a-&gt;value()-&gt;perform(<span class="keyword">this</span>));
<a name="l00093"></a>00093               }
<a name="l00094"></a>00094             }
<a name="l00095"></a>00095             <span class="keywordflow">else</span> {
<a name="l00096"></a>00096               <span class="keywordflow">throw</span> runtime_error(<span class="stringliteral">"Env not in sync"</span>);
<a name="l00097"></a>00097             }
<a name="l00098"></a>00098             <span class="keywordflow">return</span> 0;
<a name="l00099"></a>00099           }
<a name="l00100"></a>00100           cur = cur-&gt;parent();
<a name="l00101"></a>00101         }
<a name="l00102"></a>00102         <span class="keywordflow">throw</span> runtime_error(<span class="stringliteral">"Env not in sync"</span>);
<a name="l00103"></a>00103       }
<a name="l00104"></a>00104       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#0d221b95957e25028aafb7e1c94bb1f8">has_global</a>(var)) {
<a name="l00105"></a>00105         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d4a/class_sass_1_1_a_s_t___node.html">AST_Node</a>* node = <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#c8f1c568ea91688e9019ec5ddfdbf899">get_global</a>(var)) {
<a name="l00106"></a>00106           <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* e = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*<span class="keyword">&gt;</span>(node);
<a name="l00107"></a>00107           <span class="keywordflow">if</span> (!e || e-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8685a1a6646a516c78ae30556b836aa1fde">Expression::NULL_VAL</a>) {
<a name="l00108"></a>00108             <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#d6dd752bbe021f5c14fee7689db3b7f6">set_global</a>(var, a-&gt;value()-&gt;perform(<span class="keyword">this</span>));
<a name="l00109"></a>00109           }
<a name="l00110"></a>00110         }
<a name="l00111"></a>00111       }
<a name="l00112"></a>00112       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#c6a771340b7f8bfdab67a16c3155dc9d">is_lexical</a>()) {
<a name="l00113"></a>00113         <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#70f7aa09dda72a42d8d671dbdeb54d50">set_local</a>(var, a-&gt;value()-&gt;perform(<span class="keyword">this</span>));
<a name="l00114"></a>00114       }
<a name="l00115"></a>00115       <span class="keywordflow">else</span> {
<a name="l00116"></a>00116         <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#70f7aa09dda72a42d8d671dbdeb54d50">set_local</a>(var, a-&gt;value()-&gt;perform(<span class="keyword">this</span>));
<a name="l00117"></a>00117       }
<a name="l00118"></a>00118     }
<a name="l00119"></a>00119     <span class="keywordflow">else</span> {
<a name="l00120"></a>00120       <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#5463a1dc0219897bcf6457560358005e">set_lexical</a>(var, a-&gt;value()-&gt;perform(<span class="keyword">this</span>));
<a name="l00121"></a>00121     }
<a name="l00122"></a>00122     <span class="keywordflow">return</span> 0;
<a name="l00123"></a>00123   }
<a name="l00124"></a>00124 
<a name="l00125"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#ab53b2a493b39ce528a63e73497f1ecf">00125</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../d1/dd7/class_sass_1_1_if.html">If</a>* i)
<a name="l00126"></a>00126   {
<a name="l00127"></a>00127     <span class="keywordflow">if</span> (*i-&gt;predicate()-&gt;perform(<span class="keyword">this</span>)) {
<a name="l00128"></a>00128       <span class="keywordflow">return</span> i-&gt;consequent()-&gt;perform(<span class="keyword">this</span>);
<a name="l00129"></a>00129     }
<a name="l00130"></a>00130     <span class="keywordflow">else</span> {
<a name="l00131"></a>00131       <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* alt = i-&gt;alternative();
<a name="l00132"></a>00132       <span class="keywordflow">if</span> (alt) <span class="keywordflow">return</span> alt-&gt;perform(<span class="keyword">this</span>);
<a name="l00133"></a>00133     }
<a name="l00134"></a>00134     <span class="keywordflow">return</span> 0;
<a name="l00135"></a>00135   }
<a name="l00136"></a>00136 
<a name="l00137"></a>00137   <span class="comment">// For does not create a new env scope</span>
<a name="l00138"></a>00138   <span class="comment">// But iteration vars are reset afterwards</span>
<a name="l00139"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#fab832f587385b224af073a88699118e">00139</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../db/d5a/class_sass_1_1_for.html">For</a>* f)
<a name="l00140"></a>00140   {
<a name="l00141"></a>00141     <span class="keywordtype">string</span> <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#b73157d720a334b9f177fd09aa519aad">variable</a>(f-&gt;variable());
<a name="l00142"></a>00142     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* low = f-&gt;lower_bound()-&gt;perform(<span class="keyword">this</span>);
<a name="l00143"></a>00143     <span class="keywordflow">if</span> (low-&gt;concrete_type() != <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86812a90dfe20486bbe3e075afcd19ef2d0">Expression::NUMBER</a>) {
<a name="l00144"></a>00144       <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"lower bound of `@for` directive must be numeric"</span>, low-&gt;pstate());
<a name="l00145"></a>00145     }
<a name="l00146"></a>00146     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* high = f-&gt;upper_bound()-&gt;perform(<span class="keyword">this</span>);
<a name="l00147"></a>00147     <span class="keywordflow">if</span> (high-&gt;concrete_type() != <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86812a90dfe20486bbe3e075afcd19ef2d0">Expression::NUMBER</a>) {
<a name="l00148"></a>00148       <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"upper bound of `@for` directive must be numeric"</span>, high-&gt;pstate());
<a name="l00149"></a>00149     }
<a name="l00150"></a>00150     <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>* sass_start = <span class="keyword">static_cast&lt;</span><a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>*<span class="keyword">&gt;</span>(low);
<a name="l00151"></a>00151     <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>* sass_end = <span class="keyword">static_cast&lt;</span><a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>*<span class="keyword">&gt;</span>(high);
<a name="l00152"></a>00152     <span class="comment">// check if units are valid for sequence</span>
<a name="l00153"></a>00153     <span class="keywordflow">if</span> (sass_start-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#30d08dab537f6edd00794f37cb7a58d0">unit</a>() != sass_end-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#30d08dab537f6edd00794f37cb7a58d0">unit</a>()) {
<a name="l00154"></a>00154       stringstream msg; msg &lt;&lt; <span class="stringliteral">"Incompatible units: '"</span>
<a name="l00155"></a>00155         &lt;&lt; sass_start-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#30d08dab537f6edd00794f37cb7a58d0">unit</a>() &lt;&lt; <span class="stringliteral">"' and '"</span>
<a name="l00156"></a>00156         &lt;&lt; sass_end-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#30d08dab537f6edd00794f37cb7a58d0">unit</a>() &lt;&lt; <span class="stringliteral">"'."</span>;
<a name="l00157"></a>00157       <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(msg.str(), low-&gt;pstate(), <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#f472d8f26172aff2c4662362af4ef650">backtrace</a>);
<a name="l00158"></a>00158     }
<a name="l00159"></a>00159     <span class="keywordtype">double</span> start = sass_start-&gt;value();
<a name="l00160"></a>00160     <span class="keywordtype">double</span> end = sass_end-&gt;value();
<a name="l00161"></a>00161     <span class="comment">// only create iterator once in this environment</span>
<a name="l00162"></a>00162     <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>* it = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>(low-&gt;pstate(), start, sass_end-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#30d08dab537f6edd00794f37cb7a58d0">unit</a>());
<a name="l00163"></a>00163     <a class="code" href="../../d4/d4a/class_sass_1_1_a_s_t___node.html">AST_Node</a>* old_var = <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#091be2458efc17573640f82adf2ff692">has_local</a>(<a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#b73157d720a334b9f177fd09aa519aad">variable</a>) ? <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#db86aa563339cc52fa984d34cbc56cde">get_local</a>(<a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#b73157d720a334b9f177fd09aa519aad">variable</a>) : 0;
<a name="l00164"></a>00164     <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#70f7aa09dda72a42d8d671dbdeb54d50">set_local</a>(<a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#b73157d720a334b9f177fd09aa519aad">variable</a>, it);
<a name="l00165"></a>00165     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* body = f-&gt;<a class="code" href="../../de/d02/class_sass_1_1_statement.html#40bf4a3f15e120a4967308486b2ddb21">block</a>();
<a name="l00166"></a>00166     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* val = 0;
<a name="l00167"></a>00167     <span class="keywordflow">if</span> (start &lt; end) {
<a name="l00168"></a>00168       <span class="keywordflow">if</span> (f-&gt;is_inclusive()) ++end;
<a name="l00169"></a>00169       <span class="keywordflow">for</span> (<span class="keywordtype">double</span> i = start;
<a name="l00170"></a>00170            i &lt; end;
<a name="l00171"></a>00171            ++i) {
<a name="l00172"></a>00172         it-&gt;value(i);
<a name="l00173"></a>00173         <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#70f7aa09dda72a42d8d671dbdeb54d50">set_local</a>(<a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#b73157d720a334b9f177fd09aa519aad">variable</a>, it);
<a name="l00174"></a>00174         val = body-&gt;perform(<span class="keyword">this</span>);
<a name="l00175"></a>00175         <span class="keywordflow">if</span> (val) <span class="keywordflow">break</span>;
<a name="l00176"></a>00176       }
<a name="l00177"></a>00177     } <span class="keywordflow">else</span> {
<a name="l00178"></a>00178       <span class="keywordflow">if</span> (f-&gt;is_inclusive()) --end;
<a name="l00179"></a>00179       <span class="keywordflow">for</span> (<span class="keywordtype">double</span> i = start;
<a name="l00180"></a>00180            i &gt; end;
<a name="l00181"></a>00181            --i) {
<a name="l00182"></a>00182         it-&gt;value(i);
<a name="l00183"></a>00183         <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#70f7aa09dda72a42d8d671dbdeb54d50">set_local</a>(<a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#b73157d720a334b9f177fd09aa519aad">variable</a>, it);
<a name="l00184"></a>00184         val = body-&gt;perform(<span class="keyword">this</span>);
<a name="l00185"></a>00185         <span class="keywordflow">if</span> (val) <span class="keywordflow">break</span>;
<a name="l00186"></a>00186       }
<a name="l00187"></a>00187     }
<a name="l00188"></a>00188     <span class="comment">// restore original environment</span>
<a name="l00189"></a>00189     <span class="keywordflow">if</span> (!old_var) <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#12986cecb534fd70a6ef036cfc2e2711">del_local</a>(<a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#b73157d720a334b9f177fd09aa519aad">variable</a>);
<a name="l00190"></a>00190     <span class="keywordflow">else</span> <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#70f7aa09dda72a42d8d671dbdeb54d50">set_local</a>(<a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#b73157d720a334b9f177fd09aa519aad">variable</a>, old_var);
<a name="l00191"></a>00191     <span class="keywordflow">return</span> val;
<a name="l00192"></a>00192   }
<a name="l00193"></a>00193 
<a name="l00194"></a>00194   <span class="comment">// Eval does not create a new env scope</span>
<a name="l00195"></a>00195   <span class="comment">// But iteration vars are reset afterwards</span>
<a name="l00196"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#030c5bf5a6e6e71d0fdad309721aa491">00196</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../d7/d5e/class_sass_1_1_each.html">Each</a>* e)
<a name="l00197"></a>00197   {
<a name="l00198"></a>00198     vector&lt;string&gt; variables(e-&gt;variables());
<a name="l00199"></a>00199     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* expr = e-&gt;list()-&gt;perform(<span class="keyword">this</span>);
<a name="l00200"></a>00200     <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* list = 0;
<a name="l00201"></a>00201     <a class="code" href="../../df/d35/class_sass_1_1_map.html">Map</a>* map = 0;
<a name="l00202"></a>00202     <span class="keywordflow">if</span> (expr-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8684cafa5feda04184537b4d7d346e1e89b">Expression::MAP</a>) {
<a name="l00203"></a>00203       map = <span class="keyword">static_cast&lt;</span><a class="code" href="../../df/d35/class_sass_1_1_map.html">Map</a>*<span class="keyword">&gt;</span>(expr);
<a name="l00204"></a>00204     }
<a name="l00205"></a>00205     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (expr-&gt;concrete_type() != <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86825688e799536738ea469158ef15fd1c0">Expression::LIST</a>) {
<a name="l00206"></a>00206       list = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>(expr-&gt;pstate(), 1, <a class="code" href="../../db/d2b/class_sass_1_1_list.html#9388a3ccf62a50f047b10c2d99114bcef81277bcd86412fe04bb68718ea09392">List::COMMA</a>);
<a name="l00207"></a>00207       *list &lt;&lt; expr;
<a name="l00208"></a>00208     }
<a name="l00209"></a>00209     <span class="keywordflow">else</span> {
<a name="l00210"></a>00210       list = <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>*<span class="keyword">&gt;</span>(expr);
<a name="l00211"></a>00211     }
<a name="l00212"></a>00212     <span class="comment">// remember variables and then reset them</span>
<a name="l00213"></a>00213     vector&lt;AST_Node*&gt; old_vars(variables.size());
<a name="l00214"></a>00214     <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, L = variables.size(); i &lt; L; ++i) {
<a name="l00215"></a>00215       old_vars[i] = <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#091be2458efc17573640f82adf2ff692">has_local</a>(variables[i]) ? <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#db86aa563339cc52fa984d34cbc56cde">get_local</a>(variables[i]) : 0;
<a name="l00216"></a>00216       <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#70f7aa09dda72a42d8d671dbdeb54d50">set_local</a>(variables[i], 0);
<a name="l00217"></a>00217     }
<a name="l00218"></a>00218     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* body = e-&gt;<a class="code" href="../../de/d02/class_sass_1_1_statement.html#40bf4a3f15e120a4967308486b2ddb21">block</a>();
<a name="l00219"></a>00219     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* val = 0;
<a name="l00220"></a>00220 
<a name="l00221"></a>00221     <span class="keywordflow">if</span> (map) {
<a name="l00222"></a>00222       <span class="keywordflow">for</span> (<span class="keyword">auto</span> key : map-&gt;<a class="code" href="../../d8/d9a/class_sass_1_1_hashed.html#303d5ff19057db2967dd268704bcdd26">keys</a>()) {
<a name="l00223"></a>00223         <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* value = map-&gt;<a class="code" href="../../d8/d9a/class_sass_1_1_hashed.html#b474fc60b9dc981978186a4fd9822e38">at</a>(key);
<a name="l00224"></a>00224 
<a name="l00225"></a>00225         <span class="keywordflow">if</span> (variables.size() == 1) {
<a name="l00226"></a>00226           <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#b73157d720a334b9f177fd09aa519aad">variable</a> = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>(map-&gt;pstate(), 2, <a class="code" href="../../db/d2b/class_sass_1_1_list.html#9388a3ccf62a50f047b10c2d99114bcec08dae7edcb5c5bb959fee5971fbad95">List::SPACE</a>);
<a name="l00227"></a>00227           *variable &lt;&lt; key;
<a name="l00228"></a>00228           *variable &lt;&lt; value;
<a name="l00229"></a>00229           <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#70f7aa09dda72a42d8d671dbdeb54d50">set_local</a>(variables[0], variable);
<a name="l00230"></a>00230         } <span class="keywordflow">else</span> {
<a name="l00231"></a>00231           <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#70f7aa09dda72a42d8d671dbdeb54d50">set_local</a>(variables[0], key);
<a name="l00232"></a>00232           <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#70f7aa09dda72a42d8d671dbdeb54d50">set_local</a>(variables[1], value);
<a name="l00233"></a>00233         }
<a name="l00234"></a>00234 
<a name="l00235"></a>00235         val = body-&gt;perform(<span class="keyword">this</span>);
<a name="l00236"></a>00236         <span class="keywordflow">if</span> (val) <span class="keywordflow">break</span>;
<a name="l00237"></a>00237       }
<a name="l00238"></a>00238     }
<a name="l00239"></a>00239     <span class="keywordflow">else</span> {
<a name="l00240"></a>00240       <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, L = list-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>(); i &lt; L; ++i) {
<a name="l00241"></a>00241         <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#b73157d720a334b9f177fd09aa519aad">variable</a> = 0;
<a name="l00242"></a>00242         <span class="keywordflow">if</span> ((*list)[i]-&gt;concrete_type() != <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86825688e799536738ea469158ef15fd1c0">Expression::LIST</a> || variables.size() == 1) {
<a name="l00243"></a>00243           variable = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>((*list)[i]-&gt;pstate(), 1, <a class="code" href="../../db/d2b/class_sass_1_1_list.html#9388a3ccf62a50f047b10c2d99114bcef81277bcd86412fe04bb68718ea09392">List::COMMA</a>);
<a name="l00244"></a>00244           *variable &lt;&lt; (*list)[i];
<a name="l00245"></a>00245         }
<a name="l00246"></a>00246         <span class="keywordflow">else</span> {
<a name="l00247"></a>00247           variable = <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>*<span class="keyword">&gt;</span>((*list)[i]);
<a name="l00248"></a>00248         }
<a name="l00249"></a>00249         <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0, K = variables.size(); j &lt; K; ++j) {
<a name="l00250"></a>00250           <span class="keywordflow">if</span> (j &lt; variable-&gt;length()) {
<a name="l00251"></a>00251             <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#70f7aa09dda72a42d8d671dbdeb54d50">set_local</a>(variables[j], (*variable)[j]);
<a name="l00252"></a>00252           }
<a name="l00253"></a>00253           <span class="keywordflow">else</span> {
<a name="l00254"></a>00254             <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#70f7aa09dda72a42d8d671dbdeb54d50">set_local</a>(variables[j], <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d1/d20/class_sass_1_1_null.html">Null</a>(expr-&gt;pstate()));
<a name="l00255"></a>00255           }
<a name="l00256"></a>00256           val = body-&gt;perform(<span class="keyword">this</span>);
<a name="l00257"></a>00257           <span class="keywordflow">if</span> (val) <span class="keywordflow">break</span>;
<a name="l00258"></a>00258         }
<a name="l00259"></a>00259         <span class="keywordflow">if</span> (val) <span class="keywordflow">break</span>;
<a name="l00260"></a>00260       }
<a name="l00261"></a>00261     }
<a name="l00262"></a>00262     <span class="comment">// restore original environment</span>
<a name="l00263"></a>00263     <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0, K = variables.size(); j &lt; K; ++j) {
<a name="l00264"></a>00264       <span class="keywordflow">if</span>(!old_vars[j]) <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#12986cecb534fd70a6ef036cfc2e2711">del_local</a>(variables[j]);
<a name="l00265"></a>00265       <span class="keywordflow">else</span> <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#70f7aa09dda72a42d8d671dbdeb54d50">set_local</a>(variables[j], old_vars[j]);
<a name="l00266"></a>00266     }
<a name="l00267"></a>00267     <span class="keywordflow">return</span> val;
<a name="l00268"></a>00268   }
<a name="l00269"></a>00269 
<a name="l00270"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#269e51ef3af9f8a10dbbd3bcf4acb004">00270</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../d3/d55/class_sass_1_1_while.html">While</a>* w)
<a name="l00271"></a>00271   {
<a name="l00272"></a>00272     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* pred = w-&gt;predicate();
<a name="l00273"></a>00273     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>* body = w-&gt;<a class="code" href="../../de/d02/class_sass_1_1_statement.html#40bf4a3f15e120a4967308486b2ddb21">block</a>();
<a name="l00274"></a>00274     <span class="keywordflow">while</span> (*pred-&gt;perform(<span class="keyword">this</span>)) {
<a name="l00275"></a>00275       <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* val = body-&gt;perform(<span class="keyword">this</span>);
<a name="l00276"></a>00276       <span class="keywordflow">if</span> (val) <span class="keywordflow">return</span> val;
<a name="l00277"></a>00277     }
<a name="l00278"></a>00278     <span class="keywordflow">return</span> 0;
<a name="l00279"></a>00279   }
<a name="l00280"></a>00280 
<a name="l00281"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#909379a4dbd17e8c34661ef4584f0855">00281</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../d6/d29/class_sass_1_1_return.html">Return</a>* r)
<a name="l00282"></a>00282   {
<a name="l00283"></a>00283     <span class="keywordflow">return</span> r-&gt;value()-&gt;perform(<span class="keyword">this</span>);
<a name="l00284"></a>00284   }
<a name="l00285"></a>00285 
<a name="l00286"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#ec927b28625569dedcac417bc2e411b9">00286</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../d3/d5e/class_sass_1_1_warning.html">Warning</a>* w)
<a name="l00287"></a>00287   {
<a name="l00288"></a>00288     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* message = w-&gt;message()-&gt;perform(<span class="keyword">this</span>);
<a name="l00289"></a>00289     <a class="code" href="../../de/d6e/class_sass_1_1_to___string.html">To_String</a> <a class="code" href="../../da/d80/namespace_sass.html#c098cb6b59a09dd2673ba0f3c23d8253">to_string</a>(&amp;<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>);
<a name="l00290"></a>00290 
<a name="l00291"></a>00291     <span class="comment">// try to use generic function</span>
<a name="l00292"></a>00292     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#7fa4ea66303ad75877207a8ecc15e345">has</a>(<span class="stringliteral">"@warn[f]"</span>)) {
<a name="l00293"></a>00293 
<a name="l00294"></a>00294       <a class="code" href="../../db/d55/class_sass_1_1_definition.html">Definition</a>* def = <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d55/class_sass_1_1_definition.html">Definition</a>*<span class="keyword">&gt;</span>((*env)[<span class="stringliteral">"@warn[f]"</span>]);
<a name="l00295"></a>00295       <span class="comment">// Block*          body   = def-&gt;block();</span>
<a name="l00296"></a>00296       <span class="comment">// Native_Function func   = def-&gt;native_function();</span>
<a name="l00297"></a>00297       <a class="code" href="../../d8/dcc/struct_sass___function.html">Sass_Function_Entry</a> c_function = def-&gt;c_function();
<a name="l00298"></a>00298       <a class="code" href="../../de/dd9/sass__functions_8h.html#612f50b05219cb7e558647c98440d2bc">Sass_Function_Fn</a> c_func = <a class="code" href="../../d4/d5b/sass__functions_8cpp.html#99b7c4cdec43ecfffedabd4f4452c579">sass_function_get_function</a>(c_function);
<a name="l00299"></a>00299 
<a name="l00300"></a>00300       <a class="code" href="../../dd/d0f/class_sass_1_1_to___c.html">To_C</a> to_c;
<a name="l00301"></a>00301       <span class="keyword">union </span><a class="code" href="../../d1/db0/union_sass___value.html">Sass_Value</a>* c_args = <a class="code" href="../../df/d67/sass__values_8cpp.html#66794ab38dd91296444e939e27203a43">sass_make_list</a>(1, <a class="code" href="../../d2/d8b/sass__values_8h.html#db3e2a12286c445dd0048f95306175d17f14c3e1435f77190afa0632f70e613a">SASS_COMMA</a>);
<a name="l00302"></a>00302       <a class="code" href="../../df/d67/sass__values_8cpp.html#f4dd4a4efeb4aca0ee1eccd4ca70dd4d">sass_list_set_value</a>(c_args, 0, message-&gt;perform(&amp;to_c));
<a name="l00303"></a>00303       <a class="code" href="../../d1/db0/union_sass___value.html">Sass_Value</a>* c_val = c_func(c_args, c_function, <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#ae979a48bbaf03b533fc0e66083badfa">c_options</a>);
<a name="l00304"></a>00304       <a class="code" href="../../df/d67/sass__values_8cpp.html#f73ef82ec7d519dcf5afe223c2b61429">sass_delete_value</a>(c_args);
<a name="l00305"></a>00305       <a class="code" href="../../df/d67/sass__values_8cpp.html#f73ef82ec7d519dcf5afe223c2b61429">sass_delete_value</a>(c_val);
<a name="l00306"></a>00306       <span class="keywordflow">return</span> 0;
<a name="l00307"></a>00307 
<a name="l00308"></a>00308     }
<a name="l00309"></a>00309 
<a name="l00310"></a>00310     <span class="keywordtype">string</span> result(<a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(message-&gt;perform(&amp;to_string)));
<a name="l00311"></a>00311     <a class="code" href="../../d3/d1e/struct_sass_1_1_backtrace.html">Backtrace</a> top(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#f472d8f26172aff2c4662362af4ef650">backtrace</a>, w-&gt;pstate(), <span class="stringliteral">""</span>);
<a name="l00312"></a>00312     cerr &lt;&lt; <span class="stringliteral">"WARNING: "</span> &lt;&lt; result;
<a name="l00313"></a>00313     cerr &lt;&lt; top.to_string(<span class="keyword">true</span>);
<a name="l00314"></a>00314     cerr &lt;&lt; endl &lt;&lt; endl;
<a name="l00315"></a>00315     <span class="keywordflow">return</span> 0;
<a name="l00316"></a>00316   }
<a name="l00317"></a>00317 
<a name="l00318"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#24b1d1b46aee0cf2c0f174b89cafc1b7">00318</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../dd/d37/class_sass_1_1_error.html">Error</a>* e)
<a name="l00319"></a>00319   {
<a name="l00320"></a>00320     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* message = e-&gt;message()-&gt;perform(<span class="keyword">this</span>);
<a name="l00321"></a>00321     <a class="code" href="../../de/d6e/class_sass_1_1_to___string.html">To_String</a> <a class="code" href="../../da/d80/namespace_sass.html#c098cb6b59a09dd2673ba0f3c23d8253">to_string</a>(&amp;<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>);
<a name="l00322"></a>00322 
<a name="l00323"></a>00323     <span class="comment">// try to use generic function</span>
<a name="l00324"></a>00324     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#7fa4ea66303ad75877207a8ecc15e345">has</a>(<span class="stringliteral">"@error[f]"</span>)) {
<a name="l00325"></a>00325 
<a name="l00326"></a>00326       <a class="code" href="../../db/d55/class_sass_1_1_definition.html">Definition</a>* def = <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d55/class_sass_1_1_definition.html">Definition</a>*<span class="keyword">&gt;</span>((*env)[<span class="stringliteral">"@error[f]"</span>]);
<a name="l00327"></a>00327       <span class="comment">// Block*          body   = def-&gt;block();</span>
<a name="l00328"></a>00328       <span class="comment">// Native_Function func   = def-&gt;native_function();</span>
<a name="l00329"></a>00329       <a class="code" href="../../d8/dcc/struct_sass___function.html">Sass_Function_Entry</a> c_function = def-&gt;c_function();
<a name="l00330"></a>00330       <a class="code" href="../../de/dd9/sass__functions_8h.html#612f50b05219cb7e558647c98440d2bc">Sass_Function_Fn</a> c_func = <a class="code" href="../../d4/d5b/sass__functions_8cpp.html#99b7c4cdec43ecfffedabd4f4452c579">sass_function_get_function</a>(c_function);
<a name="l00331"></a>00331 
<a name="l00332"></a>00332       <a class="code" href="../../dd/d0f/class_sass_1_1_to___c.html">To_C</a> to_c;
<a name="l00333"></a>00333       <span class="keyword">union </span><a class="code" href="../../d1/db0/union_sass___value.html">Sass_Value</a>* c_args = <a class="code" href="../../df/d67/sass__values_8cpp.html#66794ab38dd91296444e939e27203a43">sass_make_list</a>(1, <a class="code" href="../../d2/d8b/sass__values_8h.html#db3e2a12286c445dd0048f95306175d17f14c3e1435f77190afa0632f70e613a">SASS_COMMA</a>);
<a name="l00334"></a>00334       <a class="code" href="../../df/d67/sass__values_8cpp.html#f4dd4a4efeb4aca0ee1eccd4ca70dd4d">sass_list_set_value</a>(c_args, 0, message-&gt;perform(&amp;to_c));
<a name="l00335"></a>00335       <a class="code" href="../../d1/db0/union_sass___value.html">Sass_Value</a>* c_val = c_func(c_args, c_function, <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#ae979a48bbaf03b533fc0e66083badfa">c_options</a>);
<a name="l00336"></a>00336       <a class="code" href="../../df/d67/sass__values_8cpp.html#f73ef82ec7d519dcf5afe223c2b61429">sass_delete_value</a>(c_args);
<a name="l00337"></a>00337       <a class="code" href="../../df/d67/sass__values_8cpp.html#f73ef82ec7d519dcf5afe223c2b61429">sass_delete_value</a>(c_val);
<a name="l00338"></a>00338       <span class="keywordflow">return</span> 0;
<a name="l00339"></a>00339 
<a name="l00340"></a>00340     }
<a name="l00341"></a>00341 
<a name="l00342"></a>00342     <span class="keywordtype">string</span> result(<a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(message-&gt;perform(&amp;to_string)));
<a name="l00343"></a>00343     <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(result, e-&gt;pstate());
<a name="l00344"></a>00344     <span class="keywordflow">return</span> 0;
<a name="l00345"></a>00345   }
<a name="l00346"></a>00346 
<a name="l00347"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#ba365bc98502a2423973521868166883">00347</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../df/d62/class_sass_1_1_debug.html">Debug</a>* d)
<a name="l00348"></a>00348   {
<a name="l00349"></a>00349     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* message = d-&gt;value()-&gt;perform(<span class="keyword">this</span>);
<a name="l00350"></a>00350     <a class="code" href="../../de/d6e/class_sass_1_1_to___string.html">To_String</a> <a class="code" href="../../da/d80/namespace_sass.html#c098cb6b59a09dd2673ba0f3c23d8253">to_string</a>(&amp;<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>);
<a name="l00351"></a>00351 
<a name="l00352"></a>00352     <span class="comment">// try to use generic function</span>
<a name="l00353"></a>00353     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#7fa4ea66303ad75877207a8ecc15e345">has</a>(<span class="stringliteral">"@debug[f]"</span>)) {
<a name="l00354"></a>00354 
<a name="l00355"></a>00355       <a class="code" href="../../db/d55/class_sass_1_1_definition.html">Definition</a>* def = <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d55/class_sass_1_1_definition.html">Definition</a>*<span class="keyword">&gt;</span>((*env)[<span class="stringliteral">"@debug[f]"</span>]);
<a name="l00356"></a>00356       <span class="comment">// Block*          body   = def-&gt;block();</span>
<a name="l00357"></a>00357       <span class="comment">// Native_Function func   = def-&gt;native_function();</span>
<a name="l00358"></a>00358       <a class="code" href="../../d8/dcc/struct_sass___function.html">Sass_Function_Entry</a> c_function = def-&gt;c_function();
<a name="l00359"></a>00359       <a class="code" href="../../de/dd9/sass__functions_8h.html#612f50b05219cb7e558647c98440d2bc">Sass_Function_Fn</a> c_func = <a class="code" href="../../d4/d5b/sass__functions_8cpp.html#99b7c4cdec43ecfffedabd4f4452c579">sass_function_get_function</a>(c_function);
<a name="l00360"></a>00360 
<a name="l00361"></a>00361       <a class="code" href="../../dd/d0f/class_sass_1_1_to___c.html">To_C</a> to_c;
<a name="l00362"></a>00362       <span class="keyword">union </span><a class="code" href="../../d1/db0/union_sass___value.html">Sass_Value</a>* c_args = <a class="code" href="../../df/d67/sass__values_8cpp.html#66794ab38dd91296444e939e27203a43">sass_make_list</a>(1, <a class="code" href="../../d2/d8b/sass__values_8h.html#db3e2a12286c445dd0048f95306175d17f14c3e1435f77190afa0632f70e613a">SASS_COMMA</a>);
<a name="l00363"></a>00363       <a class="code" href="../../df/d67/sass__values_8cpp.html#f4dd4a4efeb4aca0ee1eccd4ca70dd4d">sass_list_set_value</a>(c_args, 0, message-&gt;perform(&amp;to_c));
<a name="l00364"></a>00364       <a class="code" href="../../d1/db0/union_sass___value.html">Sass_Value</a>* c_val = c_func(c_args, c_function, <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#ae979a48bbaf03b533fc0e66083badfa">c_options</a>);
<a name="l00365"></a>00365       <a class="code" href="../../df/d67/sass__values_8cpp.html#f73ef82ec7d519dcf5afe223c2b61429">sass_delete_value</a>(c_args);
<a name="l00366"></a>00366       <a class="code" href="../../df/d67/sass__values_8cpp.html#f73ef82ec7d519dcf5afe223c2b61429">sass_delete_value</a>(c_val);
<a name="l00367"></a>00367       <span class="keywordflow">return</span> 0;
<a name="l00368"></a>00368 
<a name="l00369"></a>00369     }
<a name="l00370"></a>00370 
<a name="l00371"></a>00371     <span class="keywordtype">string</span> cwd(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#c3919d78126216c5952dca24933b799e">get_cwd</a>());
<a name="l00372"></a>00372     <span class="keywordtype">string</span> result(<a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(message-&gt;perform(&amp;to_string)));
<a name="l00373"></a>00373     <span class="keywordtype">string</span> rel_path(<a class="code" href="../../df/dfe/namespace_sass_1_1_file.html#681fe0436a6895cd2c35036de917eacd">Sass::File::resolve_relative_path</a>(d-&gt;pstate().path, cwd, cwd));
<a name="l00374"></a>00374     cerr &lt;&lt; rel_path &lt;&lt; <span class="stringliteral">":"</span> &lt;&lt; d-&gt;pstate().line &lt;&lt; <span class="stringliteral">":"</span> &lt;&lt; <span class="stringliteral">" DEBUG: "</span> &lt;&lt; result;
<a name="l00375"></a>00375     cerr &lt;&lt; endl;
<a name="l00376"></a>00376     <span class="keywordflow">return</span> 0;
<a name="l00377"></a>00377   }
<a name="l00378"></a>00378 
<a name="l00379"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#eae748df98f166dba2b332328ac8d258">00379</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* <a class="code" href="../../d4/d9b/common_8inc_8php.html#367c038113690266a013d2e04a42a3b1" title="Shorthand method for the Localization::localize method.">l</a>)
<a name="l00380"></a>00380   {
<a name="l00381"></a>00381     <span class="keywordflow">if</span> (l-&gt;is_expanded()) <span class="keywordflow">return</span> l;
<a name="l00382"></a>00382     <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* ll = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>(l-&gt;pstate(),
<a name="l00383"></a>00383                                   l-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>(),
<a name="l00384"></a>00384                                   l-&gt;separator(),
<a name="l00385"></a>00385                                   l-&gt;is_arglist());
<a name="l00386"></a>00386     <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, L = l-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>(); i &lt; L; ++i) {
<a name="l00387"></a>00387       *ll &lt;&lt; (*l)[i]-&gt;perform(<span class="keyword">this</span>);
<a name="l00388"></a>00388     }
<a name="l00389"></a>00389     ll-&gt;is_expanded(<span class="keyword">true</span>);
<a name="l00390"></a>00390     <span class="keywordflow">return</span> ll;
<a name="l00391"></a>00391   }
<a name="l00392"></a>00392 
<a name="l00393"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#9b5a13ead8442f6913facf45fff7b7f8">00393</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../df/d35/class_sass_1_1_map.html">Map</a>* m)
<a name="l00394"></a>00394   {
<a name="l00395"></a>00395     <span class="keywordflow">if</span> (m-&gt;is_expanded()) <span class="keywordflow">return</span> m;
<a name="l00396"></a>00396 
<a name="l00397"></a>00397     <span class="comment">// make sure we're not starting with duplicate keys.</span>
<a name="l00398"></a>00398     <span class="comment">// the duplicate key state will have been set in the parser phase.</span>
<a name="l00399"></a>00399     <span class="keywordflow">if</span> (m-&gt;<a class="code" href="../../d8/d9a/class_sass_1_1_hashed.html#e7fce36a26cf411509d0bcd7a041d49e">has_duplicate_key</a>()) {
<a name="l00400"></a>00400       <a class="code" href="../../de/d6e/class_sass_1_1_to___string.html">To_String</a> <a class="code" href="../../da/d80/namespace_sass.html#c098cb6b59a09dd2673ba0f3c23d8253">to_string</a>(&amp;<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>);
<a name="l00401"></a>00401       <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"Duplicate key \""</span> + m-&gt;<a class="code" href="../../d8/d9a/class_sass_1_1_hashed.html#e869bae7309021cb9f4da487423e98b0">get_duplicate_key</a>()-&gt;perform(&amp;to_string) + <span class="stringliteral">"\" in map "</span> + m-&gt;perform(&amp;to_string) + <span class="stringliteral">"."</span>, m-&gt;pstate());
<a name="l00402"></a>00402     }
<a name="l00403"></a>00403 
<a name="l00404"></a>00404     <a class="code" href="../../df/d35/class_sass_1_1_map.html">Map</a>* mm = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../df/d35/class_sass_1_1_map.html">Map</a>(m-&gt;pstate(),
<a name="l00405"></a>00405                                   m-&gt;<a class="code" href="../../d8/d9a/class_sass_1_1_hashed.html#2edf269e5cd490f7863c9150bb910c85">length</a>());
<a name="l00406"></a>00406     <span class="keywordflow">for</span> (<span class="keyword">auto</span> key : m-&gt;<a class="code" href="../../d8/d9a/class_sass_1_1_hashed.html#303d5ff19057db2967dd268704bcdd26">keys</a>()) {
<a name="l00407"></a>00407       *mm &lt;&lt; std::make_pair(key-&gt;perform(<span class="keyword">this</span>), m-&gt;<a class="code" href="../../d8/d9a/class_sass_1_1_hashed.html#b474fc60b9dc981978186a4fd9822e38">at</a>(key)-&gt;perform(<span class="keyword">this</span>));;
<a name="l00408"></a>00408     }
<a name="l00409"></a>00409 
<a name="l00410"></a>00410     <span class="comment">// check the evaluated keys aren't duplicates.</span>
<a name="l00411"></a>00411     <span class="keywordflow">if</span> (mm-&gt;<a class="code" href="../../d8/d9a/class_sass_1_1_hashed.html#e7fce36a26cf411509d0bcd7a041d49e">has_duplicate_key</a>()) {
<a name="l00412"></a>00412       <a class="code" href="../../de/d6e/class_sass_1_1_to___string.html">To_String</a> <a class="code" href="../../da/d80/namespace_sass.html#c098cb6b59a09dd2673ba0f3c23d8253">to_string</a>(&amp;<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>);
<a name="l00413"></a>00413       <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"Duplicate key \""</span> + mm-&gt;<a class="code" href="../../d8/d9a/class_sass_1_1_hashed.html#e869bae7309021cb9f4da487423e98b0">get_duplicate_key</a>()-&gt;perform(&amp;to_string) + <span class="stringliteral">"\" in map "</span> + mm-&gt;perform(&amp;to_string) + <span class="stringliteral">"."</span>, mm-&gt;pstate());
<a name="l00414"></a>00414     }
<a name="l00415"></a>00415 
<a name="l00416"></a>00416     mm-&gt;is_expanded(<span class="keyword">true</span>);
<a name="l00417"></a>00417     <span class="keywordflow">return</span> mm;
<a name="l00418"></a>00418   }
<a name="l00419"></a>00419 
<a name="l00420"></a>00420   <span class="comment">// -- only need to define two comparisons, and the rest can be implemented in terms of them</span>
<a name="l00421"></a>00421   <span class="keywordtype">bool</span> <a class="code" href="../../da/d80/namespace_sass.html#642a2a076d4f3f2d48ba11e228eb2e45">eq</a>(<a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*, <a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp;, <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html">Eval</a>*);
<a name="l00422"></a>00422   <span class="keywordtype">bool</span> <a class="code" href="../../da/d80/namespace_sass.html#2930a5669b8cf79372a38b53e19ffc6c">lt</a>(<a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*, <a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp;);
<a name="l00423"></a>00423   <span class="comment">// -- arithmetic on the combinations that matter</span>
<a name="l00424"></a>00424   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../da/d80/namespace_sass.html#938b3abad2f9ebeab2087807b9012a0c">op_numbers</a>(<a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp;, <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html">Binary_Expression</a>*, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*);
<a name="l00425"></a>00425   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../da/d80/namespace_sass.html#cc42a14fe9d6d24d2c9f7434416d23b0">op_number_color</a>(<a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp;, <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7">Binary_Expression::Type</a>, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*);
<a name="l00426"></a>00426   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../da/d80/namespace_sass.html#b7e6d42a242e95d972849361e5de2a98">op_color_number</a>(<a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp;, <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7">Binary_Expression::Type</a>, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*);
<a name="l00427"></a>00427   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../da/d80/namespace_sass.html#2abf184ce00ca81a17bbc70ce56ea204">op_colors</a>(<a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp;, <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7">Binary_Expression::Type</a>, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*);
<a name="l00428"></a>00428   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../da/d80/namespace_sass.html#b216948ec8912a9024aaf109d57540a4">op_strings</a>(<a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp;, <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7">Binary_Expression::Type</a>, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*);
<a name="l00429"></a>00429 
<a name="l00430"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#e38f55eac221803d00df6ae03a4829a0">00430</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html">Binary_Expression</a>* b)
<a name="l00431"></a>00431   {
<a name="l00432"></a>00432     <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7">Binary_Expression::Type</a> op_type = b-&gt;<a class="code" href="../../db/df1/class_sass_1_1_expression.html#f9f069732bfdd88e8e8b13652f3af643">type</a>();
<a name="l00433"></a>00433     <span class="comment">// don't eval delayed expressions (the '/' when used as a separator)</span>
<a name="l00434"></a>00434     <span class="keywordflow">if</span> (op_type == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a78565f0d60c3ba6d468661c49d86e9744">Binary_Expression::DIV</a> &amp;&amp; b-&gt;is_delayed()) <span class="keywordflow">return</span> b;
<a name="l00435"></a>00435     <span class="comment">// if one of the operands is a '/' then make sure it's evaluated</span>
<a name="l00436"></a>00436     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* lhs = b-&gt;left()-&gt;perform(<span class="keyword">this</span>);
<a name="l00437"></a>00437     lhs-&gt;is_delayed(<span class="keyword">false</span>);
<a name="l00438"></a>00438     <span class="keywordflow">while</span> (<span class="keyword">typeid</span>(*lhs) == <span class="keyword">typeid</span>(<a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html">Binary_Expression</a>)) lhs = lhs-&gt;perform(<span class="keyword">this</span>);
<a name="l00439"></a>00439 
<a name="l00440"></a>00440     <span class="keywordflow">switch</span> (op_type) {
<a name="l00441"></a>00441       <span class="keywordflow">case</span> <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7865555c9f2e0458a7078486aa1b3254f">Binary_Expression::AND</a>:
<a name="l00442"></a>00442         <span class="keywordflow">return</span> *lhs ? b-&gt;right()-&gt;perform(<span class="keyword">this</span>) : lhs;
<a name="l00443"></a>00443         <span class="keywordflow">break</span>;
<a name="l00444"></a>00444 
<a name="l00445"></a>00445       <span class="keywordflow">case</span> <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a796727447c0ad447987df1c6415aef074">Binary_Expression::OR</a>:
<a name="l00446"></a>00446         <span class="keywordflow">return</span> *lhs ? lhs : b-&gt;right()-&gt;perform(<span class="keyword">this</span>);
<a name="l00447"></a>00447         <span class="keywordflow">break</span>;
<a name="l00448"></a>00448 
<a name="l00449"></a>00449       <span class="keywordflow">default</span>:
<a name="l00450"></a>00450         <span class="keywordflow">break</span>;
<a name="l00451"></a>00451     }
<a name="l00452"></a>00452     <span class="comment">// not a logical connective, so go ahead and eval the rhs</span>
<a name="l00453"></a>00453     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* rhs = b-&gt;right()-&gt;perform(<span class="keyword">this</span>);
<a name="l00454"></a>00454     <span class="comment">// maybe fully evaluate structure</span>
<a name="l00455"></a>00455     <span class="keywordflow">if</span> (op_type == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a79efdc855f3c1477957fb50affec07f8f">Binary_Expression::EQ</a> ||
<a name="l00456"></a>00456         op_type == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7b4ab8d2a8dc61f08e3cc919787c79cd8">Binary_Expression::NEQ</a> ||
<a name="l00457"></a>00457         op_type == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a712f5476fa04803e6cc72f2198730d892">Binary_Expression::GT</a> ||
<a name="l00458"></a>00458         op_type == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a77303510947cbe9a41f9fed933a881e3c">Binary_Expression::GTE</a> ||
<a name="l00459"></a>00459         op_type == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7486aa221ceeeac475326e85d3d37f571">Binary_Expression::LT</a> ||
<a name="l00460"></a>00460         op_type == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7dd4edd9fb0d6fad316ff9db560c4096d">Binary_Expression::LTE</a>)
<a name="l00461"></a>00461     {
<a name="l00462"></a>00462       rhs-&gt;is_expanded(<span class="keyword">false</span>);
<a name="l00463"></a>00463       rhs-&gt;<a class="code" href="../../db/df1/class_sass_1_1_expression.html#1b174bdeb77683b4e24a1b07c0b00e3c">set_delayed</a>(<span class="keyword">false</span>);
<a name="l00464"></a>00464       rhs = rhs-&gt;perform(<span class="keyword">this</span>);
<a name="l00465"></a>00465     }
<a name="l00466"></a>00466     <span class="keywordflow">else</span>
<a name="l00467"></a>00467     {
<a name="l00468"></a>00468       rhs-&gt;is_delayed(<span class="keyword">false</span>);
<a name="l00469"></a>00469       rhs = rhs-&gt;perform(<span class="keyword">this</span>);
<a name="l00470"></a>00470     }
<a name="l00471"></a>00471 
<a name="l00472"></a>00472     <span class="comment">// see if it's a relational expression</span>
<a name="l00473"></a>00473     <span class="keywordflow">switch</span>(op_type) {
<a name="l00474"></a>00474       <span class="keywordflow">case</span> <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a79efdc855f3c1477957fb50affec07f8f">Binary_Expression::EQ</a>:  <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d4a/class_sass_1_1_boolean.html">Boolean</a>(b-&gt;pstate(), <a class="code" href="../../da/d80/namespace_sass.html#642a2a076d4f3f2d48ba11e228eb2e45">eq</a>(lhs, rhs, <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>));
<a name="l00475"></a>00475       <span class="keywordflow">case</span> <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7b4ab8d2a8dc61f08e3cc919787c79cd8">Binary_Expression::NEQ</a>: <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d4a/class_sass_1_1_boolean.html">Boolean</a>(b-&gt;pstate(), !<a class="code" href="../../da/d80/namespace_sass.html#642a2a076d4f3f2d48ba11e228eb2e45">eq</a>(lhs, rhs, <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>));
<a name="l00476"></a>00476       <span class="keywordflow">case</span> <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a712f5476fa04803e6cc72f2198730d892">Binary_Expression::GT</a>:  <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d4a/class_sass_1_1_boolean.html">Boolean</a>(b-&gt;pstate(), !<a class="code" href="../../da/d80/namespace_sass.html#2930a5669b8cf79372a38b53e19ffc6c">lt</a>(lhs, rhs, <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>) &amp;&amp; !<a class="code" href="../../da/d80/namespace_sass.html#642a2a076d4f3f2d48ba11e228eb2e45">eq</a>(lhs, rhs, <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>));
<a name="l00477"></a>00477       <span class="keywordflow">case</span> <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a77303510947cbe9a41f9fed933a881e3c">Binary_Expression::GTE</a>: <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d4a/class_sass_1_1_boolean.html">Boolean</a>(b-&gt;pstate(), !<a class="code" href="../../da/d80/namespace_sass.html#2930a5669b8cf79372a38b53e19ffc6c">lt</a>(lhs, rhs, <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>));
<a name="l00478"></a>00478       <span class="keywordflow">case</span> <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7486aa221ceeeac475326e85d3d37f571">Binary_Expression::LT</a>:  <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d4a/class_sass_1_1_boolean.html">Boolean</a>(b-&gt;pstate(), <a class="code" href="../../da/d80/namespace_sass.html#2930a5669b8cf79372a38b53e19ffc6c">lt</a>(lhs, rhs, <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>));
<a name="l00479"></a>00479       <span class="keywordflow">case</span> <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7dd4edd9fb0d6fad316ff9db560c4096d">Binary_Expression::LTE</a>: <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d4a/class_sass_1_1_boolean.html">Boolean</a>(b-&gt;pstate(), <a class="code" href="../../da/d80/namespace_sass.html#2930a5669b8cf79372a38b53e19ffc6c">lt</a>(lhs, rhs, <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>) || <a class="code" href="../../da/d80/namespace_sass.html#642a2a076d4f3f2d48ba11e228eb2e45">eq</a>(lhs, rhs, <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>));
<a name="l00480"></a>00480 
<a name="l00481"></a>00481       <span class="keywordflow">default</span>:                     <span class="keywordflow">break</span>;
<a name="l00482"></a>00482     }
<a name="l00483"></a>00483 
<a name="l00484"></a>00484     <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede868">Expression::Concrete_Type</a> l_type = lhs-&gt;concrete_type();
<a name="l00485"></a>00485     <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede868">Expression::Concrete_Type</a> r_type = rhs-&gt;concrete_type();
<a name="l00486"></a>00486 
<a name="l00487"></a>00487     <span class="keywordflow">if</span> (l_type == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86812a90dfe20486bbe3e075afcd19ef2d0">Expression::NUMBER</a> &amp;&amp; r_type == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86812a90dfe20486bbe3e075afcd19ef2d0">Expression::NUMBER</a>) {
<a name="l00488"></a>00488       <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#938b3abad2f9ebeab2087807b9012a0c">op_numbers</a>(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>, b, lhs, rhs);
<a name="l00489"></a>00489     }
<a name="l00490"></a>00490     <span class="keywordflow">if</span> (l_type == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86812a90dfe20486bbe3e075afcd19ef2d0">Expression::NUMBER</a> &amp;&amp; r_type == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8687a5ecb5193db2d5f258ae1abd33714b9">Expression::COLOR</a>) {
<a name="l00491"></a>00491       <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#cc42a14fe9d6d24d2c9f7434416d23b0">op_number_color</a>(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>, op_type, lhs, rhs);
<a name="l00492"></a>00492     }
<a name="l00493"></a>00493     <span class="keywordflow">if</span> (l_type == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8687a5ecb5193db2d5f258ae1abd33714b9">Expression::COLOR</a> &amp;&amp; r_type == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86812a90dfe20486bbe3e075afcd19ef2d0">Expression::NUMBER</a>) {
<a name="l00494"></a>00494       <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#b7e6d42a242e95d972849361e5de2a98">op_color_number</a>(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>, op_type, lhs, rhs);
<a name="l00495"></a>00495     }
<a name="l00496"></a>00496     <span class="keywordflow">if</span> (l_type == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8687a5ecb5193db2d5f258ae1abd33714b9">Expression::COLOR</a> &amp;&amp; r_type == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8687a5ecb5193db2d5f258ae1abd33714b9">Expression::COLOR</a>) {
<a name="l00497"></a>00497       <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#2abf184ce00ca81a17bbc70ce56ea204">op_colors</a>(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>, op_type, lhs, rhs);
<a name="l00498"></a>00498     }
<a name="l00499"></a>00499 
<a name="l00500"></a>00500     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* ex = <a class="code" href="../../da/d80/namespace_sass.html#b216948ec8912a9024aaf109d57540a4">op_strings</a>(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>, op_type, lhs, rhs);
<a name="l00501"></a>00501     <span class="keywordflow">if</span> (<a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>* str = (<a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>*) ex)
<a name="l00502"></a>00502     {
<a name="l00503"></a>00503       <span class="keywordflow">if</span> (str-&gt;concrete_type() != <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede868ee847e634a4297b274316de8a8ca9921">Expression::STRING</a>) <span class="keywordflow">return</span> ex;
<a name="l00504"></a>00504       <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>* lstr = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>*<span class="keyword">&gt;</span>(lhs);
<a name="l00505"></a>00505       <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>* rstr = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>*<span class="keyword">&gt;</span>(rhs);
<a name="l00506"></a>00506       <span class="keywordflow">if</span> (<a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>* org = lstr ? lstr : rstr)
<a name="l00507"></a>00507       { str-&gt;quote_mark(org-&gt;quote_mark()); }
<a name="l00508"></a>00508     }
<a name="l00509"></a>00509     <span class="keywordflow">return</span> ex;
<a name="l00510"></a>00510 
<a name="l00511"></a>00511   }
<a name="l00512"></a>00512 
<a name="l00513"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#46ef36ccd7b83b087ed8fceb7ef00578">00513</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../dd/d85/class_sass_1_1_unary___expression.html">Unary_Expression</a>* u)
<a name="l00514"></a>00514   {
<a name="l00515"></a>00515     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* operand = u-&gt;operand()-&gt;perform(<span class="keyword">this</span>);
<a name="l00516"></a>00516     <span class="keywordflow">if</span> (u-&gt;<a class="code" href="../../db/df1/class_sass_1_1_expression.html#f9f069732bfdd88e8e8b13652f3af643">type</a>() == <a class="code" href="../../dd/d85/class_sass_1_1_unary___expression.html#1d1cfd8ffb84e947f82999c682b666a70378ebc895849163b249d0b330257dd6">Unary_Expression::NOT</a>) {
<a name="l00517"></a>00517       <a class="code" href="../../db/d4a/class_sass_1_1_boolean.html">Boolean</a>* result = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d4a/class_sass_1_1_boolean.html">Boolean</a>(u-&gt;pstate(), (bool)*operand);
<a name="l00518"></a>00518       result-&gt;value(!result-&gt;value());
<a name="l00519"></a>00519       <span class="keywordflow">return</span> result;
<a name="l00520"></a>00520     }
<a name="l00521"></a>00521     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (operand-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86812a90dfe20486bbe3e075afcd19ef2d0">Expression::NUMBER</a>) {
<a name="l00522"></a>00522       <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>* result = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>(*static_cast&lt;Number*&gt;(operand));
<a name="l00523"></a>00523       result-&gt;value(u-&gt;<a class="code" href="../../db/df1/class_sass_1_1_expression.html#f9f069732bfdd88e8e8b13652f3af643">type</a>() == <a class="code" href="../../dd/d85/class_sass_1_1_unary___expression.html#1d1cfd8ffb84e947f82999c682b666a7f613d73b4e7b570ffd967df4a13c4225">Unary_Expression::MINUS</a>
<a name="l00524"></a>00524                     ? -result-&gt;value()
<a name="l00525"></a>00525                     :  result-&gt;value());
<a name="l00526"></a>00526       <span class="keywordflow">return</span> result;
<a name="l00527"></a>00527     }
<a name="l00528"></a>00528     <span class="keywordflow">else</span> {
<a name="l00529"></a>00529       <a class="code" href="../../de/d6e/class_sass_1_1_to___string.html">To_String</a> <a class="code" href="../../da/d80/namespace_sass.html#c098cb6b59a09dd2673ba0f3c23d8253">to_string</a>(&amp;<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>);
<a name="l00530"></a>00530       <span class="comment">// Special cases: +/- variables which evaluate to null ouput just +/-,</span>
<a name="l00531"></a>00531       <span class="comment">// but +/- null itself outputs the string</span>
<a name="l00532"></a>00532       <span class="keywordflow">if</span> (operand-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8685a1a6646a516c78ae30556b836aa1fde">Expression::NULL_VAL</a> &amp;&amp; <span class="keyword">typeid</span>(*(u-&gt;operand())) == <span class="keyword">typeid</span>(<a class="code" href="../../d8/d41/class_sass_1_1_variable.html">Variable</a>)) {
<a name="l00533"></a>00533         u-&gt;operand(<span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(u-&gt;pstate(), <span class="stringliteral">""</span>));
<a name="l00534"></a>00534       }
<a name="l00535"></a>00535       <span class="keywordflow">else</span> u-&gt;operand(operand);
<a name="l00536"></a>00536       <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>* result = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(u-&gt;pstate(),
<a name="l00537"></a>00537                                                               u-&gt;perform(&amp;to_string));
<a name="l00538"></a>00538       <span class="keywordflow">return</span> result;
<a name="l00539"></a>00539     }
<a name="l00540"></a>00540     <span class="comment">// unreachable</span>
<a name="l00541"></a>00541     <span class="keywordflow">return</span> u;
<a name="l00542"></a>00542   }
<a name="l00543"></a>00543 
<a name="l00544"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b119d27beb7a22995e83d7feaac21e82">00544</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../d1/d00/class_sass_1_1_function___call.html">Function_Call</a>* c)
<a name="l00545"></a>00545   {
<a name="l00546"></a>00546     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#f472d8f26172aff2c4662362af4ef650">backtrace</a>-&gt;<a class="code" href="../../d3/d1e/struct_sass_1_1_backtrace.html#33a51af863ca02390b0314be193eb5e7">parent</a> != NULL &amp;&amp; <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#f472d8f26172aff2c4662362af4ef650">backtrace</a>-&gt;<a class="code" href="../../d3/d1e/struct_sass_1_1_backtrace.html#abffebadca12ae91ecefccc5a346065f">depth</a>() &gt; <a class="code" href="../../db/d0c/namespace_sass_1_1_constants.html#b6863372913c0720ebe9e44b35e19fc1">Constants::MaxCallStack</a>) {
<a name="l00547"></a>00547         ostringstream stm;
<a name="l00548"></a>00548         stm &lt;&lt; <span class="stringliteral">"Stack depth exceeded max of "</span> &lt;&lt; <a class="code" href="../../db/d0c/namespace_sass_1_1_constants.html#b6863372913c0720ebe9e44b35e19fc1">Constants::MaxCallStack</a>;
<a name="l00549"></a>00549         <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(stm.str(), c-&gt;pstate(), <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#f472d8f26172aff2c4662362af4ef650">backtrace</a>);
<a name="l00550"></a>00550     }
<a name="l00551"></a>00551     <span class="keywordtype">string</span> <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#db7e7d3cb8558e5c8c2c6ee7704b94ce">name</a>(<a class="code" href="../../d0/d1c/namespace_sass_1_1_util.html#84d459f975b5bed53d97a712add3261f">Util::normalize_underscores</a>(c-&gt;name()));
<a name="l00552"></a>00552     <span class="keywordtype">string</span> full_name(name + <span class="stringliteral">"[f]"</span>);
<a name="l00553"></a>00553     <a class="code" href="../../d0/d1a/class_sass_1_1_arguments.html">Arguments</a>* args = c-&gt;arguments();
<a name="l00554"></a>00554     <span class="keywordflow">if</span> (full_name != <span class="stringliteral">"if[f]"</span>) {
<a name="l00555"></a>00555       args = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d0/d1a/class_sass_1_1_arguments.html">Arguments</a>*<span class="keyword">&gt;</span>(args-&gt;perform(<span class="keyword">this</span>));
<a name="l00556"></a>00556     }
<a name="l00557"></a>00557 
<a name="l00558"></a>00558     <span class="comment">// try to use generic function</span>
<a name="l00559"></a>00559     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#7fa4ea66303ad75877207a8ecc15e345">has</a>(full_name)) {
<a name="l00560"></a>00560       <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#7fa4ea66303ad75877207a8ecc15e345">has</a>(<span class="stringliteral">"*[f]"</span>)) {
<a name="l00561"></a>00561         full_name = <span class="stringliteral">"*[f]"</span>;
<a name="l00562"></a>00562       }
<a name="l00563"></a>00563     }
<a name="l00564"></a>00564 
<a name="l00565"></a>00565     <span class="comment">// if it doesn't exist, just pass it through as a literal</span>
<a name="l00566"></a>00566     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#7fa4ea66303ad75877207a8ecc15e345">has</a>(full_name)) {
<a name="l00567"></a>00567       <a class="code" href="../../d1/d00/class_sass_1_1_function___call.html">Function_Call</a>* lit = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d1/d00/class_sass_1_1_function___call.html">Function_Call</a>(c-&gt;pstate(),
<a name="l00568"></a>00568                                                        c-&gt;name(),
<a name="l00569"></a>00569                                                        args);
<a name="l00570"></a>00570       <a class="code" href="../../de/d6e/class_sass_1_1_to___string.html">To_String</a> <a class="code" href="../../da/d80/namespace_sass.html#c098cb6b59a09dd2673ba0f3c23d8253">to_string</a>(&amp;<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>);
<a name="l00571"></a>00571       <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(c-&gt;pstate(),
<a name="l00572"></a>00572                                            lit-&gt;perform(&amp;to_string));
<a name="l00573"></a>00573     }
<a name="l00574"></a>00574 
<a name="l00575"></a>00575     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*     result = c;
<a name="l00576"></a>00576     <a class="code" href="../../db/d55/class_sass_1_1_definition.html">Definition</a>*     def    = <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d55/class_sass_1_1_definition.html">Definition</a>*<span class="keyword">&gt;</span>((*env)[full_name]);
<a name="l00577"></a>00577     <a class="code" href="../../db/dc9/class_sass_1_1_block.html">Block</a>*          body   = def-&gt;<a class="code" href="../../de/d02/class_sass_1_1_statement.html#40bf4a3f15e120a4967308486b2ddb21">block</a>();
<a name="l00578"></a>00578     <a class="code" href="../../da/d80/namespace_sass.html#a33c4710557c8a015ab739982cd3ea1e">Native_Function</a> func   = def-&gt;native_function();
<a name="l00579"></a>00579     <a class="code" href="../../d8/dcc/struct_sass___function.html">Sass_Function_Entry</a> c_function = def-&gt;c_function();
<a name="l00580"></a>00580 
<a name="l00581"></a>00581     <span class="keywordflow">if</span> (full_name != <span class="stringliteral">"if[f]"</span>) {
<a name="l00582"></a>00582       <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, L = args-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>(); i &lt; L; ++i) {
<a name="l00583"></a>00583         (*args)[i]-&gt;value((*args)[i]-&gt;value()-&gt;perform(<span class="keyword">this</span>));
<a name="l00584"></a>00584       }
<a name="l00585"></a>00585     }
<a name="l00586"></a>00586 
<a name="l00587"></a>00587     <a class="code" href="../../d8/d50/class_sass_1_1_parameters.html">Parameters</a>* params = def-&gt;parameters();
<a name="l00588"></a>00588     <a class="code" href="../../de/ddd/class_sass_1_1_environment.html">Env</a> new_env;
<a name="l00589"></a>00589     new_env.<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#bf6a1e37bebce8016fab11b11ec5ef9b">link</a>(def-&gt;environment());
<a name="l00590"></a>00590     <span class="comment">// bind("function " + c-&gt;name(), params, args, ctx, &amp;new_env, this);</span>
<a name="l00591"></a>00591     <span class="comment">// Env* old_env = env;</span>
<a name="l00592"></a>00592     <span class="comment">// env = &amp;new_env;</span>
<a name="l00593"></a>00593 
<a name="l00594"></a>00594     <span class="comment">// Backtrace here(backtrace, c-&gt;path(), c-&gt;line(), ", in function `" + c-&gt;name() + "`");</span>
<a name="l00595"></a>00595     <span class="comment">// backtrace = &amp;here;</span>
<a name="l00596"></a>00596 
<a name="l00597"></a>00597     <span class="comment">// if it's user-defined, eval the body</span>
<a name="l00598"></a>00598     <span class="keywordflow">if</span> (body) {
<a name="l00599"></a>00599 
<a name="l00600"></a>00600       <a class="code" href="../../da/d80/namespace_sass.html#d9578b91851b43f332aad56a5e9551b8">bind</a>(<span class="stringliteral">"function "</span> + c-&gt;name(), params, args, <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>, &amp;new_env, <span class="keyword">this</span>);
<a name="l00601"></a>00601       <a class="code" href="../../de/ddd/class_sass_1_1_environment.html">Env</a>* old_env = <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>;
<a name="l00602"></a>00602       <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a> = &amp;new_env;
<a name="l00603"></a>00603 
<a name="l00604"></a>00604       <a class="code" href="../../d3/d1e/struct_sass_1_1_backtrace.html">Backtrace</a> here(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#f472d8f26172aff2c4662362af4ef650">backtrace</a>, c-&gt;pstate(), <span class="stringliteral">", in function `"</span> + c-&gt;name() + <span class="stringliteral">"`"</span>);
<a name="l00605"></a>00605       <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#f472d8f26172aff2c4662362af4ef650">backtrace</a> = &amp;here;
<a name="l00606"></a>00606 
<a name="l00607"></a>00607       result = body-&gt;perform(<span class="keyword">this</span>);
<a name="l00608"></a>00608       <span class="keywordflow">if</span> (!result) {
<a name="l00609"></a>00609         <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="keywordtype">string</span>(<span class="stringliteral">"function "</span>) + c-&gt;name() + <span class="stringliteral">" did not return a value"</span>, c-&gt;pstate());
<a name="l00610"></a>00610       }
<a name="l00611"></a>00611       backtrace = here.parent;
<a name="l00612"></a>00612       <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a> = old_env;
<a name="l00613"></a>00613     }
<a name="l00614"></a>00614     <span class="comment">// if it's native, invoke the underlying CPP function</span>
<a name="l00615"></a>00615     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (func) {
<a name="l00616"></a>00616 
<a name="l00617"></a>00617       <a class="code" href="../../da/d80/namespace_sass.html#d9578b91851b43f332aad56a5e9551b8">bind</a>(<span class="stringliteral">"function "</span> + c-&gt;name(), params, args, <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>, &amp;new_env, <span class="keyword">this</span>);
<a name="l00618"></a>00618       <a class="code" href="../../de/ddd/class_sass_1_1_environment.html">Env</a>* old_env = <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>;
<a name="l00619"></a>00619       <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a> = &amp;new_env;
<a name="l00620"></a>00620 
<a name="l00621"></a>00621       <a class="code" href="../../d3/d1e/struct_sass_1_1_backtrace.html">Backtrace</a> here(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#f472d8f26172aff2c4662362af4ef650">backtrace</a>, c-&gt;pstate(), <span class="stringliteral">", in function `"</span> + c-&gt;name() + <span class="stringliteral">"`"</span>);
<a name="l00622"></a>00622       <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#f472d8f26172aff2c4662362af4ef650">backtrace</a> = &amp;here;
<a name="l00623"></a>00623 
<a name="l00624"></a>00624       result = func(*<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>, *old_env, ctx, def-&gt;signature(), c-&gt;pstate(), backtrace);
<a name="l00625"></a>00625 
<a name="l00626"></a>00626       backtrace = here.parent;
<a name="l00627"></a>00627       <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a> = old_env;
<a name="l00628"></a>00628     }
<a name="l00629"></a>00629     <span class="comment">// else if it's a user-defined c function</span>
<a name="l00630"></a>00630     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c_function) {
<a name="l00631"></a>00631 
<a name="l00632"></a>00632       <a class="code" href="../../de/dd9/sass__functions_8h.html#612f50b05219cb7e558647c98440d2bc">Sass_Function_Fn</a> c_func = <a class="code" href="../../d4/d5b/sass__functions_8cpp.html#99b7c4cdec43ecfffedabd4f4452c579">sass_function_get_function</a>(c_function);
<a name="l00633"></a>00633       <span class="keywordflow">if</span> (full_name == <span class="stringliteral">"*[f]"</span>) {
<a name="l00634"></a>00634         <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a> *str = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(c-&gt;pstate(), c-&gt;name());
<a name="l00635"></a>00635         <a class="code" href="../../d0/d1a/class_sass_1_1_arguments.html">Arguments</a>* new_args = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d1a/class_sass_1_1_arguments.html">Arguments</a>(c-&gt;pstate());
<a name="l00636"></a>00636         *new_args &lt;&lt; <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../de/d6a/class_sass_1_1_argument.html">Argument</a>(c-&gt;pstate(), str);
<a name="l00637"></a>00637         *new_args += args;
<a name="l00638"></a>00638         args = new_args;
<a name="l00639"></a>00639       }
<a name="l00640"></a>00640 
<a name="l00641"></a>00641       <span class="comment">// populates env with default values for params</span>
<a name="l00642"></a>00642       <a class="code" href="../../da/d80/namespace_sass.html#d9578b91851b43f332aad56a5e9551b8">bind</a>(<span class="stringliteral">"function "</span> + c-&gt;name(), params, args, <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>, &amp;new_env, <span class="keyword">this</span>);
<a name="l00643"></a>00643       <a class="code" href="../../de/ddd/class_sass_1_1_environment.html">Env</a>* old_env = <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>;
<a name="l00644"></a>00644       <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a> = &amp;new_env;
<a name="l00645"></a>00645 
<a name="l00646"></a>00646       <a class="code" href="../../d3/d1e/struct_sass_1_1_backtrace.html">Backtrace</a> here(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#f472d8f26172aff2c4662362af4ef650">backtrace</a>, c-&gt;pstate(), <span class="stringliteral">", in function `"</span> + c-&gt;name() + <span class="stringliteral">"`"</span>);
<a name="l00647"></a>00647       <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#f472d8f26172aff2c4662362af4ef650">backtrace</a> = &amp;here;
<a name="l00648"></a>00648 
<a name="l00649"></a>00649       <a class="code" href="../../dd/d0f/class_sass_1_1_to___c.html">To_C</a> to_c;
<a name="l00650"></a>00650       <span class="keyword">union </span><a class="code" href="../../d1/db0/union_sass___value.html">Sass_Value</a>* c_args = <a class="code" href="../../df/d67/sass__values_8cpp.html#66794ab38dd91296444e939e27203a43">sass_make_list</a>(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#e5024a369a7b13589fce3417da392b4d">local_frame</a>().size(), <a class="code" href="../../d2/d8b/sass__values_8h.html#db3e2a12286c445dd0048f95306175d17f14c3e1435f77190afa0632f70e613a">SASS_COMMA</a>);
<a name="l00651"></a>00651       <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; params[0].<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>(); i++) {
<a name="l00652"></a>00652         <span class="keywordtype">string</span> key = params[0][i]-&gt;name();
<a name="l00653"></a>00653         <a class="code" href="../../d4/d4a/class_sass_1_1_a_s_t___node.html">AST_Node</a>* node = <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#e5024a369a7b13589fce3417da392b4d">local_frame</a>().at(key);
<a name="l00654"></a>00654         <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d1/ddf/namespacegyp_1_1msvs__emulation.html#4ef4a85aab5149bdab1fbd46db2fa082">arg</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*<span class="keyword">&gt;</span>(node);
<a name="l00655"></a>00655         <a class="code" href="../../df/d67/sass__values_8cpp.html#f4dd4a4efeb4aca0ee1eccd4ca70dd4d">sass_list_set_value</a>(c_args, i, arg-&gt;perform(&amp;to_c));
<a name="l00656"></a>00656       }
<a name="l00657"></a>00657       <a class="code" href="../../d1/db0/union_sass___value.html">Sass_Value</a>* c_val = c_func(c_args, c_function, ctx.c_options);
<a name="l00658"></a>00658       <span class="keywordflow">if</span> (<a class="code" href="../../df/d67/sass__values_8cpp.html#a6229c488748753948cf0ce2d77f35e1">sass_value_get_tag</a>(c_val) == <a class="code" href="../../d2/d8b/sass__values_8h.html#55e751d8802673804d980d55652c02b5f21e52fb7b41c38e5513c2d4994b0807">SASS_ERROR</a>) {
<a name="l00659"></a>00659         <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"error in C function "</span> + c-&gt;name() + <span class="stringliteral">": "</span> + <a class="code" href="../../df/d67/sass__values_8cpp.html#d7db2a79d7209b8831d737eabaed84f1">sass_error_get_message</a>(c_val), c-&gt;pstate(), backtrace);
<a name="l00660"></a>00660       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../df/d67/sass__values_8cpp.html#a6229c488748753948cf0ce2d77f35e1">sass_value_get_tag</a>(c_val) == <a class="code" href="../../d2/d8b/sass__values_8h.html#55e751d8802673804d980d55652c02b5690646a8b51a899a5cf08d3699f514e3">SASS_WARNING</a>) {
<a name="l00661"></a>00661         <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"warning in C function "</span> + c-&gt;name() + <span class="stringliteral">": "</span> + <a class="code" href="../../df/d67/sass__values_8cpp.html#f42aae67c25cadedd623929b9774361b">sass_warning_get_message</a>(c_val), c-&gt;pstate(), backtrace);
<a name="l00662"></a>00662       }
<a name="l00663"></a>00663       result = <a class="code" href="../../da/d80/namespace_sass.html#3c8206b990b9b641ed1db28140bf2f82">cval_to_astnode</a>(c_val, ctx, backtrace, c-&gt;pstate());
<a name="l00664"></a>00664 
<a name="l00665"></a>00665       backtrace = here.parent;
<a name="l00666"></a>00666       <a class="code" href="../../df/d67/sass__values_8cpp.html#f73ef82ec7d519dcf5afe223c2b61429">sass_delete_value</a>(c_args);
<a name="l00667"></a>00667       <span class="keywordflow">if</span> (c_val != c_args)
<a name="l00668"></a>00668         <a class="code" href="../../df/d67/sass__values_8cpp.html#f73ef82ec7d519dcf5afe223c2b61429">sass_delete_value</a>(c_val);
<a name="l00669"></a>00669       <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a> = old_env;
<a name="l00670"></a>00670     }
<a name="l00671"></a>00671     <span class="comment">// else it's an overloaded native function; resolve it</span>
<a name="l00672"></a>00672     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (def-&gt;is_overload_stub()) {
<a name="l00673"></a>00673       <span class="keywordtype">size_t</span> arity = args-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>();
<a name="l00674"></a>00674       stringstream ss;
<a name="l00675"></a>00675       ss &lt;&lt; full_name &lt;&lt; arity;
<a name="l00676"></a>00676       <span class="keywordtype">string</span> resolved_name(ss.str());
<a name="l00677"></a>00677       <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#7fa4ea66303ad75877207a8ecc15e345">has</a>(resolved_name)) <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"overloaded function `"</span> + <span class="keywordtype">string</span>(c-&gt;name()) + <span class="stringliteral">"` given wrong number of arguments"</span>, c-&gt;pstate());
<a name="l00678"></a>00678       <a class="code" href="../../db/d55/class_sass_1_1_definition.html">Definition</a>* resolved_def = <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d55/class_sass_1_1_definition.html">Definition</a>*<span class="keyword">&gt;</span>((*env)[resolved_name]);
<a name="l00679"></a>00679       params = resolved_def-&gt;parameters();
<a name="l00680"></a>00680       <a class="code" href="../../de/ddd/class_sass_1_1_environment.html">Env</a> newer_env;
<a name="l00681"></a>00681       newer_env.<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#bf6a1e37bebce8016fab11b11ec5ef9b">link</a>(resolved_def-&gt;environment());
<a name="l00682"></a>00682       <a class="code" href="../../da/d80/namespace_sass.html#d9578b91851b43f332aad56a5e9551b8">bind</a>(<span class="stringliteral">"function "</span> + c-&gt;name(), params, args, <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>, &amp;newer_env, <span class="keyword">this</span>);
<a name="l00683"></a>00683       <a class="code" href="../../de/ddd/class_sass_1_1_environment.html">Env</a>* old_env = <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>;
<a name="l00684"></a>00684       <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a> = &amp;newer_env;
<a name="l00685"></a>00685 
<a name="l00686"></a>00686       <a class="code" href="../../d3/d1e/struct_sass_1_1_backtrace.html">Backtrace</a> here(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#f472d8f26172aff2c4662362af4ef650">backtrace</a>, c-&gt;pstate(), <span class="stringliteral">", in function `"</span> + c-&gt;name() + <span class="stringliteral">"`"</span>);
<a name="l00687"></a>00687       <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#f472d8f26172aff2c4662362af4ef650">backtrace</a> = &amp;here;
<a name="l00688"></a>00688 
<a name="l00689"></a>00689       result = resolved_def-&gt;native_function()(*<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>, *old_env, ctx, resolved_def-&gt;signature(), c-&gt;pstate(), backtrace);
<a name="l00690"></a>00690 
<a name="l00691"></a>00691       backtrace = here.parent;
<a name="l00692"></a>00692       <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a> = old_env;
<a name="l00693"></a>00693     }
<a name="l00694"></a>00694 
<a name="l00695"></a>00695     <span class="comment">// backtrace = here.parent;</span>
<a name="l00696"></a>00696     <span class="comment">// env = old_env;</span>
<a name="l00697"></a>00697 
<a name="l00698"></a>00698 
<a name="l00699"></a>00699     <span class="comment">// link back to function definition</span>
<a name="l00700"></a>00700     <span class="comment">// only do this for custom functions</span>
<a name="l00701"></a>00701     <span class="keywordflow">if</span> (result-&gt;pstate().file == <a class="code" href="../../dd/d4a/plugins_8cpp.html#456568f9bcf7b01122b9e776c6e38ada">string::npos</a>)
<a name="l00702"></a>00702       result-&gt;pstate(c-&gt;pstate());
<a name="l00703"></a>00703 
<a name="l00704"></a>00704     <span class="keywordflow">do</span> {
<a name="l00705"></a>00705       result-&gt;is_delayed(result-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede868ee847e634a4297b274316de8a8ca9921">Expression::STRING</a>);
<a name="l00706"></a>00706       result = result-&gt;perform(<span class="keyword">this</span>);
<a name="l00707"></a>00707     } <span class="keywordflow">while</span> (result-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede868c157bdf0b85a40d2619cbc8bc1ae5fe2">Expression::NONE</a>);
<a name="l00708"></a>00708     <span class="keywordflow">return</span> result;
<a name="l00709"></a>00709   }
<a name="l00710"></a>00710 
<a name="l00711"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#674b002407c53ee07e73738b0ff9d874">00711</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../d1/d9b/class_sass_1_1_function___call___schema.html">Function_Call_Schema</a>* <a class="code" href="../../d4/d9b/common_8inc_8php.html#7a67647fbc74415932803d69446d973d">s</a>)
<a name="l00712"></a>00712   {
<a name="l00713"></a>00713     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* evaluated_name = s-&gt;name()-&gt;perform(<span class="keyword">this</span>);
<a name="l00714"></a>00714     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* evaluated_args = s-&gt;arguments()-&gt;perform(<span class="keyword">this</span>);
<a name="l00715"></a>00715     <a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>* ss = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>(s-&gt;pstate(), 2);
<a name="l00716"></a>00716     (*ss) &lt;&lt; evaluated_name &lt;&lt; evaluated_args;
<a name="l00717"></a>00717     <span class="keywordflow">return</span> ss-&gt;perform(<span class="keyword">this</span>);
<a name="l00718"></a>00718   }
<a name="l00719"></a>00719 
<a name="l00720"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#c1dd5b7a5ca015c18f4e3807ec87866d">00720</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../d8/d41/class_sass_1_1_variable.html">Variable</a>* v)
<a name="l00721"></a>00721   {
<a name="l00722"></a>00722     <a class="code" href="../../de/d6e/class_sass_1_1_to___string.html">To_String</a> <a class="code" href="../../da/d80/namespace_sass.html#c098cb6b59a09dd2673ba0f3c23d8253">to_string</a>(&amp;<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>);
<a name="l00723"></a>00723     <span class="keywordtype">string</span> <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#db7e7d3cb8558e5c8c2c6ee7704b94ce">name</a>(v-&gt;name());
<a name="l00724"></a>00724     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* value = 0;
<a name="l00725"></a>00725     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#7fa4ea66303ad75877207a8ecc15e345">has</a>(<a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#db7e7d3cb8558e5c8c2c6ee7704b94ce">name</a>)) value = static_cast&lt;Expression*&gt;((*<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>)[<a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#db7e7d3cb8558e5c8c2c6ee7704b94ce">name</a>]);
<a name="l00726"></a>00726     <span class="keywordflow">else</span> <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"Undefined variable: \""</span> + v-&gt;name() + <span class="stringliteral">"\"."</span>, v-&gt;pstate());
<a name="l00727"></a>00727     <span class="comment">// cerr &lt;&lt; "name: " &lt;&lt; v-&gt;name() &lt;&lt; "; type: " &lt;&lt; typeid(*value).name() &lt;&lt; "; value: " &lt;&lt; value-&gt;perform(&amp;to_string) &lt;&lt; endl;</span>
<a name="l00728"></a>00728     <span class="keywordflow">if</span> (<span class="keyword">typeid</span>(*value) == <span class="keyword">typeid</span>(<a class="code" href="../../de/d6a/class_sass_1_1_argument.html">Argument</a>)) value = <span class="keyword">static_cast&lt;</span><a class="code" href="../../de/d6a/class_sass_1_1_argument.html">Argument</a>*<span class="keyword">&gt;</span>(value)-&gt;value();
<a name="l00729"></a>00729 
<a name="l00730"></a>00730     <span class="comment">// behave according to as ruby sass (add leading zero)</span>
<a name="l00731"></a>00731     <span class="keywordflow">if</span> (value-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86812a90dfe20486bbe3e075afcd19ef2d0">Expression::NUMBER</a>) {
<a name="l00732"></a>00732       value = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>(*static_cast&lt;Number*&gt;(value));
<a name="l00733"></a>00733       <span class="keyword">static_cast&lt;</span><a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>*<span class="keyword">&gt;</span>(value)-&gt;zero(<span class="keyword">true</span>);
<a name="l00734"></a>00734     }
<a name="l00735"></a>00735     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede868ee847e634a4297b274316de8a8ca9921">Expression::STRING</a>) {
<a name="l00736"></a>00736       <span class="keywordflow">if</span> (<span class="keyword">auto</span> str = dynamic_cast&lt;String_Quoted*&gt;(value)) {
<a name="l00737"></a>00737         value = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>(*str);
<a name="l00738"></a>00738       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> str = dynamic_cast&lt;String_Constant*&gt;(value)) {
<a name="l00739"></a>00739         <span class="keywordflow">if</span> (str-&gt;quote_mark()) {
<a name="l00740"></a>00740           value = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>(str-&gt;pstate(), str-&gt;perform(&amp;to_string));
<a name="l00741"></a>00741         } <span class="keywordflow">else</span> {
<a name="l00742"></a>00742           value = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(str-&gt;pstate(), <a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(str-&gt;value()));
<a name="l00743"></a>00743         }
<a name="l00744"></a>00744       }
<a name="l00745"></a>00745     }
<a name="l00746"></a>00746     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86825688e799536738ea469158ef15fd1c0">Expression::LIST</a>) {
<a name="l00747"></a>00747       value = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>(*static_cast&lt;List*&gt;(value));
<a name="l00748"></a>00748     }
<a name="l00749"></a>00749     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8684cafa5feda04184537b4d7d346e1e89b">Expression::MAP</a>) {
<a name="l00750"></a>00750       value = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../df/d35/class_sass_1_1_map.html">Map</a>(*static_cast&lt;Map*&gt;(value));
<a name="l00751"></a>00751     }
<a name="l00752"></a>00752     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8688a583f16e8d237a423c8c1d9087a4c72">Expression::BOOLEAN</a>) {
<a name="l00753"></a>00753       value = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d4a/class_sass_1_1_boolean.html">Boolean</a>(*static_cast&lt;Boolean*&gt;(value));
<a name="l00754"></a>00754     }
<a name="l00755"></a>00755     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8687a5ecb5193db2d5f258ae1abd33714b9">Expression::COLOR</a>) {
<a name="l00756"></a>00756       value = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>(*static_cast&lt;Color*&gt;(value));
<a name="l00757"></a>00757     }
<a name="l00758"></a>00758     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8685a1a6646a516c78ae30556b836aa1fde">Expression::NULL_VAL</a>) {
<a name="l00759"></a>00759       value = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d6/dd5/namespace_nan.html#d4b94b84f0a38f43868cd876fc366714">Null</a>(value-&gt;pstate());
<a name="l00760"></a>00760     }
<a name="l00761"></a>00761 
<a name="l00762"></a>00762     <span class="comment">// cerr &lt;&lt; "\ttype is now: " &lt;&lt; typeid(*value).name() &lt;&lt; endl &lt;&lt; endl;</span>
<a name="l00763"></a>00763     <span class="keywordflow">return</span> value;
<a name="l00764"></a>00764   }
<a name="l00765"></a>00765 
<a name="l00766"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#18f27c254cbf203f88ee47456f696a9e">00766</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../d7/df5/class_sass_1_1_textual.html">Textual</a>* t)
<a name="l00767"></a>00767   {
<a name="l00768"></a>00768     <span class="keyword">using</span> <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#b9c4f34cbfc504789a7f41f881d5bb4a">Prelexer::number</a>;
<a name="l00769"></a>00769     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* result = 0;
<a name="l00770"></a>00770     <span class="keywordtype">bool</span> zero = !( t-&gt;value().substr(0, 1) == <span class="stringliteral">"."</span> ||
<a name="l00771"></a>00771                    t-&gt;value().substr(0, 2) == <span class="stringliteral">"-."</span> );
<a name="l00772"></a>00772 
<a name="l00773"></a>00773     <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; text = t-&gt;value();
<a name="l00774"></a>00774     <span class="keywordtype">size_t</span> num_pos = text.find_first_not_of(<span class="stringliteral">" \n\r\t"</span>);
<a name="l00775"></a>00775     <span class="keywordflow">if</span> (num_pos == <a class="code" href="../../dd/d4a/plugins_8cpp.html#456568f9bcf7b01122b9e776c6e38ada">string::npos</a>) num_pos = text.length();
<a name="l00776"></a>00776     <span class="keywordtype">size_t</span> unit_pos = text.find_first_not_of(<span class="stringliteral">"-+0123456789."</span>, num_pos);
<a name="l00777"></a>00777     <span class="keywordflow">if</span> (unit_pos == <a class="code" href="../../dd/d4a/plugins_8cpp.html#456568f9bcf7b01122b9e776c6e38ada">string::npos</a>) unit_pos = text.length();
<a name="l00778"></a>00778     <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; num = text.substr(num_pos, unit_pos - num_pos);
<a name="l00779"></a>00779 
<a name="l00780"></a>00780     <span class="keywordflow">switch</span> (t-&gt;<a class="code" href="../../db/df1/class_sass_1_1_expression.html#f9f069732bfdd88e8e8b13652f3af643">type</a>())
<a name="l00781"></a>00781     {
<a name="l00782"></a>00782       <span class="keywordflow">case</span> <a class="code" href="../../d7/df5/class_sass_1_1_textual.html#1d1cfd8ffb84e947f82999c682b666a712a90dfe20486bbe3e075afcd19ef2d0">Textual::NUMBER</a>:
<a name="l00783"></a>00783         result = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>(t-&gt;pstate(),
<a name="l00784"></a>00784                                       <a class="code" href="../../da/d80/namespace_sass.html#f14872a99d68b9e4727168c12c9b27d5">sass_atof</a>(num.c_str()),
<a name="l00785"></a>00785                                       <span class="stringliteral">""</span>,
<a name="l00786"></a>00786                                       zero);
<a name="l00787"></a>00787         <span class="keywordflow">break</span>;
<a name="l00788"></a>00788       <span class="keywordflow">case</span> <a class="code" href="../../d7/df5/class_sass_1_1_textual.html#1d1cfd8ffb84e947f82999c682b666a7ee7c061a4ea53ca0cd5717e800617b39">Textual::PERCENTAGE</a>:
<a name="l00789"></a>00789         result = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>(t-&gt;pstate(),
<a name="l00790"></a>00790                                       <a class="code" href="../../da/d80/namespace_sass.html#f14872a99d68b9e4727168c12c9b27d5">sass_atof</a>(num.c_str()),
<a name="l00791"></a>00791                                       <span class="stringliteral">"%"</span>,
<a name="l00792"></a>00792                                       zero);
<a name="l00793"></a>00793         <span class="keywordflow">break</span>;
<a name="l00794"></a>00794       <span class="keywordflow">case</span> <a class="code" href="../../d7/df5/class_sass_1_1_textual.html#1d1cfd8ffb84e947f82999c682b666a7b76859fb31ae59096e234a3f32eac4f7">Textual::DIMENSION</a>:
<a name="l00795"></a>00795         result = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>(t-&gt;pstate(),
<a name="l00796"></a>00796                                       <a class="code" href="../../da/d80/namespace_sass.html#f14872a99d68b9e4727168c12c9b27d5">sass_atof</a>(num.c_str()),
<a name="l00797"></a>00797                                       <a class="code" href="../../de/d6f/class_sass_1_1_token.html">Token</a>(<a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#b9c4f34cbfc504789a7f41f881d5bb4a">number</a>(text.c_str())),
<a name="l00798"></a>00798                                       zero);
<a name="l00799"></a>00799         <span class="keywordflow">break</span>;
<a name="l00800"></a>00800       <span class="keywordflow">case</span> <a class="code" href="../../d7/df5/class_sass_1_1_textual.html#1d1cfd8ffb84e947f82999c682b666a7d3c20094c5fe3327350484d01c44c137">Textual::HEX</a>: {
<a name="l00801"></a>00801         <span class="keywordflow">if</span> (t-&gt;value().substr(0, 1) != <span class="stringliteral">"#"</span>) {
<a name="l00802"></a>00802           result = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(t-&gt;pstate(), t-&gt;value());
<a name="l00803"></a>00803           <span class="keywordflow">break</span>;
<a name="l00804"></a>00804         }
<a name="l00805"></a>00805         <span class="keywordtype">string</span> hext(t-&gt;value().substr(1)); <span class="comment">// chop off the '#'</span>
<a name="l00806"></a>00806         <span class="keywordflow">if</span> (hext.length() == 6) {
<a name="l00807"></a>00807           <span class="keywordtype">string</span> r(hext.substr(0,2));
<a name="l00808"></a>00808           <span class="keywordtype">string</span> g(hext.substr(2,2));
<a name="l00809"></a>00809           <span class="keywordtype">string</span> b(hext.substr(4,2));
<a name="l00810"></a>00810           result = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>(t-&gt;pstate(),
<a name="l00811"></a>00811                                        <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(strtol(r.c_str(), NULL, 16)),
<a name="l00812"></a>00812                                        <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(strtol(g.c_str(), NULL, 16)),
<a name="l00813"></a>00813                                        <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(strtol(b.c_str(), NULL, 16)),
<a name="l00814"></a>00814                                        1, <span class="keyword">true</span>,
<a name="l00815"></a>00815                                        t-&gt;value());
<a name="l00816"></a>00816         }
<a name="l00817"></a>00817         <span class="keywordflow">else</span> {
<a name="l00818"></a>00818           result = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>(t-&gt;pstate(),
<a name="l00819"></a>00819                                        <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(strtol(<span class="keywordtype">string</span>(2,hext[0]).c_str(), NULL, 16)),
<a name="l00820"></a>00820                                        static_cast&lt;double&gt;(strtol(<span class="keywordtype">string</span>(2,hext[1]).c_str(), NULL, 16)),
<a name="l00821"></a>00821                                        static_cast&lt;double&gt;(strtol(<span class="keywordtype">string</span>(2,hext[2]).c_str(), NULL, 16)),
<a name="l00822"></a>00822                                        1, <span class="keyword">false</span>,
<a name="l00823"></a>00823                                        t-&gt;value());
<a name="l00824"></a>00824         }
<a name="l00825"></a>00825       } <span class="keywordflow">break</span>;
<a name="l00826"></a>00826     }
<a name="l00827"></a>00827     <span class="keywordflow">return</span> result;
<a name="l00828"></a>00828   }
<a name="l00829"></a>00829 
<a name="l00830"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#019c6e109c3d6e5a05324d24764ff231">00830</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>* n)
<a name="l00831"></a>00831   {
<a name="l00832"></a>00832     n-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#af7e60bcc6c54a247a2700d82a82fba0">normalize</a>();
<a name="l00833"></a>00833     <span class="comment">// behave according to as ruby sass (add leading zero)</span>
<a name="l00834"></a>00834     <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>(n-&gt;pstate(),
<a name="l00835"></a>00835                                 n-&gt;value(),
<a name="l00836"></a>00836                                 n-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#30d08dab537f6edd00794f37cb7a58d0">unit</a>(),
<a name="l00837"></a>00837                                 <span class="keyword">true</span>);
<a name="l00838"></a>00838   }
<a name="l00839"></a>00839 
<a name="l00840"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#67c0329f3a08ef754a1045fb5540aab2">00840</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../db/d4a/class_sass_1_1_boolean.html">Boolean</a>* b)
<a name="l00841"></a>00841   {
<a name="l00842"></a>00842     <span class="keywordflow">return</span> b;
<a name="l00843"></a>00843   }
<a name="l00844"></a>00844 
<a name="l00845"></a><a class="code" href="../../da/d80/namespace_sass.html#76b813c5e17cc8a308160bbc1ecce68e">00845</a>   <span class="keywordtype">char</span> <a class="code" href="../../da/d80/namespace_sass.html#76b813c5e17cc8a308160bbc1ecce68e">is_quoted</a>(<span class="keywordtype">string</span> str)
<a name="l00846"></a>00846   {
<a name="l00847"></a>00847     <span class="keywordtype">size_t</span> len = str.length();
<a name="l00848"></a>00848     <span class="keywordflow">if</span> (len &lt; 2) <span class="keywordflow">return</span> 0;
<a name="l00849"></a>00849     <span class="keywordflow">if</span> ((str[0] == <span class="charliteral">'"'</span> &amp;&amp; str[len-1] == <span class="charliteral">'"'</span>) || (str[0] == <span class="charliteral">'\''</span> &amp;&amp; str[len-1] == <span class="charliteral">'\''</span>)) {
<a name="l00850"></a>00850       <span class="keywordflow">return</span> str[0];
<a name="l00851"></a>00851     }
<a name="l00852"></a>00852     <span class="keywordflow">else</span> {
<a name="l00853"></a>00853       <span class="keywordflow">return</span> 0;
<a name="l00854"></a>00854     }
<a name="l00855"></a>00855   }
<a name="l00856"></a>00856 
<a name="l00857"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#73f2516769362429bd80f6336838ec47">00857</a>   <span class="keywordtype">string</span> <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#73f2516769362429bd80f6336838ec47">Eval::interpolation</a>(<a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d4/d9b/common_8inc_8php.html#7a67647fbc74415932803d69446d973d">s</a>) {
<a name="l00858"></a>00858     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>* str_quoted = dynamic_cast&lt;String_Quoted*&gt;(s)) {
<a name="l00859"></a>00859       <span class="keywordflow">if</span> (str_quoted-&gt;quote_mark()) {
<a name="l00860"></a>00860         <span class="keywordflow">if</span> (str_quoted-&gt;quote_mark() == <span class="charliteral">'*'</span> || str_quoted-&gt;is_delayed()) {
<a name="l00861"></a>00861           <span class="keywordflow">return</span> <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#73f2516769362429bd80f6336838ec47">interpolation</a>(<span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(*str_quoted));
<a name="l00862"></a>00862         } <span class="keywordflow">else</span> {
<a name="l00863"></a>00863           <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#aec4224d815cb72a46c9fa46e2d52a66">string_escape</a>(<a class="code" href="../../da/d80/namespace_sass.html#9e5541de158f3e78965acec20de74638">quote</a>(str_quoted-&gt;value(), str_quoted-&gt;quote_mark()));
<a name="l00864"></a>00864         }
<a name="l00865"></a>00865       } <span class="keywordflow">else</span> {
<a name="l00866"></a>00866         <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#359ee9b994cbf486ffcb8c932125b1f7">evacuate_escapes</a>(str_quoted-&gt;value());
<a name="l00867"></a>00867       }
<a name="l00868"></a>00868     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>* str_constant = dynamic_cast&lt;String_Constant*&gt;(s)) {
<a name="l00869"></a>00869       <span class="keywordtype">string</span> str = str_constant-&gt;value();
<a name="l00870"></a>00870       <span class="keywordflow">if</span> (!str_constant-&gt;quote_mark()) str = <a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(str);
<a name="l00871"></a>00871       <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#359ee9b994cbf486ffcb8c932125b1f7">evacuate_escapes</a>(str);
<a name="l00872"></a>00872     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>* str_schema = dynamic_cast&lt;String_Schema*&gt;(s)) {
<a name="l00873"></a>00873       <span class="keywordtype">string</span> res = <span class="stringliteral">""</span>;
<a name="l00874"></a>00874       <span class="keywordflow">for</span>(<span class="keyword">auto</span> i : str_schema-&gt;elements())
<a name="l00875"></a>00875         res += (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#73f2516769362429bd80f6336838ec47">interpolation</a>(i));
<a name="l00876"></a>00876       <span class="comment">//ToDo: do this in one step</span>
<a name="l00877"></a>00877       <span class="keyword">auto</span> esc = <a class="code" href="../../da/d80/namespace_sass.html#359ee9b994cbf486ffcb8c932125b1f7">evacuate_escapes</a>(res);
<a name="l00878"></a>00878       <span class="keyword">auto</span> unq = <a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(esc);
<a name="l00879"></a>00879       <span class="keywordflow">if</span> (unq == esc) {
<a name="l00880"></a>00880         <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#2590ab440d5863f9d9dfba900368de39">string_to_output</a>(res);
<a name="l00881"></a>00881       } <span class="keywordflow">else</span> {
<a name="l00882"></a>00882         <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#6e6c8e3c5364b9123d17d40e7449e75b">evacuate_quotes</a>(unq);
<a name="l00883"></a>00883       }
<a name="l00884"></a>00884     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* <a class="code" href="../../d1/db0/union_sass___value.html#d09b4c1866dac071546c616bf67fa603">list</a> = dynamic_cast&lt;List*&gt;(s)) {
<a name="l00885"></a>00885       <span class="keywordtype">string</span> acc = <span class="stringliteral">""</span>; <span class="comment">// ToDo: different output styles</span>
<a name="l00886"></a>00886       <span class="keywordtype">string</span> sep = <a class="code" href="../../d1/db0/union_sass___value.html#d09b4c1866dac071546c616bf67fa603">list</a>-&gt;<a class="code" href="../../d6/d42/struct_sass___list.html#2b26cf12c6b0eae1e032ac9b77cf6071">separator</a>() == <a class="code" href="../../de/d4d/callback__bridge_8h.html#a2f49001be13949a16a57e6c99ab00ad">List::Separator::COMMA</a> ? <span class="stringliteral">","</span> : <span class="stringliteral">" "</span>;
<a name="l00887"></a>00887       <span class="keywordflow">if</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#2fa2c4bd88e9fa2b27e9e8030806e2cb">output_style</a> != <a class="code" href="../../da/d80/namespace_sass.html#b198729676bcc09c14d990ff01578c7eb48e815f9d64a180ffb0616e40ebc4ce">COMPRESSED</a> &amp;&amp; sep == <span class="stringliteral">","</span>) sep += <span class="stringliteral">" "</span>;
<a name="l00888"></a>00888       <span class="keywordtype">bool</span> initial = <span class="keyword">false</span>;
<a name="l00889"></a>00889       <span class="keywordflow">for</span>(<span class="keyword">auto</span> item : <a class="code" href="../../d1/db0/union_sass___value.html#d09b4c1866dac071546c616bf67fa603">list</a>-&gt;elements()) {
<a name="l00890"></a>00890         <span class="keywordflow">if</span> (initial) acc += sep;
<a name="l00891"></a>00891         acc += <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#73f2516769362429bd80f6336838ec47">interpolation</a>(item);
<a name="l00892"></a>00892         initial = <span class="keyword">true</span>;
<a name="l00893"></a>00893       }
<a name="l00894"></a>00894       <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#6e6c8e3c5364b9123d17d40e7449e75b">evacuate_quotes</a>(acc);
<a name="l00895"></a>00895     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d8/d41/class_sass_1_1_variable.html">Variable</a>* var = dynamic_cast&lt;Variable*&gt;(s)) {
<a name="l00896"></a>00896       <span class="keywordtype">string</span> <a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#db7e7d3cb8558e5c8c2c6ee7704b94ce">name</a>(var-&gt;name());
<a name="l00897"></a>00897       <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#5cd3f8825058fa594646d13638c40d6d">env</a>-&gt;<a class="code" href="../../de/ddd/class_sass_1_1_environment.html#7fa4ea66303ad75877207a8ecc15e345">has</a>(<a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#db7e7d3cb8558e5c8c2c6ee7704b94ce">name</a>)) <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"Undefined variable: \""</span> + var-&gt;name() + <span class="stringliteral">"\"."</span>, var-&gt;pstate());
<a name="l00898"></a>00898       <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* value = <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*<span class="keyword">&gt;</span>((*env)[<a class="code" href="../../d6/ddd/namespace_sass_1_1_prelexer.html#db7e7d3cb8558e5c8c2c6ee7704b94ce">name</a>]);
<a name="l00899"></a>00899       <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#6e6c8e3c5364b9123d17d40e7449e75b">evacuate_quotes</a>(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#73f2516769362429bd80f6336838ec47">interpolation</a>(value));
<a name="l00900"></a>00900     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html">Binary_Expression</a>* var = dynamic_cast&lt;Binary_Expression*&gt;(s)) {
<a name="l00901"></a>00901       var-&gt;is_delayed(<span class="keyword">false</span>);
<a name="l00902"></a>00902       <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* ex = var-&gt;perform(<span class="keyword">this</span>);
<a name="l00903"></a>00903       <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#6e6c8e3c5364b9123d17d40e7449e75b">evacuate_quotes</a>(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#73f2516769362429bd80f6336838ec47">interpolation</a>(ex));
<a name="l00904"></a>00904     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d1/d00/class_sass_1_1_function___call.html">Function_Call</a>* var = dynamic_cast&lt;Function_Call*&gt;(s)) {
<a name="l00905"></a>00905       <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* ex = var-&gt;perform(<span class="keyword">this</span>);
<a name="l00906"></a>00906       <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#6e6c8e3c5364b9123d17d40e7449e75b">evacuate_quotes</a>(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#73f2516769362429bd80f6336838ec47">interpolation</a>(ex));
<a name="l00907"></a>00907     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d3f/class_sass_1_1_parent___selector.html">Parent_Selector</a>* var = dynamic_cast&lt;Parent_Selector*&gt;(s)) {
<a name="l00908"></a>00908       <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* ex = var-&gt;perform(<span class="keyword">this</span>);
<a name="l00909"></a>00909       <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#6e6c8e3c5364b9123d17d40e7449e75b">evacuate_quotes</a>(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#73f2516769362429bd80f6336838ec47">interpolation</a>(ex));
<a name="l00910"></a>00910     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d85/class_sass_1_1_unary___expression.html">Unary_Expression</a>* var = dynamic_cast&lt;Unary_Expression*&gt;(s)) {
<a name="l00911"></a>00911       <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* ex = var-&gt;perform(<span class="keyword">this</span>);
<a name="l00912"></a>00912       <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#6e6c8e3c5364b9123d17d40e7449e75b">evacuate_quotes</a>(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#73f2516769362429bd80f6336838ec47">interpolation</a>(ex));
<a name="l00913"></a>00913     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../df/d05/class_sass_1_1_selector.html">Selector</a>* var = dynamic_cast&lt;Selector*&gt;(s)) {
<a name="l00914"></a>00914       <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* ex = var-&gt;perform(<span class="keyword">this</span>);
<a name="l00915"></a>00915       <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#6e6c8e3c5364b9123d17d40e7449e75b">evacuate_quotes</a>(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#73f2516769362429bd80f6336838ec47">interpolation</a>(ex));
<a name="l00916"></a>00916     } <span class="keywordflow">else</span> {
<a name="l00917"></a>00917       <a class="code" href="../../de/d6e/class_sass_1_1_to___string.html">To_String</a> <a class="code" href="../../da/d80/namespace_sass.html#c098cb6b59a09dd2673ba0f3c23d8253">to_string</a>(&amp;<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>);
<a name="l00918"></a>00918       <span class="comment">// to_string.in_decl_list = true;</span>
<a name="l00919"></a>00919       <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#6e6c8e3c5364b9123d17d40e7449e75b">evacuate_quotes</a>(s-&gt;perform(&amp;to_string));
<a name="l00920"></a>00920     }
<a name="l00921"></a>00921   }
<a name="l00922"></a>00922 
<a name="l00923"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#53fb14f665f3bfd6f20768686f1a1ff8">00923</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../d7/d7a/class_sass_1_1_string___schema.html">String_Schema</a>* <a class="code" href="../../d4/d9b/common_8inc_8php.html#7a67647fbc74415932803d69446d973d">s</a>)
<a name="l00924"></a>00924   {
<a name="l00925"></a>00925     <span class="keywordtype">string</span> acc;
<a name="l00926"></a>00926     <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, L = s-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>(); i &lt; L; ++i) {
<a name="l00927"></a>00927       <span class="comment">// if (String_Quoted* str_quoted = dynamic_cast&lt;String_Quoted*&gt;((*s)[i])) {</span>
<a name="l00928"></a>00928         <span class="comment">// if (!str_quoted-&gt;is_delayed()) str_quoted-&gt;value(string_eval_escapes(str_quoted-&gt;value()));</span>
<a name="l00929"></a>00929       <span class="comment">// }</span>
<a name="l00930"></a>00930       acc += <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#73f2516769362429bd80f6336838ec47">interpolation</a>((*s)[i]);
<a name="l00931"></a>00931     }
<a name="l00932"></a>00932     <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>* str = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>(s-&gt;pstate(), acc);
<a name="l00933"></a>00933     <span class="keywordflow">if</span> (!str-&gt;quote_mark()) {
<a name="l00934"></a>00934       str-&gt;value(<a class="code" href="../../da/d80/namespace_sass.html#aa06358b69e16b3792bfbe403afd6962">string_unescape</a>(str-&gt;value()));
<a name="l00935"></a>00935     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (str-&gt;quote_mark()) {
<a name="l00936"></a>00936       str-&gt;quote_mark(<span class="charliteral">'*'</span>);
<a name="l00937"></a>00937     }
<a name="l00938"></a>00938     str-&gt;is_delayed(<span class="keyword">true</span>);
<a name="l00939"></a>00939     <span class="keywordflow">return</span> str;
<a name="l00940"></a>00940   }
<a name="l00941"></a>00941 
<a name="l00942"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#0e38bbd3c328bfacecfd5e1ad7741148">00942</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>* <a class="code" href="../../d4/d9b/common_8inc_8php.html#7a67647fbc74415932803d69446d973d">s</a>)
<a name="l00943"></a>00943   {
<a name="l00944"></a>00944     <span class="keywordflow">if</span> (!s-&gt;quote_mark() &amp;&amp; !s-&gt;is_delayed() &amp;&amp; <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#1b8dde5f4f9ebe06b1d27895c1dd9dfe">names_to_colors</a>.count(s-&gt;value())) {
<a name="l00945"></a>00945       <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>* c = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>(*<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#1b8dde5f4f9ebe06b1d27895c1dd9dfe">names_to_colors</a>[s-&gt;value()]);
<a name="l00946"></a>00946       c-&gt;pstate(s-&gt;pstate());
<a name="l00947"></a>00947       c-&gt;disp(s-&gt;value());
<a name="l00948"></a>00948       <span class="keywordflow">return</span> c;
<a name="l00949"></a>00949     }
<a name="l00950"></a>00950     <span class="keywordflow">return</span> s;
<a name="l00951"></a>00951   }
<a name="l00952"></a>00952 
<a name="l00953"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#d7922482e041c10d064663355cc98a67">00953</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../da/da9/class_sass_1_1_feature___query.html">Feature_Query</a>* q)
<a name="l00954"></a>00954   {
<a name="l00955"></a>00955     <a class="code" href="../../da/da9/class_sass_1_1_feature___query.html">Feature_Query</a>* qq = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../da/da9/class_sass_1_1_feature___query.html">Feature_Query</a>(q-&gt;pstate(),
<a name="l00956"></a>00956                                                     q-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>());
<a name="l00957"></a>00957     <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, L = q-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>(); i &lt; L; ++i) {
<a name="l00958"></a>00958       *qq &lt;&lt; static_cast&lt;Feature_Query_Condition*&gt;((*q)[i]-&gt;perform(<span class="keyword">this</span>));
<a name="l00959"></a>00959     }
<a name="l00960"></a>00960     <span class="keywordflow">return</span> qq;
<a name="l00961"></a>00961   }
<a name="l00962"></a>00962 
<a name="l00963"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#f838633753a1e60b9acb177207bb4acc">00963</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html">Feature_Query_Condition</a>* c)
<a name="l00964"></a>00964   {
<a name="l00965"></a>00965     <a class="code" href="../../db/ddf/class_sass_1_1_string.html">String</a>* feature = c-&gt;feature();
<a name="l00966"></a>00966     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* value = c-&gt;value();
<a name="l00967"></a>00967     value = (value ? value-&gt;perform(<span class="keyword">this</span>) : 0);
<a name="l00968"></a>00968     <a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html">Feature_Query_Condition</a>* cc = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d2/dd3/class_sass_1_1_feature___query___condition.html">Feature_Query_Condition</a>(c-&gt;pstate(),
<a name="l00969"></a>00969                                                  c-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>(),
<a name="l00970"></a>00970                                                  feature,
<a name="l00971"></a>00971                                                  value,
<a name="l00972"></a>00972                                                  c-&gt;operand(),
<a name="l00973"></a>00973                                                  c-&gt;is_root());
<a name="l00974"></a>00974     <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, L = c-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>(); i &lt; L; ++i) {
<a name="l00975"></a>00975       *cc &lt;&lt; static_cast&lt;Feature_Query_Condition*&gt;((*c)[i]-&gt;perform(<span class="keyword">this</span>));
<a name="l00976"></a>00976     }
<a name="l00977"></a>00977     <span class="keywordflow">return</span> cc;
<a name="l00978"></a>00978   }
<a name="l00979"></a>00979 
<a name="l00980"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#3f390529147b8bb34198fc54e5cc10de">00980</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../d1/d41/class_sass_1_1_at___root___expression.html">At_Root_Expression</a>* e)
<a name="l00981"></a>00981   {
<a name="l00982"></a>00982     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* feature = e-&gt;feature();
<a name="l00983"></a>00983     feature = (feature ? feature-&gt;perform(<span class="keyword">this</span>) : 0);
<a name="l00984"></a>00984     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* value = e-&gt;value();
<a name="l00985"></a>00985     value = (value ? value-&gt;perform(<span class="keyword">this</span>) : 0);
<a name="l00986"></a>00986     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* ee = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d1/d41/class_sass_1_1_at___root___expression.html">At_Root_Expression</a>(e-&gt;pstate(),
<a name="l00987"></a>00987                                                       <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/ddf/class_sass_1_1_string.html">String</a>*<span class="keyword">&gt;</span>(feature),
<a name="l00988"></a>00988                                                       value,
<a name="l00989"></a>00989                                                       e-&gt;is_interpolated());
<a name="l00990"></a>00990     <span class="keywordflow">return</span> ee;
<a name="l00991"></a>00991   }
<a name="l00992"></a>00992 
<a name="l00993"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#91fca9d5ec849bb708000c94a1fe4675">00993</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../d7/d62/class_sass_1_1_media___query.html">Media_Query</a>* q)
<a name="l00994"></a>00994   {
<a name="l00995"></a>00995     <a class="code" href="../../de/d6e/class_sass_1_1_to___string.html">To_String</a> <a class="code" href="../../da/d80/namespace_sass.html#c098cb6b59a09dd2673ba0f3c23d8253">to_string</a>(&amp;<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>);
<a name="l00996"></a>00996     <a class="code" href="../../db/ddf/class_sass_1_1_string.html">String</a>* t = q-&gt;media_type();
<a name="l00997"></a>00997     t = <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/ddf/class_sass_1_1_string.html">String</a>*<span class="keyword">&gt;</span>(t ? t-&gt;perform(<span class="keyword">this</span>) : 0);
<a name="l00998"></a>00998     <a class="code" href="../../d7/d62/class_sass_1_1_media___query.html">Media_Query</a>* qq = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d62/class_sass_1_1_media___query.html">Media_Query</a>(q-&gt;pstate(),
<a name="l00999"></a>00999                                                 t,
<a name="l01000"></a>01000                                                 q-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>(),
<a name="l01001"></a>01001                                                 q-&gt;is_negated(),
<a name="l01002"></a>01002                                                 q-&gt;is_restricted());
<a name="l01003"></a>01003     <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, L = q-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>(); i &lt; L; ++i) {
<a name="l01004"></a>01004       *qq &lt;&lt; static_cast&lt;Media_Query_Expression*&gt;((*q)[i]-&gt;perform(<span class="keyword">this</span>));
<a name="l01005"></a>01005     }
<a name="l01006"></a>01006     <span class="keywordflow">return</span> qq;
<a name="l01007"></a>01007   }
<a name="l01008"></a>01008 
<a name="l01009"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#cf4320e51d603c94f7deea0acc963b88">01009</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../df/d31/class_sass_1_1_media___query___expression.html">Media_Query_Expression</a>* e)
<a name="l01010"></a>01010   {
<a name="l01011"></a>01011     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* feature = e-&gt;feature();
<a name="l01012"></a>01012     feature = (feature ? feature-&gt;perform(<span class="keyword">this</span>) : 0);
<a name="l01013"></a>01013     <span class="keywordflow">if</span> (feature &amp;&amp; dynamic_cast&lt;String_Quoted*&gt;(feature)) {
<a name="l01014"></a>01014       feature = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(feature-&gt;pstate(),
<a name="l01015"></a>01015                                               <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>*<span class="keyword">&gt;</span>(feature)-&gt;value());
<a name="l01016"></a>01016     }
<a name="l01017"></a>01017     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* value = e-&gt;value();
<a name="l01018"></a>01018     value = (value ? value-&gt;perform(<span class="keyword">this</span>) : 0);
<a name="l01019"></a>01019     <span class="keywordflow">if</span> (value &amp;&amp; dynamic_cast&lt;String_Quoted*&gt;(value)) {
<a name="l01020"></a>01020       value = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(value-&gt;pstate(),
<a name="l01021"></a>01021                                             <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>*<span class="keyword">&gt;</span>(value)-&gt;value());
<a name="l01022"></a>01022     }
<a name="l01023"></a>01023     <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../df/d31/class_sass_1_1_media___query___expression.html">Media_Query_Expression</a>(e-&gt;pstate(),
<a name="l01024"></a>01024                                                 feature,
<a name="l01025"></a>01025                                                 value,
<a name="l01026"></a>01026                                                 e-&gt;is_interpolated());
<a name="l01027"></a>01027   }
<a name="l01028"></a>01028 
<a name="l01029"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#7abcd14efcc8f4f23b62edd52d8435be">01029</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../d1/d20/class_sass_1_1_null.html">Null</a>* n)
<a name="l01030"></a>01030   {
<a name="l01031"></a>01031     <span class="keywordflow">return</span> n;
<a name="l01032"></a>01032   }
<a name="l01033"></a>01033 
<a name="l01034"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#6a58ffb6dd737925ba83ec789339d9c9">01034</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../de/d6a/class_sass_1_1_argument.html">Argument</a>* <a class="code" href="../../df/d56/tag__support_8inc_8php.html#9d7c0d2d52751a85971430e899f14c25">a</a>)
<a name="l01035"></a>01035   {
<a name="l01036"></a>01036     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* val = a-&gt;value();
<a name="l01037"></a>01037     val-&gt;is_delayed(<span class="keyword">false</span>);
<a name="l01038"></a>01038     val = val-&gt;perform(<span class="keyword">this</span>);
<a name="l01039"></a>01039     val-&gt;is_delayed(<span class="keyword">false</span>);
<a name="l01040"></a>01040 
<a name="l01041"></a>01041     <span class="keywordtype">bool</span> is_rest_argument = a-&gt;is_rest_argument();
<a name="l01042"></a>01042     <span class="keywordtype">bool</span> is_keyword_argument = a-&gt;is_keyword_argument();
<a name="l01043"></a>01043 
<a name="l01044"></a>01044     <span class="keywordflow">if</span> (a-&gt;is_rest_argument()) {
<a name="l01045"></a>01045       <span class="keywordflow">if</span> (val-&gt;concrete_type() == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8684cafa5feda04184537b4d7d346e1e89b">Expression::MAP</a>) {
<a name="l01046"></a>01046         is_rest_argument = <span class="keyword">false</span>;
<a name="l01047"></a>01047         is_keyword_argument = <span class="keyword">true</span>;
<a name="l01048"></a>01048       }
<a name="l01049"></a>01049       <span class="keywordflow">else</span> <span class="keywordflow">if</span>(val-&gt;concrete_type() != <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86825688e799536738ea469158ef15fd1c0">Expression::LIST</a>) {
<a name="l01050"></a>01050         <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* wrapper = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>(val-&gt;pstate(),
<a name="l01051"></a>01051                                            0,
<a name="l01052"></a>01052                                            <a class="code" href="../../db/d2b/class_sass_1_1_list.html#9388a3ccf62a50f047b10c2d99114bcef81277bcd86412fe04bb68718ea09392">List::COMMA</a>,
<a name="l01053"></a>01053                                            <span class="keyword">true</span>);
<a name="l01054"></a>01054         *wrapper &lt;&lt; val;
<a name="l01055"></a>01055         val = wrapper;
<a name="l01056"></a>01056       }
<a name="l01057"></a>01057     }
<a name="l01058"></a>01058     <span class="keywordflow">return</span> <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../de/d6a/class_sass_1_1_argument.html">Argument</a>(a-&gt;pstate(),
<a name="l01059"></a>01059                                   val,
<a name="l01060"></a>01060                                   a-&gt;name(),
<a name="l01061"></a>01061                                   is_rest_argument,
<a name="l01062"></a>01062                                   is_keyword_argument);
<a name="l01063"></a>01063   }
<a name="l01064"></a>01064 
<a name="l01065"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#262cf4b248aa77d915133f554fbd28c1">01065</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../d0/d1a/class_sass_1_1_arguments.html">Arguments</a>* <a class="code" href="../../df/d56/tag__support_8inc_8php.html#9d7c0d2d52751a85971430e899f14c25">a</a>)
<a name="l01066"></a>01066   {
<a name="l01067"></a>01067     <a class="code" href="../../d0/d1a/class_sass_1_1_arguments.html">Arguments</a>* aa = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d1a/class_sass_1_1_arguments.html">Arguments</a>(a-&gt;pstate());
<a name="l01068"></a>01068     <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, L = a-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>(); i &lt; L; ++i) {
<a name="l01069"></a>01069       *aa &lt;&lt; static_cast&lt;Argument*&gt;((*a)[i]-&gt;perform(<span class="keyword">this</span>));
<a name="l01070"></a>01070     }
<a name="l01071"></a>01071     <span class="keywordflow">return</span> aa;
<a name="l01072"></a>01072   }
<a name="l01073"></a>01073 
<a name="l01074"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#d400a56645def6041fe1ca6c51592039">01074</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../da/d81/class_sass_1_1_comment.html">Comment</a>* c)
<a name="l01075"></a>01075   {
<a name="l01076"></a>01076     <span class="keywordflow">return</span> 0;
<a name="l01077"></a>01077   }
<a name="l01078"></a>01078 
<a name="l01079"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#19a0f30a7fa24b707238e79800fe61da">01079</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#2a0f3082a3ab003265b4c40bfd941dac">Eval::operator()</a>(<a class="code" href="../../d5/d3f/class_sass_1_1_parent___selector.html">Parent_Selector</a>* <a class="code" href="../../df/d56/tag__support_8inc_8php.html#c68293ed06cd07a096c8b421f1af2805">p</a>)
<a name="l01080"></a>01080   {
<a name="l01081"></a>01081     <span class="comment">// no idea why both calls are needed</span>
<a name="l01082"></a>01082     <a class="code" href="../../df/d05/class_sass_1_1_selector.html">Selector</a>* <a class="code" href="../../d4/d9b/common_8inc_8php.html#7a67647fbc74415932803d69446d973d">s</a> = p-&gt;perform(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#27d42098295427d18ba710b85658d482">contextualize</a>);
<a name="l01083"></a>01083     <span class="keywordflow">if</span> (!s) s = p-&gt;<a class="code" href="../../d5/d3f/class_sass_1_1_parent___selector.html#6ddbd803416809aec0f8b6ecc35cdfcf">selector</a>()-&gt;perform(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#27d42098295427d18ba710b85658d482">contextualize</a>);
<a name="l01084"></a>01084     <span class="comment">// access to parent selector may return 0</span>
<a name="l01085"></a>01085     <a class="code" href="../../df/dea/class_sass_1_1_selector___list.html">Selector_List</a>* <a class="code" href="../../d4/d9b/common_8inc_8php.html#367c038113690266a013d2e04a42a3b1" title="Shorthand method for the Localization::localize method.">l</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../df/dea/class_sass_1_1_selector___list.html">Selector_List</a>*<span class="keyword">&gt;</span>(s);
<a name="l01086"></a>01086     <span class="comment">// some spec tests cause this (might be a valid case!)</span>
<a name="l01087"></a>01087     <span class="comment">// if (!s) { cerr &lt;&lt; "Parent Selector eval error" &lt;&lt; endl; }</span>
<a name="l01088"></a>01088     <span class="keywordflow">if</span> (!s) { l = <span class="keyword">new</span> (<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#b8f3e88d562858f46f8e9349ae955b21">ctx</a>.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../df/dea/class_sass_1_1_selector___list.html">Selector_List</a>(p-&gt;pstate()); }
<a name="l01089"></a>01089     <span class="keywordflow">return</span> l-&gt;perform(<a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#ed9d3d2c752cc9e31b1235b794105b28">listize</a>);
<a name="l01090"></a>01090   }
<a name="l01091"></a>01091 
<a name="l01092"></a><a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#d783498ebe575ad9431c508a169f6c48">01092</a>   <span class="keyword">inline</span> <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../d5/d9f/class_sass_1_1_eval.html#d783498ebe575ad9431c508a169f6c48">Eval::fallback_impl</a>(<a class="code" href="../../d4/d4a/class_sass_1_1_a_s_t___node.html">AST_Node</a>* n)
<a name="l01093"></a>01093   {
<a name="l01094"></a>01094     <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*<span class="keyword">&gt;</span>(n);
<a name="l01095"></a>01095   }
<a name="l01096"></a>01096 
<a name="l01097"></a>01097   <span class="comment">// All the binary helpers.</span>
<a name="l01098"></a>01098 
<a name="l01099"></a><a class="code" href="../../da/d80/namespace_sass.html#bd238ff0bbf4f3af457b6430a19cd30c">01099</a>   <span class="keywordtype">bool</span> <a class="code" href="../../da/d80/namespace_sass.html#642a2a076d4f3f2d48ba11e228eb2e45">eq</a>(<a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* lhs, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* rhs, <a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp; <a class="code" href="../../da/d80/namespace_sass.html#ec24354016cba787162086d169717dcf">ctx</a>)
<a name="l01100"></a>01100   {
<a name="l01101"></a>01101     <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede868">Expression::Concrete_Type</a> ltype = lhs-&gt;concrete_type();
<a name="l01102"></a>01102     <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede868">Expression::Concrete_Type</a> rtype = rhs-&gt;concrete_type();
<a name="l01103"></a>01103     <span class="keywordflow">if</span> (ltype != rtype) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01104"></a>01104     <span class="keywordflow">switch</span> (ltype) {
<a name="l01105"></a>01105 
<a name="l01106"></a>01106       <span class="keywordflow">case</span> <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8688a583f16e8d237a423c8c1d9087a4c72">Expression::BOOLEAN</a>: {
<a name="l01107"></a>01107         <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d4a/class_sass_1_1_boolean.html">Boolean</a>*<span class="keyword">&gt;</span>(lhs)-&gt;value() ==
<a name="l01108"></a>01108                <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d4a/class_sass_1_1_boolean.html">Boolean</a>*<span class="keyword">&gt;</span>(rhs)-&gt;value();
<a name="l01109"></a>01109       } <span class="keywordflow">break</span>;
<a name="l01110"></a>01110 
<a name="l01111"></a>01111       <span class="keywordflow">case</span> <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86812a90dfe20486bbe3e075afcd19ef2d0">Expression::NUMBER</a>: {
<a name="l01112"></a>01112         <span class="keywordflow">return</span> *<span class="keyword">static_cast&lt;</span><a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>*<span class="keyword">&gt;</span>(lhs) ==
<a name="l01113"></a>01113                *static_cast&lt;Number*&gt;(rhs);
<a name="l01114"></a>01114       } <span class="keywordflow">break</span>;
<a name="l01115"></a>01115 
<a name="l01116"></a>01116       <span class="keywordflow">case</span> <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8687a5ecb5193db2d5f258ae1abd33714b9">Expression::COLOR</a>: {
<a name="l01117"></a>01117         <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>* <a class="code" href="../../d4/d9b/common_8inc_8php.html#367c038113690266a013d2e04a42a3b1" title="Shorthand method for the Localization::localize method.">l</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>*<span class="keyword">&gt;</span>(lhs);
<a name="l01118"></a>01118         <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>* r = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>*<span class="keyword">&gt;</span>(rhs);
<a name="l01119"></a>01119         <span class="keywordflow">return</span> l-&gt;r() == r-&gt;r() &amp;&amp;
<a name="l01120"></a>01120                l-&gt;g() == r-&gt;g() &amp;&amp;
<a name="l01121"></a>01121                l-&gt;b() == r-&gt;b() &amp;&amp;
<a name="l01122"></a>01122                l-&gt;a() == r-&gt;a();
<a name="l01123"></a>01123       } <span class="keywordflow">break</span>;
<a name="l01124"></a>01124 
<a name="l01125"></a>01125       <span class="keywordflow">case</span> <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede868ee847e634a4297b274316de8a8ca9921">Expression::STRING</a>: {
<a name="l01126"></a>01126         <span class="keywordtype">string</span> slhs = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>*<span class="keyword">&gt;</span>(lhs)-&gt;value();
<a name="l01127"></a>01127         <span class="keywordtype">string</span> srhs = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>*<span class="keyword">&gt;</span>(rhs)-&gt;value();
<a name="l01128"></a>01128         <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(slhs) == <a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(srhs) &amp;&amp;
<a name="l01129"></a>01129                (!(<a class="code" href="../../da/d80/namespace_sass.html#76b813c5e17cc8a308160bbc1ecce68e">is_quoted</a>(slhs) || <a class="code" href="../../da/d80/namespace_sass.html#76b813c5e17cc8a308160bbc1ecce68e">is_quoted</a>(srhs)) || slhs[0] == srhs[0]);
<a name="l01130"></a>01130       } <span class="keywordflow">break</span>;
<a name="l01131"></a>01131 
<a name="l01132"></a>01132       <span class="keywordflow">case</span> <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86825688e799536738ea469158ef15fd1c0">Expression::LIST</a>: {
<a name="l01133"></a>01133         <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* <a class="code" href="../../d4/d9b/common_8inc_8php.html#367c038113690266a013d2e04a42a3b1" title="Shorthand method for the Localization::localize method.">l</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>*<span class="keyword">&gt;</span>(lhs);
<a name="l01134"></a>01134         <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* r = <span class="keyword">static_cast&lt;</span><a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>*<span class="keyword">&gt;</span>(rhs);
<a name="l01135"></a>01135         <span class="keywordflow">if</span> (l-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>() != r-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01136"></a>01136         <span class="keywordflow">if</span> (l-&gt;separator() != r-&gt;separator()) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01137"></a>01137         <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, L = l-&gt;<a class="code" href="../../d6/ddf/class_sass_1_1_vectorized.html#2edf269e5cd490f7863c9150bb910c85">length</a>(); i &lt; L; ++i) {
<a name="l01138"></a>01138           <span class="keywordflow">if</span> (!<a class="code" href="../../da/d80/namespace_sass.html#642a2a076d4f3f2d48ba11e228eb2e45">eq</a>((*l)[i], (*r)[i], ctx)) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01139"></a>01139         }
<a name="l01140"></a>01140         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01141"></a>01141       } <span class="keywordflow">break</span>;
<a name="l01142"></a>01142 
<a name="l01143"></a>01143       <span class="keywordflow">case</span> <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8684cafa5feda04184537b4d7d346e1e89b">Expression::MAP</a>: {
<a name="l01144"></a>01144         <a class="code" href="../../df/d35/class_sass_1_1_map.html">Map</a>* <a class="code" href="../../d4/d9b/common_8inc_8php.html#367c038113690266a013d2e04a42a3b1" title="Shorthand method for the Localization::localize method.">l</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../df/d35/class_sass_1_1_map.html">Map</a>*<span class="keyword">&gt;</span>(lhs);
<a name="l01145"></a>01145         <a class="code" href="../../df/d35/class_sass_1_1_map.html">Map</a>* r = <span class="keyword">static_cast&lt;</span><a class="code" href="../../df/d35/class_sass_1_1_map.html">Map</a>*<span class="keyword">&gt;</span>(rhs);
<a name="l01146"></a>01146         <span class="keywordflow">if</span> (l-&gt;<a class="code" href="../../d8/d9a/class_sass_1_1_hashed.html#2edf269e5cd490f7863c9150bb910c85">length</a>() != r-&gt;<a class="code" href="../../d8/d9a/class_sass_1_1_hashed.html#2edf269e5cd490f7863c9150bb910c85">length</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01147"></a>01147         <span class="keywordflow">for</span> (<span class="keyword">auto</span> key : l-&gt;<a class="code" href="../../d8/d9a/class_sass_1_1_hashed.html#303d5ff19057db2967dd268704bcdd26">keys</a>())
<a name="l01148"></a>01148           <span class="keywordflow">if</span> (!<a class="code" href="../../da/d80/namespace_sass.html#642a2a076d4f3f2d48ba11e228eb2e45">eq</a>(l-&gt;<a class="code" href="../../d8/d9a/class_sass_1_1_hashed.html#b474fc60b9dc981978186a4fd9822e38">at</a>(key), r-&gt;<a class="code" href="../../d8/d9a/class_sass_1_1_hashed.html#b474fc60b9dc981978186a4fd9822e38">at</a>(key), ctx)) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01149"></a>01149         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01150"></a>01150       } <span class="keywordflow">break</span>;
<a name="l01151"></a>01151       <span class="keywordflow">case</span> <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8685a1a6646a516c78ae30556b836aa1fde">Expression::NULL_VAL</a>: {
<a name="l01152"></a>01152         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01153"></a>01153       } <span class="keywordflow">break</span>;
<a name="l01154"></a>01154 
<a name="l01155"></a>01155       <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;
<a name="l01156"></a>01156     }
<a name="l01157"></a>01157     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01158"></a>01158   }
<a name="l01159"></a>01159 
<a name="l01160"></a><a class="code" href="../../da/d80/namespace_sass.html#2930a5669b8cf79372a38b53e19ffc6c">01160</a>   <span class="keywordtype">bool</span> <a class="code" href="../../da/d80/namespace_sass.html#2930a5669b8cf79372a38b53e19ffc6c">lt</a>(<a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* lhs, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* rhs, <a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp; <a class="code" href="../../da/d80/namespace_sass.html#ec24354016cba787162086d169717dcf">ctx</a>)
<a name="l01161"></a>01161   {
<a name="l01162"></a>01162     <span class="keywordflow">if</span> (lhs-&gt;concrete_type() != <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86812a90dfe20486bbe3e075afcd19ef2d0">Expression::NUMBER</a> ||
<a name="l01163"></a>01163         rhs-&gt;concrete_type() != <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86812a90dfe20486bbe3e075afcd19ef2d0">Expression::NUMBER</a>)
<a name="l01164"></a>01164       <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"may only compare numbers"</span>, lhs-&gt;pstate());
<a name="l01165"></a>01165     <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>* <a class="code" href="../../d4/d9b/common_8inc_8php.html#367c038113690266a013d2e04a42a3b1" title="Shorthand method for the Localization::localize method.">l</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>*<span class="keyword">&gt;</span>(lhs);
<a name="l01166"></a>01166     <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>* r = <span class="keyword">static_cast&lt;</span><a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>*<span class="keyword">&gt;</span>(rhs);
<a name="l01167"></a>01167     <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a> tmp_r(*r);
<a name="l01168"></a>01168     tmp_r.<a class="code" href="../../dc/dec/class_sass_1_1_number.html#af7e60bcc6c54a247a2700d82a82fba0">normalize</a>(l-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#d1312e60f0ee122eff3d3f117be4d948">find_convertible_unit</a>());
<a name="l01169"></a>01169     <span class="keywordtype">string</span> l_unit(l-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#30d08dab537f6edd00794f37cb7a58d0">unit</a>());
<a name="l01170"></a>01170     <span class="keywordtype">string</span> r_unit(tmp_r.<a class="code" href="../../dc/dec/class_sass_1_1_number.html#30d08dab537f6edd00794f37cb7a58d0">unit</a>());
<a name="l01171"></a>01171     <span class="keywordflow">if</span> (!l_unit.empty() &amp;&amp; !r_unit.empty() &amp;&amp; l-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#30d08dab537f6edd00794f37cb7a58d0">unit</a>() != tmp_r.<a class="code" href="../../dc/dec/class_sass_1_1_number.html#30d08dab537f6edd00794f37cb7a58d0">unit</a>()) {
<a name="l01172"></a>01172       <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"cannot compare numbers with incompatible units"</span>, l-&gt;pstate());
<a name="l01173"></a>01173     }
<a name="l01174"></a>01174     <span class="keywordflow">return</span> l-&gt;value() &lt; tmp_r.value();
<a name="l01175"></a>01175   }
<a name="l01176"></a>01176 
<a name="l01177"></a><a class="code" href="../../da/d80/namespace_sass.html#938b3abad2f9ebeab2087807b9012a0c">01177</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../da/d80/namespace_sass.html#938b3abad2f9ebeab2087807b9012a0c">op_numbers</a>(<a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp; <a class="code" href="../../da/d80/namespace_sass.html#ec24354016cba787162086d169717dcf">ctx</a>, <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html">Binary_Expression</a>* b, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* lhs, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* rhs)
<a name="l01178"></a>01178   {
<a name="l01179"></a>01179     <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>* <a class="code" href="../../d4/d9b/common_8inc_8php.html#367c038113690266a013d2e04a42a3b1" title="Shorthand method for the Localization::localize method.">l</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>*<span class="keyword">&gt;</span>(lhs);
<a name="l01180"></a>01180     <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>* r = <span class="keyword">static_cast&lt;</span><a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>*<span class="keyword">&gt;</span>(rhs);
<a name="l01181"></a>01181     <span class="keywordtype">double</span> lv = l-&gt;value();
<a name="l01182"></a>01182     <span class="keywordtype">double</span> rv = r-&gt;value();
<a name="l01183"></a>01183     <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7">Binary_Expression::Type</a> op = b-&gt;<a class="code" href="../../db/df1/class_sass_1_1_expression.html#f9f069732bfdd88e8e8b13652f3af643">type</a>();
<a name="l01184"></a>01184     <span class="keywordflow">if</span> (op == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a78565f0d60c3ba6d468661c49d86e9744">Binary_Expression::DIV</a> &amp;&amp; !rv) {
<a name="l01185"></a>01185       <span class="keywordflow">return</span> <span class="keyword">new</span> (ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(l-&gt;pstate(), <span class="stringliteral">"Infinity"</span>);
<a name="l01186"></a>01186     }
<a name="l01187"></a>01187     <span class="keywordflow">if</span> (op == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7140fcc89db148e5975f1486e794675ba">Binary_Expression::MOD</a> &amp;&amp; !rv) {
<a name="l01188"></a>01188       <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"division by zero"</span>, r-&gt;pstate());
<a name="l01189"></a>01189     }
<a name="l01190"></a>01190 
<a name="l01191"></a>01191     <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a> tmp(*r);
<a name="l01192"></a>01192     tmp.<a class="code" href="../../dc/dec/class_sass_1_1_number.html#af7e60bcc6c54a247a2700d82a82fba0">normalize</a>(l-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#d1312e60f0ee122eff3d3f117be4d948">find_convertible_unit</a>());
<a name="l01193"></a>01193     <span class="keywordtype">string</span> l_unit(l-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#30d08dab537f6edd00794f37cb7a58d0">unit</a>());
<a name="l01194"></a>01194     <span class="keywordtype">string</span> r_unit(tmp.<a class="code" href="../../dc/dec/class_sass_1_1_number.html#30d08dab537f6edd00794f37cb7a58d0">unit</a>());
<a name="l01195"></a>01195     <span class="keywordflow">if</span> (l_unit != r_unit &amp;&amp; !l_unit.empty() &amp;&amp; !r_unit.empty() &amp;&amp;
<a name="l01196"></a>01196         (op == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7cfcf145f2788bf340ff3f3098bc54909">Binary_Expression::ADD</a> || op == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a712b733d4941495e86811fe6ceeeff9da">Binary_Expression::SUB</a>)) {
<a name="l01197"></a>01197       <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"Incompatible units: '"</span>+r_unit+<span class="stringliteral">"' and '"</span>+l_unit+<span class="stringliteral">"'."</span>, l-&gt;pstate());
<a name="l01198"></a>01198     }
<a name="l01199"></a>01199     <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>* v = <span class="keyword">new</span> (ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>(*l);
<a name="l01200"></a>01200     v-&gt;pstate(b-&gt;pstate());
<a name="l01201"></a>01201     <span class="keywordflow">if</span> (l_unit.empty() &amp;&amp; (op == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7cfcf145f2788bf340ff3f3098bc54909">Binary_Expression::ADD</a> || op == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a712b733d4941495e86811fe6ceeeff9da">Binary_Expression::SUB</a> || op == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7140fcc89db148e5975f1486e794675ba">Binary_Expression::MOD</a>)) {
<a name="l01202"></a>01202       v-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#8b555bc7a31eb51b6d91be56b211515f">numerator_units</a>() = r-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#8b555bc7a31eb51b6d91be56b211515f">numerator_units</a>();
<a name="l01203"></a>01203       v-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#315f1ccccdabd92b96d5f0f63f8f0111">denominator_units</a>() = r-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#315f1ccccdabd92b96d5f0f63f8f0111">denominator_units</a>();
<a name="l01204"></a>01204     }
<a name="l01205"></a>01205 
<a name="l01206"></a>01206     <span class="keywordflow">if</span> (op == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7086ab1f2f4dac104b6826ebe0eaba8fd">Binary_Expression::MUL</a>) {
<a name="l01207"></a>01207       v-&gt;value(<a class="code" href="../../da/d80/namespace_sass.html#2cc1c3f085ad1f3d0394ba482fab75af">ops</a>[op](lv, rv));
<a name="l01208"></a>01208       <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, S = r-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#8b555bc7a31eb51b6d91be56b211515f">numerator_units</a>().size(); i &lt; S; ++i) {
<a name="l01209"></a>01209         v-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#8b555bc7a31eb51b6d91be56b211515f">numerator_units</a>().push_back(r-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#8b555bc7a31eb51b6d91be56b211515f">numerator_units</a>()[i]);
<a name="l01210"></a>01210       }
<a name="l01211"></a>01211       <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, S = r-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#315f1ccccdabd92b96d5f0f63f8f0111">denominator_units</a>().size(); i &lt; S; ++i) {
<a name="l01212"></a>01212         v-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#315f1ccccdabd92b96d5f0f63f8f0111">denominator_units</a>().push_back(r-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#315f1ccccdabd92b96d5f0f63f8f0111">denominator_units</a>()[i]);
<a name="l01213"></a>01213       }
<a name="l01214"></a>01214     }
<a name="l01215"></a>01215     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a78565f0d60c3ba6d468661c49d86e9744">Binary_Expression::DIV</a>) {
<a name="l01216"></a>01216       v-&gt;value(<a class="code" href="../../da/d80/namespace_sass.html#2cc1c3f085ad1f3d0394ba482fab75af">ops</a>[op](lv, rv));
<a name="l01217"></a>01217       <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, S = r-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#8b555bc7a31eb51b6d91be56b211515f">numerator_units</a>().size(); i &lt; S; ++i) {
<a name="l01218"></a>01218         v-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#315f1ccccdabd92b96d5f0f63f8f0111">denominator_units</a>().push_back(r-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#8b555bc7a31eb51b6d91be56b211515f">numerator_units</a>()[i]);
<a name="l01219"></a>01219       }
<a name="l01220"></a>01220       <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, S = r-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#315f1ccccdabd92b96d5f0f63f8f0111">denominator_units</a>().size(); i &lt; S; ++i) {
<a name="l01221"></a>01221         v-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#8b555bc7a31eb51b6d91be56b211515f">numerator_units</a>().push_back(r-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#315f1ccccdabd92b96d5f0f63f8f0111">denominator_units</a>()[i]);
<a name="l01222"></a>01222       }
<a name="l01223"></a>01223     } <span class="keywordflow">else</span> {
<a name="l01224"></a>01224       v-&gt;value(<a class="code" href="../../da/d80/namespace_sass.html#2cc1c3f085ad1f3d0394ba482fab75af">ops</a>[op](lv, tmp.value()));
<a name="l01225"></a>01225     }
<a name="l01226"></a>01226     v-&gt;<a class="code" href="../../dc/dec/class_sass_1_1_number.html#af7e60bcc6c54a247a2700d82a82fba0">normalize</a>();
<a name="l01227"></a>01227     <span class="keywordflow">return</span> v;
<a name="l01228"></a>01228   }
<a name="l01229"></a>01229 
<a name="l01230"></a><a class="code" href="../../da/d80/namespace_sass.html#cc42a14fe9d6d24d2c9f7434416d23b0">01230</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../da/d80/namespace_sass.html#cc42a14fe9d6d24d2c9f7434416d23b0">op_number_color</a>(<a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp; <a class="code" href="../../da/d80/namespace_sass.html#ec24354016cba787162086d169717dcf">ctx</a>, <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7">Binary_Expression::Type</a> op, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* lhs, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* rhs)
<a name="l01231"></a>01231   {
<a name="l01232"></a>01232     <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>* <a class="code" href="../../d4/d9b/common_8inc_8php.html#367c038113690266a013d2e04a42a3b1" title="Shorthand method for the Localization::localize method.">l</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>*<span class="keyword">&gt;</span>(lhs);
<a name="l01233"></a>01233     <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>* r = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>*<span class="keyword">&gt;</span>(rhs);
<a name="l01234"></a>01234     <span class="comment">// TODO: currently SASS converts colors to standard form when adding to strings;</span>
<a name="l01235"></a>01235     <span class="comment">// when https://github.com/nex3/sass/issues/363 is added this can be removed to</span>
<a name="l01236"></a>01236     <span class="comment">// preserve the original value</span>
<a name="l01237"></a>01237     r-&gt;disp(<span class="stringliteral">""</span>);
<a name="l01238"></a>01238     <span class="keywordtype">double</span> lv = l-&gt;value();
<a name="l01239"></a>01239     <span class="keywordflow">switch</span> (op) {
<a name="l01240"></a>01240       <span class="keywordflow">case</span> <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7cfcf145f2788bf340ff3f3098bc54909">Binary_Expression::ADD</a>:
<a name="l01241"></a>01241       <span class="keywordflow">case</span> <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7086ab1f2f4dac104b6826ebe0eaba8fd">Binary_Expression::MUL</a>: {
<a name="l01242"></a>01242         <span class="keywordflow">return</span> <span class="keyword">new</span> (ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>(l-&gt;pstate(),
<a name="l01243"></a>01243                                    <a class="code" href="../../da/d80/namespace_sass.html#2cc1c3f085ad1f3d0394ba482fab75af">ops</a>[op](lv, r-&gt;r()),
<a name="l01244"></a>01244                                    <a class="code" href="../../da/d80/namespace_sass.html#2cc1c3f085ad1f3d0394ba482fab75af">ops</a>[op](lv, r-&gt;g()),
<a name="l01245"></a>01245                                    <a class="code" href="../../da/d80/namespace_sass.html#2cc1c3f085ad1f3d0394ba482fab75af">ops</a>[op](lv, r-&gt;b()),
<a name="l01246"></a>01246                                    r-&gt;a());
<a name="l01247"></a>01247       } <span class="keywordflow">break</span>;
<a name="l01248"></a>01248       <span class="keywordflow">case</span> <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a712b733d4941495e86811fe6ceeeff9da">Binary_Expression::SUB</a>:
<a name="l01249"></a>01249       <span class="keywordflow">case</span> <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a78565f0d60c3ba6d468661c49d86e9744">Binary_Expression::DIV</a>: {
<a name="l01250"></a>01250         <span class="keywordtype">string</span> sep(op == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a712b733d4941495e86811fe6ceeeff9da">Binary_Expression::SUB</a> ? <span class="stringliteral">"-"</span> : <span class="stringliteral">"/"</span>);
<a name="l01251"></a>01251         <a class="code" href="../../de/d6e/class_sass_1_1_to___string.html">To_String</a> <a class="code" href="../../da/d80/namespace_sass.html#c098cb6b59a09dd2673ba0f3c23d8253">to_string</a>(&amp;ctx);
<a name="l01252"></a>01252         <span class="keywordtype">string</span> <a class="code" href="../../d1/db0/union_sass___value.html#fd45dc36a1bd314e51a53b98c66726c1">color</a>(r-&gt;sixtuplet() &amp;&amp; (ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#2fa2c4bd88e9fa2b27e9e8030806e2cb">output_style</a> != <a class="code" href="../../da/d80/namespace_sass.html#b198729676bcc09c14d990ff01578c7eb48e815f9d64a180ffb0616e40ebc4ce">COMPRESSED</a>) ?
<a name="l01253"></a>01253                      r-&gt;perform(&amp;to_string) :
<a name="l01254"></a>01254                      <a class="code" href="../../d0/d1c/namespace_sass_1_1_util.html#50c2c3a21acac8dd958cf12d566fd911">Util::normalize_sixtuplet</a>(r-&gt;perform(&amp;to_string)));
<a name="l01255"></a>01255         <span class="keywordflow">return</span> <span class="keyword">new</span> (ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(l-&gt;pstate(),
<a name="l01256"></a>01256                                              l-&gt;perform(&amp;to_string)
<a name="l01257"></a>01257                                              + sep
<a name="l01258"></a>01258                                              + color);
<a name="l01259"></a>01259       } <span class="keywordflow">break</span>;
<a name="l01260"></a>01260       <span class="keywordflow">case</span> <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7140fcc89db148e5975f1486e794675ba">Binary_Expression::MOD</a>: {
<a name="l01261"></a>01261         <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"cannot divide a number by a color"</span>, r-&gt;pstate());
<a name="l01262"></a>01262       } <span class="keywordflow">break</span>;
<a name="l01263"></a>01263       <span class="keywordflow">default</span>: <span class="keywordflow">break</span>; <span class="comment">// caller should ensure that we don't get here</span>
<a name="l01264"></a>01264     }
<a name="l01265"></a>01265     <span class="comment">// unreachable</span>
<a name="l01266"></a>01266     <span class="keywordflow">return</span> l;
<a name="l01267"></a>01267   }
<a name="l01268"></a>01268 
<a name="l01269"></a><a class="code" href="../../da/d80/namespace_sass.html#b7e6d42a242e95d972849361e5de2a98">01269</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../da/d80/namespace_sass.html#b7e6d42a242e95d972849361e5de2a98">op_color_number</a>(<a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp; <a class="code" href="../../da/d80/namespace_sass.html#ec24354016cba787162086d169717dcf">ctx</a>, <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7">Binary_Expression::Type</a> op, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* lhs, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* rhs)
<a name="l01270"></a>01270   {
<a name="l01271"></a>01271     <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>* <a class="code" href="../../d4/d9b/common_8inc_8php.html#367c038113690266a013d2e04a42a3b1" title="Shorthand method for the Localization::localize method.">l</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>*<span class="keyword">&gt;</span>(lhs);
<a name="l01272"></a>01272     <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>* r = <span class="keyword">static_cast&lt;</span><a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>*<span class="keyword">&gt;</span>(rhs);
<a name="l01273"></a>01273     <span class="keywordtype">double</span> rv = r-&gt;value();
<a name="l01274"></a>01274     <span class="keywordflow">if</span> (op == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a78565f0d60c3ba6d468661c49d86e9744">Binary_Expression::DIV</a> &amp;&amp; !rv) <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"division by zero"</span>, r-&gt;pstate());
<a name="l01275"></a>01275     <span class="keywordflow">return</span> <span class="keyword">new</span> (ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>(l-&gt;pstate(),
<a name="l01276"></a>01276                                <a class="code" href="../../da/d80/namespace_sass.html#2cc1c3f085ad1f3d0394ba482fab75af">ops</a>[op](l-&gt;r(), rv),
<a name="l01277"></a>01277                                <a class="code" href="../../da/d80/namespace_sass.html#2cc1c3f085ad1f3d0394ba482fab75af">ops</a>[op](l-&gt;g(), rv),
<a name="l01278"></a>01278                                <a class="code" href="../../da/d80/namespace_sass.html#2cc1c3f085ad1f3d0394ba482fab75af">ops</a>[op](l-&gt;b(), rv),
<a name="l01279"></a>01279                                l-&gt;a());
<a name="l01280"></a>01280   }
<a name="l01281"></a>01281 
<a name="l01282"></a><a class="code" href="../../da/d80/namespace_sass.html#2abf184ce00ca81a17bbc70ce56ea204">01282</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../da/d80/namespace_sass.html#2abf184ce00ca81a17bbc70ce56ea204">op_colors</a>(<a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp; <a class="code" href="../../da/d80/namespace_sass.html#ec24354016cba787162086d169717dcf">ctx</a>, <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7">Binary_Expression::Type</a> op, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* lhs, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* rhs)
<a name="l01283"></a>01283   {
<a name="l01284"></a>01284     <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>* <a class="code" href="../../d4/d9b/common_8inc_8php.html#367c038113690266a013d2e04a42a3b1" title="Shorthand method for the Localization::localize method.">l</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>*<span class="keyword">&gt;</span>(lhs);
<a name="l01285"></a>01285     <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>* r = <span class="keyword">static_cast&lt;</span><a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>*<span class="keyword">&gt;</span>(rhs);
<a name="l01286"></a>01286     <span class="keywordflow">if</span> (l-&gt;a() != r-&gt;a()) {
<a name="l01287"></a>01287       <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"alpha channels must be equal when combining colors"</span>, r-&gt;pstate());
<a name="l01288"></a>01288     }
<a name="l01289"></a>01289     <span class="keywordflow">if</span> ((op == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a78565f0d60c3ba6d468661c49d86e9744">Binary_Expression::DIV</a> || op == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7140fcc89db148e5975f1486e794675ba">Binary_Expression::MOD</a>) &amp;&amp;
<a name="l01290"></a>01290         (!r-&gt;r() || !r-&gt;g() ||!r-&gt;b())) {
<a name="l01291"></a>01291       <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"division by zero"</span>, r-&gt;pstate());
<a name="l01292"></a>01292     }
<a name="l01293"></a>01293     <span class="keywordflow">return</span> <span class="keyword">new</span> (ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>(l-&gt;pstate(),
<a name="l01294"></a>01294                                <a class="code" href="../../da/d80/namespace_sass.html#2cc1c3f085ad1f3d0394ba482fab75af">ops</a>[op](l-&gt;r(), r-&gt;r()),
<a name="l01295"></a>01295                                <a class="code" href="../../da/d80/namespace_sass.html#2cc1c3f085ad1f3d0394ba482fab75af">ops</a>[op](l-&gt;g(), r-&gt;g()),
<a name="l01296"></a>01296                                <a class="code" href="../../da/d80/namespace_sass.html#2cc1c3f085ad1f3d0394ba482fab75af">ops</a>[op](l-&gt;b(), r-&gt;b()),
<a name="l01297"></a>01297                                l-&gt;a());
<a name="l01298"></a>01298   }
<a name="l01299"></a>01299 
<a name="l01300"></a><a class="code" href="../../da/d80/namespace_sass.html#b216948ec8912a9024aaf109d57540a4">01300</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../da/d80/namespace_sass.html#b216948ec8912a9024aaf109d57540a4">op_strings</a>(<a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp; <a class="code" href="../../da/d80/namespace_sass.html#ec24354016cba787162086d169717dcf">ctx</a>, <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7">Binary_Expression::Type</a> op, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* lhs, <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>*rhs)
<a name="l01301"></a>01301   {
<a name="l01302"></a>01302     <a class="code" href="../../de/d6e/class_sass_1_1_to___string.html">To_String</a> <a class="code" href="../../da/d80/namespace_sass.html#c098cb6b59a09dd2673ba0f3c23d8253">to_string</a>(&amp;ctx);
<a name="l01303"></a>01303     <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede868">Expression::Concrete_Type</a> ltype = lhs-&gt;concrete_type();
<a name="l01304"></a>01304     <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede868">Expression::Concrete_Type</a> rtype = rhs-&gt;concrete_type();
<a name="l01305"></a>01305 
<a name="l01306"></a>01306     <span class="keywordtype">string</span> lstr(lhs-&gt;perform(&amp;to_string));
<a name="l01307"></a>01307     <span class="keywordtype">string</span> rstr(rhs-&gt;perform(&amp;to_string));
<a name="l01308"></a>01308 
<a name="l01309"></a>01309     <span class="keywordtype">bool</span> l_str_quoted = ((<a class="code" href="../../db/ddf/class_sass_1_1_string.html">Sass::String</a>*)lhs) &amp;&amp; ((<a class="code" href="../../db/ddf/class_sass_1_1_string.html">Sass::String</a>*)lhs)-&gt;sass_fix_1291();
<a name="l01310"></a>01310     <span class="keywordtype">bool</span> r_str_quoted = ((<a class="code" href="../../db/ddf/class_sass_1_1_string.html">Sass::String</a>*)rhs) &amp;&amp; ((<a class="code" href="../../db/ddf/class_sass_1_1_string.html">Sass::String</a>*)rhs)-&gt;sass_fix_1291();
<a name="l01311"></a>01311     <span class="keywordtype">bool</span> l_str_color = ltype == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede868ee847e634a4297b274316de8a8ca9921">Expression::STRING</a> &amp;&amp; ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#1b8dde5f4f9ebe06b1d27895c1dd9dfe">names_to_colors</a>.count(lstr) &amp;&amp; !l_str_quoted;
<a name="l01312"></a>01312     <span class="keywordtype">bool</span> r_str_color = rtype == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede868ee847e634a4297b274316de8a8ca9921">Expression::STRING</a> &amp;&amp; ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#1b8dde5f4f9ebe06b1d27895c1dd9dfe">names_to_colors</a>.count(rstr) &amp;&amp; !r_str_quoted;
<a name="l01313"></a>01313 
<a name="l01314"></a>01314     <span class="keywordflow">if</span> (l_str_color &amp;&amp; r_str_color) {
<a name="l01315"></a>01315       <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#2abf184ce00ca81a17bbc70ce56ea204">op_colors</a>(ctx, op, ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#1b8dde5f4f9ebe06b1d27895c1dd9dfe">names_to_colors</a>[lstr], ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#1b8dde5f4f9ebe06b1d27895c1dd9dfe">names_to_colors</a>[rstr]);
<a name="l01316"></a>01316     }
<a name="l01317"></a>01317     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (l_str_color &amp;&amp; rtype == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8687a5ecb5193db2d5f258ae1abd33714b9">Expression::COLOR</a>) {
<a name="l01318"></a>01318       <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#2abf184ce00ca81a17bbc70ce56ea204">op_colors</a>(ctx, op, ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#1b8dde5f4f9ebe06b1d27895c1dd9dfe">names_to_colors</a>[lstr], rhs);
<a name="l01319"></a>01319     }
<a name="l01320"></a>01320     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (l_str_color &amp;&amp; rtype == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86812a90dfe20486bbe3e075afcd19ef2d0">Expression::NUMBER</a>) {
<a name="l01321"></a>01321       <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#b7e6d42a242e95d972849361e5de2a98">op_color_number</a>(ctx, op, ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#1b8dde5f4f9ebe06b1d27895c1dd9dfe">names_to_colors</a>[lstr], rhs);
<a name="l01322"></a>01322     }
<a name="l01323"></a>01323     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ltype == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8687a5ecb5193db2d5f258ae1abd33714b9">Expression::COLOR</a> &amp;&amp; r_str_color) {
<a name="l01324"></a>01324       <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#cc42a14fe9d6d24d2c9f7434416d23b0">op_number_color</a>(ctx, op, lhs, ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#1b8dde5f4f9ebe06b1d27895c1dd9dfe">names_to_colors</a>[rstr]);
<a name="l01325"></a>01325     }
<a name="l01326"></a>01326     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ltype == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede86812a90dfe20486bbe3e075afcd19ef2d0">Expression::NUMBER</a> &amp;&amp; r_str_color) {
<a name="l01327"></a>01327       <span class="keywordflow">return</span> <a class="code" href="../../da/d80/namespace_sass.html#cc42a14fe9d6d24d2c9f7434416d23b0">op_number_color</a>(ctx, op, lhs, ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#1b8dde5f4f9ebe06b1d27895c1dd9dfe">names_to_colors</a>[rstr]);
<a name="l01328"></a>01328     }
<a name="l01329"></a>01329     <span class="keywordflow">if</span> (op == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7086ab1f2f4dac104b6826ebe0eaba8fd">Binary_Expression::MUL</a>) <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"invalid operands for multiplication"</span>, lhs-&gt;pstate());
<a name="l01330"></a>01330     <span class="keywordflow">if</span> (op == <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a7140fcc89db148e5975f1486e794675ba">Binary_Expression::MOD</a>) <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"invalid operands for modulo"</span>, lhs-&gt;pstate());
<a name="l01331"></a>01331     <span class="keywordtype">string</span> sep;
<a name="l01332"></a>01332     <span class="keywordflow">switch</span> (op) {
<a name="l01333"></a>01333       <span class="keywordflow">case</span> <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a712b733d4941495e86811fe6ceeeff9da">Binary_Expression::SUB</a>: sep = <span class="stringliteral">"-"</span>; <span class="keywordflow">break</span>;
<a name="l01334"></a>01334       <span class="keywordflow">case</span> <a class="code" href="../../d6/db2/class_sass_1_1_binary___expression.html#1d1cfd8ffb84e947f82999c682b666a78565f0d60c3ba6d468661c49d86e9744">Binary_Expression::DIV</a>: sep = <span class="stringliteral">"/"</span>; <span class="keywordflow">break</span>;
<a name="l01335"></a>01335       <span class="keywordflow">default</span>:                         <span class="keywordflow">break</span>;
<a name="l01336"></a>01336     }
<a name="l01337"></a>01337     <span class="keywordflow">if</span> (ltype == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8685a1a6646a516c78ae30556b836aa1fde">Expression::NULL_VAL</a>) <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"invalid null operation: \"null plus "</span>+<a class="code" href="../../da/d80/namespace_sass.html#9e5541de158f3e78965acec20de74638">quote</a>(<a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(rstr), <span class="charliteral">'"'</span>)+<span class="stringliteral">"\"."</span>, lhs-&gt;pstate());
<a name="l01338"></a>01338     <span class="keywordflow">if</span> (rtype == <a class="code" href="../../db/df1/class_sass_1_1_expression.html#73b0eee2a3fe81c31ff067ab81ede8685a1a6646a516c78ae30556b836aa1fde">Expression::NULL_VAL</a>) <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"invalid null operation: \""</span>+<a class="code" href="../../da/d80/namespace_sass.html#9e5541de158f3e78965acec20de74638">quote</a>(<a class="code" href="../../da/d80/namespace_sass.html#8cd4f0c3c5da084c3456a2007559e9ec">unquote</a>(lstr), <span class="charliteral">'"'</span>)+<span class="stringliteral">" plus null\"."</span>, lhs-&gt;pstate());
<a name="l01339"></a>01339     <span class="keywordtype">string</span> result((lstr) + sep + (rstr));
<a name="l01340"></a>01340     <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>* str = <span class="keyword">new</span> (ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d0/d98/class_sass_1_1_string___quoted.html">String_Quoted</a>(lhs-&gt;pstate(), result);
<a name="l01341"></a>01341     str-&gt;quote_mark(0);
<a name="l01342"></a>01342     <span class="keywordflow">return</span> str;
<a name="l01343"></a>01343   }
<a name="l01344"></a>01344 
<a name="l01345"></a><a class="code" href="../../da/d80/namespace_sass.html#3c8206b990b9b641ed1db28140bf2f82">01345</a>   <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* <a class="code" href="../../da/d80/namespace_sass.html#3c8206b990b9b641ed1db28140bf2f82">cval_to_astnode</a>(<a class="code" href="../../d1/db0/union_sass___value.html">Sass_Value</a>* v, <a class="code" href="../../d2/dd7/class_sass_1_1_context.html">Context</a>&amp; <a class="code" href="../../da/d80/namespace_sass.html#ec24354016cba787162086d169717dcf">ctx</a>, <a class="code" href="../../d3/d1e/struct_sass_1_1_backtrace.html">Backtrace</a>* backtrace, <a class="code" href="../../dd/dc1/class_sass_1_1_parser_state.html">ParserState</a> <a class="code" href="../../da/d80/namespace_sass.html#f837bfe668042350a77210b779f113c6">pstate</a>)
<a name="l01346"></a>01346   {
<a name="l01347"></a>01347     <span class="keyword">using</span> std::strlen;
<a name="l01348"></a>01348     <span class="keyword">using</span> std::strcpy;
<a name="l01349"></a>01349     <a class="code" href="../../db/df1/class_sass_1_1_expression.html">Expression</a>* e = 0;
<a name="l01350"></a>01350     <span class="keywordflow">switch</span> (<a class="code" href="../../df/d67/sass__values_8cpp.html#a6229c488748753948cf0ce2d77f35e1">sass_value_get_tag</a>(v)) {
<a name="l01351"></a>01351       <span class="keywordflow">case</span> <a class="code" href="../../d2/d8b/sass__values_8h.html#55e751d8802673804d980d55652c02b53e52f0cb817fd3e87fbf77499a917498">SASS_BOOLEAN</a>: {
<a name="l01352"></a>01352         e = <span class="keyword">new</span> (ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d4a/class_sass_1_1_boolean.html">Boolean</a>(pstate, !!<a class="code" href="../../df/d67/sass__values_8cpp.html#a4548dc9766924027e5f34463659695c">sass_boolean_get_value</a>(v));
<a name="l01353"></a>01353       } <span class="keywordflow">break</span>;
<a name="l01354"></a>01354       <span class="keywordflow">case</span> <a class="code" href="../../d2/d8b/sass__values_8h.html#55e751d8802673804d980d55652c02b59a9639fb46cb2709e693b72a1f1a971f">SASS_NUMBER</a>: {
<a name="l01355"></a>01355         e = <span class="keyword">new</span> (ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../dc/dec/class_sass_1_1_number.html">Number</a>(pstate, <a class="code" href="../../df/d67/sass__values_8cpp.html#a2306dc7aeae7bfd810a153188101acd">sass_number_get_value</a>(v), <a class="code" href="../../df/d67/sass__values_8cpp.html#d648e93e7fd3138f43981f13f1beb813">sass_number_get_unit</a>(v));
<a name="l01356"></a>01356       } <span class="keywordflow">break</span>;
<a name="l01357"></a>01357       <span class="keywordflow">case</span> <a class="code" href="../../d2/d8b/sass__values_8h.html#55e751d8802673804d980d55652c02b5bdd0e618ef9ee86b3e2816368d2f29a9">SASS_COLOR</a>: {
<a name="l01358"></a>01358         e = <span class="keyword">new</span> (ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d7/d48/class_sass_1_1_color.html">Color</a>(pstate, <a class="code" href="../../df/d67/sass__values_8cpp.html#446db52665ccd556eb166b3b5ef10480">sass_color_get_r</a>(v), <a class="code" href="../../df/d67/sass__values_8cpp.html#46cfae78793e0482cb40041af5234dab">sass_color_get_g</a>(v), <a class="code" href="../../df/d67/sass__values_8cpp.html#febf572368e19fdb3aec152e0d489168">sass_color_get_b</a>(v), <a class="code" href="../../df/d67/sass__values_8cpp.html#0559bfc6b1511caa6b2cb022975f16c6">sass_color_get_a</a>(v));
<a name="l01359"></a>01359       } <span class="keywordflow">break</span>;
<a name="l01360"></a>01360       <span class="keywordflow">case</span> <a class="code" href="../../d2/d8b/sass__values_8h.html#55e751d8802673804d980d55652c02b593e1d2fd7e6b142da844b96aefcc595a">SASS_STRING</a>: {
<a name="l01361"></a>01361         e = <span class="keyword">new</span> (ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/dfe/class_sass_1_1_string___constant.html">String_Constant</a>(pstate, <a class="code" href="../../df/d67/sass__values_8cpp.html#a9c66ba7ffcdfa56c4b7ad95ec1e8f6e">sass_string_get_value</a>(v));
<a name="l01362"></a>01362       } <span class="keywordflow">break</span>;
<a name="l01363"></a>01363       <span class="keywordflow">case</span> <a class="code" href="../../d2/d8b/sass__values_8h.html#55e751d8802673804d980d55652c02b52d084f1d56fbdc83064aabd45dedfad4">SASS_LIST</a>: {
<a name="l01364"></a>01364         <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>* <a class="code" href="../../d4/d9b/common_8inc_8php.html#367c038113690266a013d2e04a42a3b1" title="Shorthand method for the Localization::localize method.">l</a> = <span class="keyword">new</span> (ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../db/d2b/class_sass_1_1_list.html">List</a>(pstate, <a class="code" href="../../df/d67/sass__values_8cpp.html#972f14bbcbae2fe89f4b9a660aa26e34">sass_list_get_length</a>(v), <a class="code" href="../../df/d67/sass__values_8cpp.html#11b8ca1d57614a5966468a978a36a562">sass_list_get_separator</a>(v) == <a class="code" href="../../d2/d8b/sass__values_8h.html#db3e2a12286c445dd0048f95306175d17f14c3e1435f77190afa0632f70e613a">SASS_COMMA</a> ? <a class="code" href="../../db/d2b/class_sass_1_1_list.html#9388a3ccf62a50f047b10c2d99114bcef81277bcd86412fe04bb68718ea09392">List::COMMA</a> : <a class="code" href="../../db/d2b/class_sass_1_1_list.html#9388a3ccf62a50f047b10c2d99114bcec08dae7edcb5c5bb959fee5971fbad95">List::SPACE</a>);
<a name="l01365"></a>01365         <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, L = <a class="code" href="../../df/d67/sass__values_8cpp.html#972f14bbcbae2fe89f4b9a660aa26e34">sass_list_get_length</a>(v); i &lt; L; ++i) {
<a name="l01366"></a>01366           *l &lt;&lt; <a class="code" href="../../da/d80/namespace_sass.html#3c8206b990b9b641ed1db28140bf2f82">cval_to_astnode</a>(<a class="code" href="../../df/d67/sass__values_8cpp.html#fbf0f908c47e5fd9cc8eec715b720a6e">sass_list_get_value</a>(v, i), ctx, backtrace, pstate);
<a name="l01367"></a>01367         }
<a name="l01368"></a>01368         e = l;
<a name="l01369"></a>01369       } <span class="keywordflow">break</span>;
<a name="l01370"></a>01370       <span class="keywordflow">case</span> <a class="code" href="../../d2/d8b/sass__values_8h.html#55e751d8802673804d980d55652c02b5813eb845831f54ecb61d03e0e0d7f478">SASS_MAP</a>: {
<a name="l01371"></a>01371         <a class="code" href="../../df/d35/class_sass_1_1_map.html">Map</a>* m = <span class="keyword">new</span> (ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../df/d35/class_sass_1_1_map.html">Map</a>(pstate);
<a name="l01372"></a>01372         <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0, L = <a class="code" href="../../df/d67/sass__values_8cpp.html#329eef1407fca2d6901474ca8d0d5eb6">sass_map_get_length</a>(v); i &lt; L; ++i) {
<a name="l01373"></a>01373           *m &lt;&lt; std::make_pair(
<a name="l01374"></a>01374             <a class="code" href="../../da/d80/namespace_sass.html#3c8206b990b9b641ed1db28140bf2f82">cval_to_astnode</a>(<a class="code" href="../../df/d67/sass__values_8cpp.html#08cb60364b26f8c6d97835345d782f9e">sass_map_get_key</a>(v, i), ctx, backtrace, pstate),
<a name="l01375"></a>01375             <a class="code" href="../../da/d80/namespace_sass.html#3c8206b990b9b641ed1db28140bf2f82">cval_to_astnode</a>(<a class="code" href="../../df/d67/sass__values_8cpp.html#7abfed96aa4d03484c7244ed71689c04">sass_map_get_value</a>(v, i), ctx, backtrace, pstate));
<a name="l01376"></a>01376         }
<a name="l01377"></a>01377         e = m;
<a name="l01378"></a>01378       } <span class="keywordflow">break</span>;
<a name="l01379"></a>01379       <span class="keywordflow">case</span> <a class="code" href="../../d2/d8b/sass__values_8h.html#55e751d8802673804d980d55652c02b507c03f430ee70a882f36fcb683bdce72">SASS_NULL</a>: {
<a name="l01380"></a>01380         e = <span class="keyword">new</span> (ctx.<a class="code" href="../../d2/dd7/class_sass_1_1_context.html#b88e9eae393176cae86ae6c43f66a495">mem</a>) <a class="code" href="../../d6/dd5/namespace_nan.html#d4b94b84f0a38f43868cd876fc366714">Null</a>(pstate);
<a name="l01381"></a>01381       } <span class="keywordflow">break</span>;
<a name="l01382"></a>01382       <span class="keywordflow">case</span> <a class="code" href="../../d2/d8b/sass__values_8h.html#55e751d8802673804d980d55652c02b5f21e52fb7b41c38e5513c2d4994b0807">SASS_ERROR</a>: {
<a name="l01383"></a>01383         <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"Error in C function: "</span> + <span class="keywordtype">string</span>(<a class="code" href="../../df/d67/sass__values_8cpp.html#d7db2a79d7209b8831d737eabaed84f1">sass_error_get_message</a>(v)), pstate, backtrace);
<a name="l01384"></a>01384       } <span class="keywordflow">break</span>;
<a name="l01385"></a>01385       <span class="keywordflow">case</span> <a class="code" href="../../d2/d8b/sass__values_8h.html#55e751d8802673804d980d55652c02b5690646a8b51a899a5cf08d3699f514e3">SASS_WARNING</a>: {
<a name="l01386"></a>01386         <a class="code" href="../../da/d80/namespace_sass.html#9df302d27ea9c7fdd38c4a24026217ae">error</a>(<span class="stringliteral">"Warning in C function: "</span> + <span class="keywordtype">string</span>(<a class="code" href="../../df/d67/sass__values_8cpp.html#f42aae67c25cadedd623929b9774361b">sass_warning_get_message</a>(v)), pstate, backtrace);
<a name="l01387"></a>01387       } <span class="keywordflow">break</span>;
<a name="l01388"></a>01388     }
<a name="l01389"></a>01389     <span class="keywordflow">return</span> e;
<a name="l01390"></a>01390   }
<a name="l01391"></a>01391 
<a name="l01392"></a>01392 }
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Oct 7 19:26:28 2015 for Emeraldion Lodge (codename Zelda) by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
